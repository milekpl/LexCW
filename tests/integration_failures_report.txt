============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-7.4.0, pluggy-1.6.0 -- /mnt/d/Dokumenty/slownik-wielki/flask-app/.venv/bin/python
rootdir: /mnt/d/Dokumenty/slownik-wielki/flask-app
configfile: pytest.ini
plugins: base-url-2.1.0, cov-4.1.0, mock-3.11.1, playwright-0.5.0
collecting ... collected 1320 items

tests/integration/test_adding_data_bug.py::TestAddingDataToEmptyFields::test_adding_definition_to_empty_field PASSED [  0%]
tests/integration/test_adding_data_bug.py::TestAddingDataToEmptyFields::test_adding_definition_string_vs_dict_format PASSED [  0%]
tests/integration/test_advanced_crud.py::TestAdvancedCRUD::test_create_entry_duplicate_id PASSED [  0%]
tests/integration/test_advanced_crud.py::TestAdvancedCRUD::test_create_entry_with_invalid_data PASSED [  0%]
tests/integration/test_advanced_crud.py::TestAdvancedCRUD::test_create_entry_with_complex_structure PASSED [  0%]
tests/integration/test_advanced_crud.py::TestAdvancedCRUD::test_update_nonexistent_entry PASSED [  0%]
tests/integration/test_advanced_crud.py::TestAdvancedCRUD::test_delete_nonexistent_entry PASSED [  0%]
tests/integration/test_advanced_crud.py::TestAdvancedCRUD::test_create_or_update_entry PASSED [  0%]
tests/integration/test_advanced_crud.py::TestAdvancedCRUD::test_related_entries PASSED [  0%]
tests/integration/test_advanced_crud.py::TestAdvancedCRUD::test_entries_by_grammatical_info PASSED [  0%]
tests/integration/test_annotations_integration.py::TestAnnotationsIntegration::test_entry_level_annotation_persistence PASSED [  0%]
tests/integration/test_annotations_integration.py::TestAnnotationsIntegration::test_sense_level_annotation_persistence PASSED [  0%]
tests/integration/test_annotations_integration.py::TestAnnotationsIntegration::test_multiple_annotations_per_element PASSED [  0%]
tests/integration/test_annotations_integration.py::TestAnnotationsIntegration::test_annotation_with_multitext_content PASSED [  1%]
tests/integration/test_annotations_integration.py::TestAnnotationsIntegration::test_annotation_minimal_structure PASSED [  1%]
tests/integration/test_annotations_integration.py::TestAnnotationsIntegration::test_annotation_datetime_formats PASSED [  1%]
tests/integration/test_annotations_integration.py::TestAnnotationsIntegration::test_mixed_entry_and_sense_annotations PASSED [  1%]
tests/integration/test_annotations_integration.py::TestAnnotationsIntegration::test_annotation_common_workflow_names PASSED [  1%]
tests/integration/test_annotations_integration.py::TestAnnotationsIntegration::test_annotation_serialization_to_dict PASSED [  1%]
tests/integration/test_annotations_integration.py::TestAnnotationsIntegration::test_empty_annotations_list PASSED [  1%]
tests/integration/test_api_caching_improvements.py::TestAPICachingImprovements::test_dashboard_api_caching_behavior PASSED [  1%]
tests/integration/test_api_caching_improvements.py::TestAPICachingImprovements::test_entries_api_caching_improvements PASSED [  1%]
tests/integration/test_api_caching_improvements.py::TestAPICachingImprovements::test_cache_clear_functionality PASSED [  1%]
tests/integration/test_api_caching_improvements.py::TestAPICachingImprovements::test_api_error_handling_with_cache PASSED [  1%]
tests/integration/test_api_caching_improvements.py::TestAPICachingImprovements::test_corpus_stats_api_caching PASSED [  1%]
tests/integration/test_api_comprehensive.py::TestEntriesAPI::test_entries_list_with_pagination PASSED [  1%]
tests/integration/test_api_comprehensive.py::TestEntriesAPI::test_entries_list_invalid_pagination PASSED [  2%]
tests/integration/test_api_comprehensive.py::TestEntriesAPI::test_entries_get_single_not_found PASSED [  2%]
tests/integration/test_api_comprehensive.py::TestEntriesAPI::test_entries_create_validation_error PASSED [  2%]
tests/integration/test_api_comprehensive.py::TestEntriesAPI::test_entries_create_invalid_json PASSED [  2%]
tests/integration/test_api_comprehensive.py::TestEntriesAPI::test_entries_update_not_found PASSED [  2%]
tests/integration/test_api_comprehensive.py::TestEntriesAPI::test_entries_delete_not_found PASSED [  2%]
tests/integration/test_api_comprehensive.py::TestSearchAPI::test_search_with_all_parameters PASSED [  2%]
tests/integration/test_api_comprehensive.py::TestSearchAPI::test_search_empty_query PASSED [  2%]
tests/integration/test_api_comprehensive.py::TestSearchAPI::test_search_database_error PASSED [  2%]
tests/integration/test_api_comprehensive.py::TestSearchAPI::test_search_invalid_limit PASSED [  2%]
tests/integration/test_api_comprehensive.py::TestSearchAPI::test_search_invalid_offset PASSED [  2%]
tests/integration/test_api_comprehensive.py::TestValidationAPI::test_validation_check_valid_entry PASSED [  2%]
tests/integration/test_api_comprehensive.py::TestValidationAPI::test_validation_check_invalid_entry PASSED [  2%]
tests/integration/test_api_comprehensive.py::TestValidationAPI::test_validation_check_invalid_json PASSED [  3%]
tests/integration/test_api_comprehensive.py::TestValidationAPI::test_validation_batch_success PASSED [  3%]
tests/integration/test_api_comprehensive.py::TestValidationAPI::test_validation_batch_missing_entries PASSED [  3%]
tests/integration/test_api_comprehensive.py::TestValidationAPI::test_validation_schema_success PASSED [  3%]
tests/integration/test_api_comprehensive.py::TestValidationAPI::test_validation_rules_success PASSED [  3%]
tests/integration/test_api_entries_fix.py::test_list_entries_displays_definitions_correctly PASSED [  3%]
tests/integration/test_api_integration.py::TestAPIIntegration::test_api_entries_get_list PASSED [  3%]
tests/integration/test_api_integration.py::TestAPIIntegration::test_api_entries_get_single PASSED [  3%]
tests/integration/test_api_integration.py::TestAPIIntegration::test_api_entries_get_single_detailed PASSED [  3%]
tests/integration/test_api_integration.py::TestAPIIntegration::test_api_entries_create PASSED [  3%]
tests/integration/test_api_integration.py::TestAPIIntegration::test_api_entries_update PASSED [  3%]
tests/integration/test_api_integration.py::TestAPIIntegration::test_api_entries_delete PASSED [  3%]
tests/integration/test_api_integration.py::TestAPIIntegration::test_api_search PASSED [  3%]
tests/integration/test_api_integration.py::TestAPIIntegration::test_api_export_lift PASSED [  4%]
tests/integration/test_api_integration.py::TestAPIIntegration::test_api_validation_check PASSED [  4%]
tests/integration/test_api_integration.py::TestAPIIntegration::test_api_error_handling PASSED [  4%]
tests/integration/test_api_integration.py::TestExporterIntegration::test_kindle_exporter_integration PASSED [  4%]
tests/integration/test_api_integration.py::TestExporterIntegration::test_sqlite_exporter_integration PASSED [  4%]
tests/integration/test_api_integration.py::TestEnhancedParserIntegration::test_enhanced_lift_parser_parsing PASSED [  4%]
tests/integration/test_app_consistency.py::TestAppConsistency::test_consistent_app_title_in_templates PASSED [  4%]
tests/integration/test_app_consistency.py::TestAppConsistency::test_corpus_management_single_route PASSED [  4%]
tests/integration/test_app_consistency.py::TestAppConsistency::test_corpus_management_postgres_connection PASSED [  4%]
tests/integration/test_app_consistency.py::TestAppConsistency::test_navigation_consistency PASSED [  4%]
tests/integration/test_app_consistency.py::TestRedisCacheIntegration::test_cache_service_initialization PASSED [  4%]
tests/integration/test_app_consistency.py::TestRedisCacheIntegration::test_cache_service_connection PASSED [  4%]
tests/integration/test_app_consistency.py::TestRedisCacheIntegration::test_entries_api_caching PASSED [  4%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveManagerRequirements::test_autosave_manager_initialization PASSED [  5%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveManagerRequirements::test_autosave_start_functionality PASSED [  5%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveManagerRequirements::test_debounced_save_behavior PASSED [  5%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveManagerRequirements::test_validation_before_save PASSED [  5%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveManagerRequirements::test_version_conflict_detection PASSED [  5%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveManagerRequirements::test_save_indicator_updates PASSED [  5%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveManagerRequirements::test_network_error_handling PASSED [  5%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveEndpointRequirements::test_autosave_endpoint_exists PASSED [  5%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveEndpointRequirements::test_validation_integration PASSED [  5%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveEndpointRequirements::test_version_conflict_check PASSED [  5%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveEndpointRequirements::test_successful_save_response PASSED [  5%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveEndpointRequirements::test_error_responses PASSED [  5%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveIntegrationRequirements::test_form_state_manager_integration PASSED [  5%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveIntegrationRequirements::test_validation_engine_integration PASSED [  5%]
tests/integration/test_auto_save_requirements.py::TestAutoSaveIntegrationRequirements::test_entry_form_integration PASSED [  6%]
tests/integration/test_autosave_system.py::TestAutoSaveSystem::test_autosave_api_test_endpoint PASSED [  6%]
tests/integration/test_autosave_system.py::TestAutoSaveSystem::test_autosave_missing_data PASSED [  6%]
tests/integration/test_autosave_system.py::TestAutoSaveSystem::test_autosave_missing_entry_data PASSED [  6%]
tests/integration/test_autosave_system.py::TestAutoSaveSystem::test_autosave_valid_entry PASSED [  6%]
tests/integration/test_autosave_system.py::TestAutoSaveSystem::test_autosave_validation_errors PASSED [  6%]
tests/integration/test_autosave_system.py::TestAutoSaveSystem::test_autosave_with_warnings PASSED [  6%]
tests/integration/test_autosave_system.py::TestAutoSaveManagerIntegration::test_autosave_manager_initialization PASSED [  6%]
tests/integration/test_autosave_system.py::TestAutoSaveManagerIntegration::test_validation_engine_integration PASSED [  6%]
tests/integration/test_backend_dict_field_error.py::test_update_entry_with_dict_field_logs_error PASSED [  6%]
tests/integration/test_backup_api.py::TestBackupAPI::test_get_operation_history PASSED [  6%]
tests/integration/test_backup_api.py::TestBackupAPI::test_undo_last_operation PASSED [  6%]
tests/integration/test_backup_api.py::TestBackupAPI::test_redo_last_operation PASSED [  6%]
tests/integration/test_backup_api.py::TestBackupAPI::test_create_backup PASSED [  7%]
tests/integration/test_backup_api.py::TestBackupAPI::test_get_backup_history PASSED [  7%]
tests/integration/test_backup_api.py::TestBackupAPI::test_schedule_backup PASSED [  7%]
tests/integration/test_backup_api.py::TestBackupAPI::test_get_scheduled_backups PASSED [  7%]
tests/integration/test_backup_api.py::TestBackupAPI::test_cancel_scheduled_backup PASSED [  7%]
tests/integration/test_backup_api.py::TestBackupAPI::test_validate_backup PASSED [  7%]
tests/integration/test_backup_api.py::TestBackupAPI::test_history_includes_metadata PASSED [  7%]
tests/integration/test_backup_api.py::TestBackupAPI::test_download_directory_backup_returns_zip PASSED [  7%]
tests/integration/test_backup_api.py::TestBackupAPI::test_download_single_backup_with_supplementary_files_returns_zip PASSED [  7%]
tests/integration/test_backup_api.py::TestBackupAPI::test_manual_backup_api_creates_supplementary_artifacts PASSED [  7%]
tests/integration/test_backup_api.py::TestBackupAPI::test_backup_history_no_duplicate_filenames PASSED [  7%]
tests/integration/test_backup_api.py::TestBackupAPI::test_delete_backup_endpoint PASSED [  7%]
tests/integration/test_backup_api.py::TestBackupAPI::test_restore_with_invalid_validation_rules_returns_400 PASSED [  7%]
tests/integration/test_backup_contents.py::test_backup_contains_real_contents PASSED [  8%]
tests/integration/test_backup_directory_api.py::test_clear_and_use_default_backup_dir PASSED [  8%]
tests/integration/test_backup_history_duplicates.py::test_history_deduplicates_meta_without_id PASSED [  8%]
tests/integration/test_basex_connector.py::TestBaseXConnector::test_connection PASSED [  8%]
tests/integration/test_basex_connector.py::TestBaseXConnector::test_wrong_credentials PASSED [  8%]
tests/integration/test_basex_connector.py::TestBaseXConnector::test_execute_query PASSED [  8%]
tests/integration/test_basex_connector.py::TestBaseXConnector::test_create_and_drop_database PASSED [  8%]
tests/integration/test_basex_connector.py::TestBaseXConnector::test_add_xml_to_database PASSED [  8%]
tests/integration/test_basic_postgresql.py::TestBasicPostgreSQLSetup::test_config_loading PASSED [  8%]
tests/integration/test_basic_postgresql.py::TestBasicPostgreSQLSetup::test_config_from_env PASSED [  8%]
tests/integration/test_basic_postgresql.py::TestBasicPostgreSQLSetup::test_schema_sql_generation PASSED [  8%]
tests/integration/test_basic_postgresql.py::TestSQLiteDataReading::test_sqlite_data_extraction PASSED [  8%]
tests/integration/test_basic_postgresql.py::TestSQLiteDataReading::test_data_transformation_for_postgresql PASSED [  8%]
tests/integration/test_basic_postgresql.py::TestMigrationLogic::test_batch_processing_logic PASSED [  9%]
tests/integration/test_basic_postgresql.py::TestMigrationLogic::test_id_mapping_logic PASSED [  9%]
tests/integration/test_basic_postgresql.py::TestMigrationLogic::test_error_handling_logic PASSED [  9%]
tests/integration/test_basic_postgresql.py::TestPostgreSQLQueryGeneration::test_insert_query_generation PASSED [  9%]
tests/integration/test_basic_postgresql.py::TestPostgreSQLQueryGeneration::test_index_creation_queries PASSED [  9%]
tests/integration/test_basic_postgresql.py::TestPostgreSQLQueryGeneration::test_full_text_search_setup PASSED [  9%]
tests/integration/test_basic_postgresql.py::test_setup_script_functionality SKIPPED [  9%]
tests/integration/test_caching_integration.py::TestDashboardWithCaching::test_homepage_with_caching_enabled SKIPPED [  9%]
tests/integration/test_caching_integration.py::TestDashboardWithCaching::test_dashboard_api_endpoint_with_caching SKIPPED [  9%]
tests/integration/test_caching_integration.py::TestCorpusManagementWithCaching::test_corpus_management_with_cache_miss PASSED [  9%]
tests/integration/test_caching_integration.py::TestCorpusManagementWithCaching::test_corpus_management_with_cache_hit PASSED [  9%]
tests/integration/test_caching_integration.py::TestCorpusManagementWithCaching::test_corpus_management_cache_fallback PASSED [  9%]
tests/integration/test_centralized_validation_integration.py::TestCentralizedValidationIntegration::test_entry_model_uses_centralized_validation PASSED [  9%]
tests/integration/test_centralized_validation_integration.py::TestCentralizedValidationIntegration::test_entry_validation_catches_critical_errors PASSED [ 10%]
tests/integration/test_centralized_validation_integration.py::TestCentralizedValidationIntegration::test_entry_validation_catches_empty_senses PASSED [ 10%]
tests/integration/test_centralized_validation_integration.py::TestCentralizedValidationIntegration::test_sense_validation_integration PASSED [ 10%]
tests/integration/test_centralized_validation_integration.py::TestCentralizedValidationIntegration::test_language_code_validation_integration PASSED [ 10%]
tests/integration/test_centralized_validation_integration.py::TestCentralizedValidationIntegration::test_validation_result_contains_rule_information PASSED [ 10%]
tests/integration/test_centralized_validation_integration.py::TestCentralizedValidationIntegration::test_validation_priority_categorization PASSED [ 10%]
tests/integration/test_centralized_validation_integration.py::TestCentralizedValidationIntegration::test_custom_validation_functions_work PASSED [ 10%]
tests/integration/test_centralized_validation_integration.py::TestCentralizedValidationIntegration::test_model_to_dict_compatibility PASSED [ 10%]
tests/integration/test_centralized_validation_integration.py::TestCentralizedValidationIntegration::test_variant_entry_listing_without_validation_errors PASSED [ 10%]
tests/integration/test_centralized_validation_integration.py::TestValidationEnginePerformance::test_validation_engine_performance PASSED [ 10%]
tests/integration/test_centralized_validation_integration.py::TestValidationEnginePerformance::test_multiple_validations_performance PASSED [ 10%]
tests/integration/test_complete_filtering_and_refresh.py::TestCompleteFilteringAndRefresh::test_entries_filtering_api_integration PASSED [ 10%]
tests/integration/test_complete_filtering_and_refresh.py::TestCompleteFilteringAndRefresh::test_dashboard_cache_clear_endpoint PASSED [ 10%]
tests/integration/test_complete_filtering_and_refresh.py::TestCompleteFilteringAndRefresh::test_entries_cache_clear_endpoint PASSED [ 10%]
tests/integration/test_complete_filtering_and_refresh.py::TestCompleteFilteringAndRefresh::test_entries_cache_behavior_with_different_filters PASSED [ 11%]
tests/integration/test_complete_filtering_and_refresh.py::TestCompleteFilteringAndRefresh::test_sort_order_functionality PASSED [ 11%]
tests/integration/test_complete_flow.py::test_complete_entry_flow PASSED [ 11%]
tests/integration/test_component_form_types_dynamic.py::TestComponentFormTypesDynamicLoading::test_no_hardcoded_component_types_when_ranges_empty PASSED [ 11%]
tests/integration/test_component_form_types_dynamic.py::TestComponentFormTypesDynamicLoading::test_inadmissible_hardcoded_component_types_detection PASSED [ 11%]
tests/integration/test_component_sense_relations_crud.py::TestComponentCRUD::test_create_component_relation PASSED [ 11%]
tests/integration/test_component_sense_relations_crud.py::TestComponentCRUD::test_read_component_relations PASSED [ 11%]
tests/integration/test_component_sense_relations_crud.py::TestComponentCRUD::test_add_multiple_components PASSED [ 11%]
tests/integration/test_component_sense_relations_crud.py::TestComponentCRUD::test_component_circularity_detection_backend PASSED [ 11%]
tests/integration/test_component_sense_relations_crud.py::TestSenseRelationCRUD::test_create_sense_relation PASSED [ 11%]
tests/integration/test_component_sense_relations_crud.py::TestSenseRelationCRUD::test_read_sense_relations FAILED [ 11%]
tests/integration/test_component_sense_relations_crud.py::TestSenseRelationCRUD::test_update_sense_relation PASSED [ 11%]
tests/integration/test_component_sense_relations_crud.py::TestSenseRelationCRUD::test_delete_sense_relation PASSED [ 11%]
tests/integration/test_component_sense_relations_crud.py::TestSenseRelationCRUD::test_sense_relation_circularity_detection_backend PASSED [ 12%]
tests/integration/test_component_sense_relations_crud.py::TestSearchIntegration::test_search_api_for_components PASSED [ 12%]
tests/integration/test_component_sense_relations_crud.py::TestSearchIntegration::test_search_api_for_sense_relations PASSED [ 12%]
tests/integration/test_component_sense_relations_crud.py::TestEnrichmentDisplay::test_component_enrichment_displays_headword PASSED [ 12%]
tests/integration/test_component_sense_relations_crud.py::TestEnrichmentDisplay::test_sense_relation_enrichment_displays_headword_and_gloss PASSED [ 12%]
tests/integration/test_component_sense_relations_crud.py::TestUIScriptLoading::test_component_search_script_loaded PASSED [ 12%]
tests/integration/test_component_sense_relations_crud.py::TestUIScriptLoading::test_sense_relation_search_script_loaded PASSED [ 12%]
tests/integration/test_component_sense_relations_crud.py::TestValidationRules::test_validation_rule_r811_component_circularity PASSED [ 12%]
tests/integration/test_component_sense_relations_crud.py::TestValidationRules::test_validation_rule_r812_sense_circularity PASSED [ 12%]
tests/integration/test_component_sense_relations_crud.py::TestValidationRules::test_validation_rule_r813_entry_relation_circularity PASSED [ 12%]
tests/integration/test_corpus_analytics_fix.py::test_corpus_management_uses_analytics_database PASSED [ 12%]
tests/integration/test_corpus_caching.py::test_corpus_management_uses_cache PASSED [ 12%]
tests/integration/test_corpus_caching.py::test_corpus_management_cache_miss PASSED [ 12%]
tests/integration/test_corpus_management_integration.py::TestCorpusManagementIntegration::test_corpus_management_connects_to_postgresql PASSED [ 13%]
tests/integration/test_corpus_management_integration.py::TestCorpusManagementIntegration::test_corpus_management_displays_connection_status PASSED [ 13%]
tests/integration/test_corpus_management_integration.py::TestCorpusManagementIntegration::test_corpus_management_handles_postgresql_error PASSED [ 13%]
tests/integration/test_corpus_management_integration.py::TestCorpusManagementIntegration::test_corpus_management_navigation_to_home PASSED [ 13%]
tests/integration/test_corpus_management_integration.py::TestCorpusManagementIntegration::test_corpus_management_breadcrumb_navigation PASSED [ 13%]
tests/integration/test_corpus_management_integration.py::TestCorpusManagementIntegration::test_corpus_management_displays_correct_postgresql_stats PASSED [ 13%]
tests/integration/test_corpus_management_missing_table.py::TestCorpusManagementIntegrationTableMissing::test_corpus_management_shows_real_stats_when_table_exists PASSED [ 13%]
tests/integration/test_corpus_management_view.py::TestCorpusManagement::test_corpus_management_renders_successfully PASSED [ 13%]
tests/integration/test_corpus_management_view.py::TestCorpusManagement::test_corpus_management_default_context PASSED [ 13%]
tests/integration/test_corpus_management_view.py::TestCorpusManagement::test_corpus_management_template_structure PASSED [ 13%]
tests/integration/test_corpus_migrator_stats.py::TestCorpusMigratorStats::test_get_corpus_stats_table_not_exists PASSED [ 13%]
tests/integration/test_corpus_migrator_stats.py::TestCorpusMigratorStats::test_get_corpus_stats_with_data PASSED [ 13%]
tests/integration/test_corpus_migrator_stats.py::TestCorpusMigratorStats::test_get_corpus_stats_empty_table PASSED [ 13%]
tests/integration/test_corpus_routes.py::TestCorpusUpload::test_upload_tmx_file_success PASSED [ 14%]
tests/integration/test_corpus_routes.py::TestCorpusUpload::test_upload_csv_file_success PASSED [ 14%]
tests/integration/test_corpus_routes.py::TestCorpusUpload::test_upload_no_file_error PASSED [ 14%]
tests/integration/test_corpus_routes.py::TestCorpusUpload::test_upload_invalid_file_type PASSED [ 14%]
tests/integration/test_corpus_routes.py::TestCorpusStats::test_get_corpus_stats_success PASSED [ 14%]
tests/integration/test_corpus_routes.py::TestCorpusCleanup::test_cleanup_corpus_success PASSED [ 14%]
tests/integration/test_corpus_routes.py::TestCorpusCleanup::test_deduplicate_corpus_success PASSED [ 14%]
tests/integration/test_corpus_routes.py::TestTmxToCsvConversion::test_convert_tmx_to_csv_success PASSED [ 14%]
tests/integration/test_corpus_routes.py::TestTmxToCsvConversion::test_convert_tmx_no_file_error PASSED [ 14%]
tests/integration/test_cross_reference_functionality.py::test_variant_type_extraction_from_entries PASSED [ 14%]
tests/integration/test_cross_reference_functionality.py::test_query_builder_api_endpoints PASSED [ 14%]
tests/integration/test_cross_reference_functionality.py::test_worksets_api_endpoints PASSED [ 14%]
tests/integration/test_cross_reference_functionality.py::test_cross_reference_search_with_dynamic_types PASSED [ 14%]
tests/integration/test_cross_reference_functionality.py::test_variant_search_with_dynamic_types SKIPPED [ 15%]
tests/integration/test_cross_reference_functionality.py::test_grammatical_info_search_with_dynamic_types FAILED [ 15%]
tests/integration/test_cross_reference_functionality.py::test_workset_creation_with_complex_query FAILED [ 15%]
tests/integration/test_cross_reference_functionality.py::test_ranges_api_provides_all_necessary_types FAILED [ 15%]
tests/integration/test_css_filtering.py::TestCSSFiltering::test_relation_filter_exclude FAILED [ 15%]
tests/integration/test_css_filtering.py::TestCSSFiltering::test_relation_filter_include FAILED [ 15%]
tests/integration/test_css_filtering.py::TestCSSFiltering::test_trait_filter PASSED [ 15%]
tests/integration/test_css_filtering.py::TestCSSFiltering::test_field_filter PASSED [ 15%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServiceCRUD::test_create_profile SKIPPED [ 15%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServiceCRUD::test_get_profile SKIPPED [ 15%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServiceCRUD::test_get_nonexistent_profile SKIPPED [ 15%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServiceCRUD::test_list_profiles SKIPPED [ 15%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServiceCRUD::test_update_profile SKIPPED [ 15%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServiceCRUD::test_update_nonexistent_profile SKIPPED [ 15%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServiceCRUD::test_delete_profile SKIPPED [ 16%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServiceCRUD::test_delete_nonexistent_profile SKIPPED [ 16%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServicePersistence::test_save_profiles SKIPPED [ 16%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServicePersistence::test_load_profiles SKIPPED [ 16%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServicePersistence::test_load_corrupt_file SKIPPED [ 16%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServiceRender::test_render_entry_basic SKIPPED [ 16%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServiceRender::test_render_entry_with_elements SKIPPED [ 16%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServiceRender::test_render_invalid_xml SKIPPED [ 16%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServiceRender::test_render_empty_entry SKIPPED [ 16%]
tests/integration/test_css_mapping_service_integration.py::TestCSSMappingServiceRender::test_render_with_profile_name_sanitization SKIPPED [ 16%]
tests/integration/test_css_mapping_service_integration.py::TestDisplayProfile::test_create_profile SKIPPED [ 16%]
tests/integration/test_css_mapping_service_integration.py::TestDisplayProfile::test_profile_dict SKIPPED [ 16%]
tests/integration/test_css_mapping_service_integration.py::TestDisplayProfile::test_profile_without_id SKIPPED [ 16%]
tests/integration/test_css_mapping_service_integration.py::TestDisplayProfile::test_profile_repr SKIPPED [ 17%]
tests/integration/test_css_relation_headword_resolution.py::TestCSSRelationHeadwordResolution::test_relation_displays_headword_not_id PASSED [ 17%]
tests/integration/test_css_relation_headword_resolution.py::TestCSSRelationHeadwordResolution::test_relation_shows_id_when_target_missing PASSED [ 17%]
tests/integration/test_css_relation_resolution.py::TestCSSRelationResolution::test_relation_resolves_to_headword_in_css_display PASSED [ 17%]
tests/integration/test_css_relation_resolution.py::TestCSSRelationResolution::test_relation_fallback_when_target_not_found PASSED [ 17%]
tests/integration/test_css_relation_resolution.py::TestCSSRelationResolution::test_multiple_relations_all_resolved FAILED [ 17%]
tests/integration/test_custom_field_types_integration.py::TestIntegerCustomFieldsXML::test_parse_integer_custom_field_on_entry PASSED [ 17%]
tests/integration/test_custom_field_types_integration.py::TestIntegerCustomFieldsXML::test_parse_integer_custom_field_on_sense PASSED [ 17%]
tests/integration/test_custom_field_types_integration.py::TestIntegerCustomFieldsXML::test_generate_integer_custom_field PASSED [ 17%]
tests/integration/test_custom_field_types_integration.py::TestIntegerCustomFieldsXML::test_roundtrip_integer_custom_field PASSED [ 17%]
tests/integration/test_custom_field_types_integration.py::TestGenDateCustomFieldsXML::test_parse_gendate_exact PASSED [ 17%]
tests/integration/test_custom_field_types_integration.py::TestGenDateCustomFieldsXML::test_parse_gendate_approximate PASSED [ 17%]
tests/integration/test_custom_field_types_integration.py::TestGenDateCustomFieldsXML::test_parse_gendate_before_after PASSED [ 17%]
tests/integration/test_custom_field_types_integration.py::TestGenDateCustomFieldsXML::test_generate_gendate PASSED [ 18%]
tests/integration/test_custom_field_types_integration.py::TestGenDateCustomFieldsXML::test_roundtrip_gendate PASSED [ 18%]
tests/integration/test_custom_field_types_integration.py::TestMultiUnicodeCustomFieldsXML::test_parse_multiUnicode_single_language PASSED [ 18%]
tests/integration/test_custom_field_types_integration.py::TestMultiUnicodeCustomFieldsXML::test_parse_multiUnicode_multiple_languages PASSED [ 18%]
tests/integration/test_custom_field_types_integration.py::TestMultiUnicodeCustomFieldsXML::test_parse_multiUnicode_on_sense PASSED [ 18%]
tests/integration/test_custom_field_types_integration.py::TestMultiUnicodeCustomFieldsXML::test_generate_multiUnicode PASSED [ 18%]
tests/integration/test_custom_field_types_integration.py::TestMultiUnicodeCustomFieldsXML::test_roundtrip_multiUnicode PASSED [ 18%]
tests/integration/test_custom_field_types_integration.py::TestMixedCustomFieldTypesXML::test_parse_all_three_types_together PASSED [ 18%]
tests/integration/test_custom_field_types_integration.py::TestMixedCustomFieldTypesXML::test_roundtrip_all_three_types PASSED [ 18%]
tests/integration/test_custom_fields_integration.py::TestCustomFieldsXMLSerialization::test_exemplar_field_xml_generation PASSED [ 18%]
tests/integration/test_custom_fields_integration.py::TestCustomFieldsXMLSerialization::test_scientific_name_field_xml_generation PASSED [ 18%]
tests/integration/test_custom_fields_integration.py::TestCustomFieldsXMLSerialization::test_literal_meaning_field_xml_generation PASSED [ 18%]
tests/integration/test_custom_fields_integration.py::TestCustomFieldsXMLSerialization::test_all_custom_fields_together PASSED [ 18%]
tests/integration/test_custom_fields_integration.py::TestCustomFieldsXMLParsing::test_parse_exemplar_field PASSED [ 19%]
tests/integration/test_custom_fields_integration.py::TestCustomFieldsXMLParsing::test_parse_scientific_name_field PASSED [ 19%]
tests/integration/test_custom_fields_integration.py::TestCustomFieldsXMLParsing::test_parse_literal_meaning_field PASSED [ 19%]
tests/integration/test_custom_fields_integration.py::TestCustomFieldsXMLParsing::test_roundtrip_all_custom_fields PASSED [ 19%]
tests/integration/test_custom_fields_integration.py::TestCustomFieldsXMLParsing::test_empty_custom_fields_not_serialized PASSED [ 19%]
tests/integration/test_custom_possibility_lists_integration.py::TestReferenceAtomicXML::test_parse_reference_atomic_on_entry PASSED [ 19%]
tests/integration/test_custom_possibility_lists_integration.py::TestReferenceAtomicXML::test_parse_reference_atomic_on_sense PASSED [ 19%]
tests/integration/test_custom_possibility_lists_integration.py::TestReferenceAtomicXML::test_parse_reference_atomic_hierarchical PASSED [ 19%]
tests/integration/test_custom_possibility_lists_integration.py::TestReferenceAtomicXML::test_generate_reference_atomic PASSED [ 19%]
tests/integration/test_custom_possibility_lists_integration.py::TestReferenceCollectionXML::test_parse_reference_collection_multiple_values PASSED [ 19%]
tests/integration/test_custom_possibility_lists_integration.py::TestReferenceCollectionXML::test_parse_reference_collection_single_value PASSED [ 19%]
tests/integration/test_custom_possibility_lists_integration.py::TestReferenceCollectionXML::test_parse_reference_collection_on_sense PASSED [ 19%]
tests/integration/test_custom_possibility_lists_integration.py::TestReferenceCollectionXML::test_generate_reference_collection PASSED [ 19%]
tests/integration/test_custom_possibility_lists_integration.py::TestCustomRangeLoading::test_parse_custom_range_basic PASSED [ 20%]
tests/integration/test_custom_possibility_lists_integration.py::TestCustomRangeLoading::test_parse_custom_range_hierarchical PASSED [ 20%]
tests/integration/test_custom_possibility_lists_integration.py::TestCustomRangeLoading::test_parse_multiple_custom_ranges PASSED [ 20%]
tests/integration/test_custom_possibility_lists_integration.py::TestRoundTripPossibilityLists::test_roundtrip_reference_atomic PASSED [ 20%]
tests/integration/test_custom_possibility_lists_integration.py::TestRoundTripPossibilityLists::test_roundtrip_reference_collection PASSED [ 20%]
tests/integration/test_custom_possibility_lists_integration.py::TestRoundTripPossibilityLists::test_roundtrip_mixed_possibility_fields PASSED [ 20%]
tests/integration/test_custom_ranges_config_api.py::test_add_custom_range_via_api PASSED [ 20%]
tests/integration/test_custom_ranges_config_api.py::test_post_existing_config_returns_400 PASSED [ 20%]
tests/integration/test_custom_ranges_config_behavior.py::test_custom_config_range_is_provided_and_marked PASSED [ 20%]
tests/integration/test_custom_ranges_config_behavior.py::test_api_returns_provided_flag_for_config_range PASSED [ 20%]
tests/integration/test_custom_ranges_db_population.py::test_db_scan_creates_custom_ranges PASSED [ 20%]
tests/integration/test_custom_ranges_import.py::TestCustomRangesImportIntegration::test_import_with_undefined_relations PASSED [ 20%]
tests/integration/test_custom_ranges_import.py::TestCustomRangesImportIntegration::test_import_with_undefined_traits PASSED [ 20%]
tests/integration/test_custom_ranges_import.py::TestCustomRangesImportIntegration::test_export_includes_custom_ranges PASSED [ 20%]
tests/integration/test_custom_ranges_import.py::TestCustomRangesImportIntegration::test_dictionary_service_get_ranges_with_custom PASSED [ 21%]
tests/integration/test_dashboard.py::TestDashboard::test_homepage_loads_successfully PASSED [ 21%]
tests/integration/test_dashboard.py::TestDashboard::test_homepage_contains_title PASSED [ 21%]
tests/integration/test_dashboard.py::TestDashboard::test_homepage_contains_system_status_section PASSED [ 21%]
tests/integration/test_dashboard.py::TestDashboard::test_homepage_contains_stats_section PASSED [ 21%]
tests/integration/test_dashboard.py::TestDashboard::test_homepage_contains_system_status_badges_with_ids PASSED [ 21%]
tests/integration/test_dashboard.py::TestDashboard::test_homepage_does_not_contain_debug_info PASSED [ 21%]
tests/integration/test_dashboard.py::TestDashboard::test_homepage_with_specific_mock_data PASSED [ 21%]
tests/integration/test_dashboard.py::TestDashboard::test_homepage_with_database_error PASSED [ 21%]
tests/integration/test_dashboard.py::TestDashboard::test_system_status_api_endpoint PASSED [ 21%]
tests/integration/test_dashboard.py::TestDashboard::test_system_status_api_with_mock_data PASSED [ 21%]
tests/integration/test_dashboard.py::TestDashboard::test_dashboard_javascript_included PASSED [ 21%]
tests/integration/test_dashboard.py::TestDashboard::test_homepage_accessibility_features PASSED [ 21%]
tests/integration/test_dashboard.py::TestDashboard::test_homepage_responsive_layout PASSED [ 22%]
tests/integration/test_dashboard.py::TestDashboard::test_recent_activity_section PASSED [ 22%]
tests/integration/test_dashboard.py::TestDashboard::test_quick_actions_section PASSED [ 22%]
tests/integration/test_dashboard.py::TestDashboard::test_homepage_error_handling PASSED [ 22%]
tests/integration/test_dashboard.py::TestDashboard::test_no_sensitive_info_exposed PASSED [ 22%]
tests/integration/test_dashboard.py::TestDashboard::test_csrf_protection_meta_tag PASSED [ 22%]
tests/integration/test_dashboard.py::TestDashboard::test_system_status_badge_colors PASSED [ 22%]
tests/integration/test_dashboard.py::TestDashboard::test_homepage_contains_icons PASSED [ 22%]
tests/integration/test_dashboard.py::TestDashboard::test_specific_debug_patterns_not_present PASSED [ 22%]
tests/integration/test_dashboard.py::TestDashboard::test_system_status_properly_formatted PASSED [ 22%]
tests/integration/test_dashboard_integration.py::TestDashboardIntegration::test_activity_recording PASSED [ 22%]
tests/integration/test_dashboard_integration.py::TestDashboardIntegration::test_system_status_data PASSED [ 22%]
tests/integration/test_dashboard_mock_only.py::test_mock_only PASSED     [ 22%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_homepage_loads_successfully PASSED [ 23%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_homepage_contains_title PASSED [ 23%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_homepage_contains_system_status_section PASSED [ 23%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_homepage_contains_stats_section PASSED [ 23%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_homepage_contains_system_status_badges_with_ids PASSED [ 23%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_homepage_does_not_contain_debug_info PASSED [ 23%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_homepage_with_specific_mock_data PASSED [ 23%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_homepage_with_database_error PASSED [ 23%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_system_status_api_endpoint PASSED [ 23%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_system_status_api_with_mock_data PASSED [ 23%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_dashboard_javascript_included PASSED [ 23%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_homepage_accessibility_features PASSED [ 23%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_homepage_responsive_layout PASSED [ 23%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_recent_activity_section PASSED [ 24%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_quick_actions_section PASSED [ 24%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_homepage_error_handling PASSED [ 24%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_no_sensitive_info_exposed PASSED [ 24%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_csrf_protection_meta_tag PASSED [ 24%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_system_status_badge_colors PASSED [ 24%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_homepage_contains_icons PASSED [ 24%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_specific_debug_patterns_not_present PASSED [ 24%]
tests/integration/test_dashboard_optimized.py::TestDashboard::test_system_status_properly_formatted PASSED [ 24%]
tests/integration/test_database_drop_integration.py::TestDatabaseDrop::test_drop_database_content FAILED [ 24%]
tests/integration/test_database_drop_integration.py::TestDatabaseDrop::test_drop_and_reinitialize FAILED [ 24%]
tests/integration/test_database_drop_integration.py::TestDatabaseDrop::test_drop_database_content_multiple_times FAILED [ 24%]
tests/integration/test_dates_ui.py::TestDatesUI::test_query_builder_has_date_sorting_options PASSED [ 24%]
tests/integration/test_dates_ui.py::TestDatesUI::test_date_sorting_functionality PASSED [ 25%]
tests/integration/test_debug_backup.py::test_debug_get_backup_by_id PASSED [ 25%]
tests/integration/test_debug_relations.py::test_debug_relations PASSED   [ 25%]
tests/integration/test_delete_custom_range.py::test_delete_custom_range_removes_db_rows PASSED [ 25%]
tests/integration/test_dictionary_service.py::TestDictionaryService::test_initialize_database ERROR [ 25%]
tests/integration/test_dictionary_service.py::TestDictionaryService::test_get_entry ERROR [ 25%]
tests/integration/test_dictionary_service.py::TestDictionaryService::test_create_entry ERROR [ 25%]
tests/integration/test_dictionary_service.py::TestDictionaryService::test_update_entry ERROR [ 25%]
tests/integration/test_dictionary_service.py::TestDictionaryService::test_delete_entry ERROR [ 25%]
tests/integration/test_dictionary_service.py::TestDictionaryService::test_list_entries ERROR [ 25%]
tests/integration/test_dictionary_service.py::TestDictionaryService::test_search_entries ERROR [ 25%]
tests/integration/test_dictionary_service.py::TestDictionaryService::test_import_lift ERROR [ 25%]
tests/integration/test_dictionary_service.py::TestDictionaryService::test_export_lift ERROR [ 25%]
tests/integration/test_display_api.py::TestDisplayAPI::test_create_profile SKIPPED [ 25%]
tests/integration/test_display_api.py::TestDisplayAPI::test_get_profile SKIPPED [ 26%]
tests/integration/test_display_api.py::TestDisplayAPI::test_list_profiles SKIPPED [ 26%]
tests/integration/test_display_api.py::TestDisplayAPI::test_update_profile SKIPPED [ 26%]
tests/integration/test_display_api.py::TestDisplayAPI::test_delete_profile SKIPPED [ 26%]
tests/integration/test_display_api.py::TestDisplayAPI::test_preview_entry SKIPPED [ 26%]
tests/integration/test_display_api_real.py::TestDisplayProfileAPIReal::test_create_and_get_profile PASSED [ 26%]
tests/integration/test_display_api_real.py::TestDisplayProfileAPIReal::test_list_profiles PASSED [ 26%]
tests/integration/test_display_api_real.py::TestDisplayProfileAPIReal::test_update_profile PASSED [ 26%]
tests/integration/test_display_api_real.py::TestDisplayProfileAPIReal::test_delete_profile PASSED [ 26%]
tests/integration/test_display_api_real.py::TestDisplayProfileAPIReal::test_get_nonexistent_profile PASSED [ 26%]
tests/integration/test_display_api_real.py::TestDisplayProfileAPIReal::test_update_nonexistent_profile PASSED [ 26%]
tests/integration/test_display_api_real.py::TestDisplayProfileAPIReal::test_delete_nonexistent_profile PASSED [ 26%]
tests/integration/test_display_api_real.py::TestDisplayProfileAPIReal::test_create_profile_invalid_data PASSED [ 26%]
tests/integration/test_display_api_real.py::TestDisplayProfileAPIReal::test_number_senses_if_multiple_field PASSED [ 27%]
tests/integration/test_display_api_real.py::TestDisplayProfilePersistence::test_profiles_persist_across_requests PASSED [ 27%]
tests/integration/test_display_api_real.py::TestDisplayProfilePersistence::test_updates_persist PASSED [ 27%]
tests/integration/test_display_api_real.py::TestDisplayProfilePersistence::test_deletes_persist PASSED [ 27%]
tests/integration/test_display_aspect_integration.py::TestDisplayAspectIntegration::test_relation_display_aspect_abbr_vs_label PASSED [ 27%]
tests/integration/test_display_aspect_integration.py::TestDisplayAspectIntegration::test_grammatical_info_display_aspect PASSED [ 27%]
tests/integration/test_display_aspect_integration.py::TestDisplayAspectIntegration::test_variant_display_aspect FAILED [ 27%]
tests/integration/test_display_aspect_integration.py::TestDisplayAspectIntegration::test_trait_display_aspect PASSED [ 27%]
tests/integration/test_display_aspect_integration.py::TestDisplayAspectIntegration::test_mixed_display_aspects PASSED [ 27%]
tests/integration/test_display_aspect_integration.py::TestDisplayAspectIntegration::test_display_aspect_fallback_behavior PASSED [ 27%]
tests/integration/test_display_aspect_integration.py::TestDisplayAspectIntegration::test_display_aspect_default_behavior PASSED [ 27%]
tests/integration/test_display_profile_css_crud.py::TestDisplayProfileCSSCRUD::test_create_profile_with_custom_css PASSED [ 27%]
tests/integration/test_display_profile_css_crud.py::TestDisplayProfileCSSCRUD::test_read_profile_custom_css PASSED [ 27%]
tests/integration/test_display_profile_css_crud.py::TestDisplayProfileCSSCRUD::test_update_profile_custom_css PASSED [ 28%]
tests/integration/test_display_profile_css_crud.py::TestDisplayProfileCSSCRUD::test_delete_profile_with_custom_css PASSED [ 28%]
tests/integration/test_display_profile_css_crud.py::TestDisplayProfileCSSCRUD::test_custom_css_persists_in_to_dict PASSED [ 28%]
tests/integration/test_display_profile_css_crud.py::TestDisplayProfileCSSCRUD::test_custom_css_in_export_import PASSED [ 28%]
tests/integration/test_display_profile_css_crud.py::TestDisplayProfileCSSCRUD::test_css_applied_in_rendering PASSED [ 28%]
tests/integration/test_display_profile_css_crud.py::TestDisplayProfileCSSCRUD::test_global_settings_persist PASSED [ 28%]
tests/integration/test_display_profile_css_crud.py::TestDisplayProfileCSSCRUD::test_sense_numbering_css_injection PASSED [ 28%]
tests/integration/test_display_profile_css_crud.py::TestDisplayProfileCSSCRUD::test_empty_custom_css PASSED [ 28%]
tests/integration/test_display_profile_css_crud.py::TestDisplayProfileCSSCRUD::test_css_with_special_characters PASSED [ 28%]
tests/integration/test_display_profile_css_crud.py::TestDisplayProfileCSSCRUD::test_simplified_numbering_logic PASSED [ 28%]
tests/integration/test_display_profile_models_integration.py::TestDisplayProfileModel::test_create_profile PASSED [ 28%]
tests/integration/test_display_profile_models_integration.py::TestDisplayProfileModel::test_profile_elements_relationship PASSED [ 28%]
tests/integration/test_display_profile_models_integration.py::TestDisplayProfileModel::test_profile_to_dict PASSED [ 28%]
tests/integration/test_display_profile_models_integration.py::TestDisplayProfileModel::test_profile_to_config PASSED [ 29%]
tests/integration/test_display_profile_models_integration.py::TestDisplayProfileModel::test_only_one_default_profile PASSED [ 29%]
tests/integration/test_display_profile_models_integration.py::TestProfileElementModel::test_create_element PASSED [ 29%]
tests/integration/test_display_profile_models_integration.py::TestProfileElementModel::test_element_to_dict PASSED [ 29%]
tests/integration/test_display_profile_models_integration.py::TestProfileElementModel::test_element_default_values PASSED [ 29%]
tests/integration/test_display_profile_models_integration.py::TestProfileElementModel::test_element_ordering PASSED [ 29%]
tests/integration/test_display_profile_models_integration.py::TestProfileElementModel::test_element_visibility_values PASSED [ 29%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_create_profile PASSED [ 29%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_create_profile_duplicate_name PASSED [ 29%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_get_profile PASSED [ 29%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_get_profile_not_found PASSED [ 29%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_get_profile_by_name PASSED [ 29%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_get_profile_by_name_not_found PASSED [ 29%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_list_profiles PASSED [ 30%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_list_profiles_filter_system PASSED [ 30%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_update_profile PASSED [ 30%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_update_profile_elements PASSED [ 30%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_delete_profile PASSED [ 30%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_delete_system_profile_fails PASSED [ 30%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_delete_default_profile_fails PASSED [ 30%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_set_default_profile PASSED [ 30%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_get_default_profile PASSED [ 30%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_get_default_profile_none PASSED [ 30%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_export_profile PASSED [ 30%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_import_profile PASSED [ 30%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_import_profile_rename_if_exists PASSED [ 30%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_create_from_registry_default PASSED [ 30%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_validate_element_config_valid PASSED [ 31%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_validate_element_config_invalid_lift_element PASSED [ 31%]
tests/integration/test_display_profile_service_integration.py::TestDisplayProfileService::test_validate_element_config_missing_required PASSED [ 31%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_list_profiles_empty PASSED [ 31%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_create_profile PASSED [ 31%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_create_profile_missing_name PASSED [ 31%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_create_profile_duplicate_name PASSED [ 31%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_get_profile PASSED [ 31%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_get_profile_not_found PASSED [ 31%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_update_profile PASSED [ 31%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_update_profile_not_found PASSED [ 31%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_delete_profile PASSED [ 31%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_delete_profile_not_found PASSED [ 31%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_set_default_profile PASSED [ 32%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_get_default_profile PASSED [ 32%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_get_default_profile_none_exists PASSED [ 32%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_create_from_default PASSED [ 32%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_export_profile PASSED [ 32%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_import_profile PASSED [ 32%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_list_profiles_after_creating_several PASSED [ 32%]
tests/integration/test_display_profiles_api.py::TestDisplayProfilesAPI::test_profile_elements_ordering PASSED [ 32%]
tests/integration/test_domain_types_crud.py::TestDomainTypesIntegration::test_create_entry_with_entry_level_domain_type PASSED [ 32%]
tests/integration/test_domain_types_crud.py::TestDomainTypesIntegration::test_create_entry_with_sense_level_domain_type PASSED [ 32%]
tests/integration/test_domain_types_crud.py::TestDomainTypesIntegration::test_create_entry_with_both_entry_and_sense_domain_types PASSED [ 32%]
tests/integration/test_domain_types_crud.py::TestDomainTypesIntegration::test_update_entry_domain_type PASSED [ 32%]
tests/integration/test_domain_types_crud.py::TestDomainTypesIntegration::test_update_sense_domain_type PASSED [ 32%]
tests/integration/test_domain_types_crud.py::TestDomainTypesIntegration::test_retrieve_entries_by_domain_type PASSED [ 33%]
tests/integration/test_domain_types_crud.py::TestDomainTypesIntegration::test_delete_entry_with_domain_type PASSED [ 33%]
tests/integration/test_domain_types_crud.py::TestDomainTypesIntegration::test_create_entry_without_domain_type PASSED [ 33%]
tests/integration/test_domain_types_crud.py::TestDomainTypesIntegration::test_create_entry_with_empty_domain_type PASSED [ 33%]
tests/integration/test_domain_types_crud.py::TestDomainTypesIntegration::test_multiple_senses_different_domain_types PASSED [ 33%]
tests/integration/test_domain_types_crud.py::TestDomainTypesIntegration::test_unicode_domain_type_handling PASSED [ 33%]
tests/integration/test_domain_types_crud.py::TestDomainTypesIntegration::test_domain_type_serialization_roundtrip PASSED [ 33%]
tests/integration/test_domain_types_crud.py::TestDomainTypesIntegration::test_form_data_processing_domain_type PASSED [ 33%]
tests/integration/test_domain_types_form_integration.py::TestDomainTypesFormIntegration::test_form_submission_entry_level_domain_type PASSED [ 33%]
tests/integration/test_domain_types_form_integration.py::TestDomainTypesFormIntegration::test_form_submission_multiple_domain_types PASSED [ 33%]
tests/integration/test_domain_types_form_integration.py::TestDomainTypesFormIntegration::test_form_edit_entry_remove_domain_type PASSED [ 33%]
tests/integration/test_domain_types_form_integration.py::TestDomainTypesFormIntegration::test_form_edit_entry_add_domain_type PASSED [ 33%]
tests/integration/test_domain_types_form_integration.py::TestDomainTypesFormIntegration::test_form_validation_invalid_domain_type PASSED [ 33%]
tests/integration/test_domain_types_form_integration.py::TestDomainTypesFormIntegration::test_domain_type_view_display PASSED [ 34%]
tests/integration/test_domain_types_form_integration.py::TestDomainTypesFormIntegration::test_form_unicode_domain_types PASSED [ 34%]
tests/integration/test_domain_types_form_integration.py::TestDomainTypesFormIntegration::test_domain_type_form_field_visibility PASSED [ 34%]
tests/integration/test_domain_types_form_integration.py::TestDomainTypesFormIntegration::test_domain_type_roundtrip_compatibility PASSED [ 34%]
tests/integration/test_drop_database_integration.py::TestDropDatabaseIntegration::test_drop_database_content_success PASSED [ 34%]
tests/integration/test_drop_database_integration.py::TestDropDatabaseIntegration::test_drop_database_content_service_unavailable PASSED [ 34%]
tests/integration/test_drop_database_integration.py::TestDropDatabaseIntegration::test_drop_database_content_service_error PASSED [ 34%]
tests/integration/test_drop_database_integration.py::TestDropDatabaseIntegration::test_drop_database_content_method_get_not_allowed PASSED [ 34%]
tests/integration/test_dynamic_ranges.py::test_ranges_api_endpoint FAILED [ 34%]
tests/integration/test_dynamic_ranges.py::test_lexical_relation_range FAILED [ 34%]
tests/integration/test_dynamic_ranges.py::test_search_page_loads_without_hardcoded_pos PASSED [ 34%]
tests/integration/test_dynamic_ranges.py::test_entry_form_loads_without_hardcoded_pos PASSED [ 34%]
tests/integration/test_dynamic_ranges.py::test_query_builder_workset_functionality PASSED [ 34%]
tests/integration/test_dynamic_ranges.py::test_ranges_fallback_functionality PASSED [ 35%]
tests/integration/test_edit_nonexistent_entry_integration.py::TestEditNonexistentEntryIntegration::test_edit_nonexistent_entry_creates_it PASSED [ 35%]
tests/integration/test_edit_nonexistent_entry_integration.py::TestEditNonexistentEntryIntegration::test_edit_entry_with_nonexistent_relation_targets_preserves_refs PASSED [ 35%]
tests/integration/test_edit_nonexistent_entry_route.py::TestEditNonexistentEntryRoute::test_get_nonexistent_entry_shows_form PASSED [ 35%]
tests/integration/test_edit_nonexistent_entry_route.py::TestEditNonexistentEntryRoute::test_post_nonexistent_entry_creates_it PASSED [ 35%]
tests/integration/test_edit_nonexistent_entry_route.py::TestEditNonexistentEntryRoute::test_post_nonexistent_entry_with_json_data PASSED [ 35%]
tests/integration/test_edit_nonexistent_entry_route.py::TestEditNonexistentEntryRoute::test_multiple_relations_to_nonexistent_targets PASSED [ 35%]
tests/integration/test_enhanced_relations.py::test_relations_ui_contains_search_functionality PASSED [ 35%]
tests/integration/test_enhanced_relations.py::test_correct_search_endpoint_used PASSED [ 35%]
tests/integration/test_enhanced_relations_ui.py::test_relation_search_returns_entries_with_senses PASSED [ 35%]
tests/integration/test_enhanced_relations_ui.py::test_relation_ui_page_loads_with_enhanced_search PASSED [ 35%]
tests/integration/test_enhanced_relations_ui.py::test_entry_creation_with_sense_level_relations PASSED [ 35%]
tests/integration/test_enhanced_relations_ui.py::test_relation_form_submission_with_sense_target PASSED [ 35%]
tests/integration/test_enhanced_relations_ui.py::test_edit_entry_with_space_in_id_loads PASSED [ 35%]
tests/integration/test_enhanced_relations_ui.py::test_api_search_with_sense_filtering PASSED [ 36%]
tests/integration/test_enhanced_relations_ui.py::test_edit_page_handles_range_value_with_none_description PASSED [ 36%]
tests/integration/test_entries_api_postgresql_integration.py::test_entries_api_uses_basex_not_postgresql PASSED [ 36%]
tests/integration/test_entries_api_postgresql_integration.py::test_entries_api_basex_unavailable PASSED [ 36%]
tests/integration/test_entries_api_postgresql_integration.py::test_entries_api_architecture_compliance PASSED [ 36%]
tests/integration/test_entries_clear_cache.py::test_clear_entries_cache PASSED [ 36%]
tests/integration/test_entries_filtering_integration.py::TestEntriesFilteringIntegration::test_entries_api_supports_filter_parameter PASSED [ 36%]
tests/integration/test_entries_filtering_integration.py::TestEntriesFilteringIntegration::test_entries_api_supports_sort_order_parameter PASSED [ 36%]
tests/integration/test_entries_filtering_integration.py::TestEntriesFilteringIntegration::test_entries_api_supports_combined_filter_and_sort PASSED [ 36%]
tests/integration/test_entries_filtering_integration.py::TestEntriesFilteringIntegration::test_entries_api_maintains_backward_compatibility PASSED [ 36%]
tests/integration/test_entries_filtering_integration.py::TestEntriesFilteringIntegration::test_entries_api_cache_key_includes_filter_parameters PASSED [ 36%]
tests/integration/test_entry_editing_always_works.py::test_invalid_entry_editable PASSED [ 36%]
tests/integration/test_entry_form_layout.py::test_entry_form_layout_structure PASSED [ 36%]
tests/integration/test_entry_form_loads.py::TestEntryFormLoading::test_ranges_api_available FAILED [ 37%]
tests/integration/test_entry_form_loads.py::TestEntryFormLoading::test_entry_form_loads_successfully PASSED [ 37%]
tests/integration/test_entry_form_loads.py::TestEntryFormLoading::test_ranges_loader_javascript_present PASSED [ 37%]
tests/integration/test_entry_form_loads.py::TestEntryFormLoading::test_entry_form_has_lift_selects PASSED [ 37%]
tests/integration/test_entry_form_preview.py::TestEntryFormPreview::test_dictionary_preview_and_layout PASSED [ 37%]
tests/integration/test_entry_level_relations_crud.py::TestEntryLevelRelationsCRUD::test_variant_relations_round_trip PASSED [ 37%]
tests/integration/test_entry_level_relations_crud.py::TestEntryLevelRelationsCRUD::test_component_relations_round_trip PASSED [ 37%]
tests/integration/test_entry_level_relations_crud.py::TestEntryLevelRelationsCRUD::test_mixed_relations_round_trip PASSED [ 37%]
tests/integration/test_entry_level_relations_crud.py::TestFormDataProcessing::test_variant_relations_form_processing PASSED [ 37%]
tests/integration/test_entry_level_relations_crud.py::TestComplexFormComponentsCRUD::test_component_relations_xml_serialization PASSED [ 37%]
tests/integration/test_entry_level_relations_crud.py::TestComplexFormComponentsCRUD::test_components_form_processing PASSED [ 37%]
tests/integration/test_entry_level_relations_crud.py::TestDictionaryServiceIntegration::test_variant_relations_persistence PASSED [ 37%]
tests/integration/test_entry_level_relations_crud.py::TestComponentLoading::test_component_loading_into_form PASSED [ 37%]
tests/integration/test_entry_level_relations_crud.py::TestRelationFiltering::test_component_lexeme_relations_filtering PASSED [ 38%]
tests/integration/test_entry_level_relations_crud.py::TestRelationFiltering::test_component_relations_without_enrichment PASSED [ 38%]
tests/integration/test_entry_level_relations_crud.py::TestRelationFiltering::test_component_lexeme_without_traits PASSED [ 38%]
tests/integration/test_entry_level_relations_crud.py::TestEndToEndComponentFlow::test_component_add_and_save_flow PASSED [ 38%]
tests/integration/test_entry_level_relations_crud.py::TestCompleteRelationsRoundTrip::test_complete_relations_round_trip PASSED [ 38%]
tests/integration/test_entry_order_xml.py::TestOrderAttributeXML::test_parse_entry_with_order PASSED [ 38%]
tests/integration/test_entry_order_xml.py::TestOrderAttributeXML::test_parse_entry_without_order PASSED [ 38%]
tests/integration/test_entry_order_xml.py::TestOrderAttributeXML::test_generate_entry_with_order PASSED [ 38%]
tests/integration/test_entry_order_xml.py::TestDateDeletedAttributeXML::test_parse_entry_with_date_deleted PASSED [ 38%]
tests/integration/test_entry_order_xml.py::TestDateDeletedAttributeXML::test_generate_entry_with_date_deleted PASSED [ 38%]
tests/integration/test_entry_order_xml.py::TestAllDateAttributesXML::test_parse_entry_with_all_dates PASSED [ 38%]
tests/integration/test_entry_order_xml.py::TestAllDateAttributesXML::test_generate_entry_with_all_dates PASSED [ 38%]
tests/integration/test_entry_order_xml.py::TestOrderAndDatesRoundTrip::test_round_trip_with_order_and_dates PASSED [ 38%]
tests/integration/test_entry_order_xml.py::TestOrderAndDatesRoundTrip::test_round_trip_without_optional_attributes PASSED [ 39%]
tests/integration/test_entry_update.py::test_entry_update ERROR          [ 39%]
tests/integration/test_etymology_ui.py::TestEtymologyAPISupport::test_api_entry_creation_with_etymologies PASSED [ 39%]
tests/integration/test_etymology_ui.py::TestEtymologyAPISupport::test_api_entry_update_with_etymologies PASSED [ 39%]
tests/integration/test_etymology_ui.py::TestEtymologyRangesIntegration::test_etymology_types_from_ranges PASSED [ 39%]
tests/integration/test_etymology_ui.py::TestEtymologyLifecycle::test_add_etymology_to_existing_entry PASSED [ 39%]
tests/integration/test_etymology_ui.py::TestEtymologyLifecycle::test_remove_etymology_from_entry PASSED [ 39%]
tests/integration/test_etymology_ui.py::TestEtymologyLifecycle::test_modify_etymology_in_entry PASSED [ 39%]
tests/integration/test_etymology_xml.py::TestEtymologyCommentXML::test_parse_etymology_with_comment PASSED [ 39%]
tests/integration/test_etymology_xml.py::TestEtymologyCommentXML::test_generate_etymology_with_comment PASSED [ 39%]
tests/integration/test_etymology_xml.py::TestEtymologyCustomFieldsXML::test_parse_etymology_with_custom_fields PASSED [ 39%]
tests/integration/test_etymology_xml.py::TestEtymologyCustomFieldsXML::test_generate_etymology_with_custom_fields PASSED [ 39%]
tests/integration/test_etymology_xml.py::TestEtymologyBackwardCompatibility::test_parse_etymology_without_custom_fields PASSED [ 39%]
tests/integration/test_etymology_xml.py::TestEtymologyRoundTrip::test_round_trip_with_comment_and_custom_fields PASSED [ 40%]
tests/integration/test_example_xml.py::TestExampleSourceXML::test_parse_example_source PASSED [ 40%]
tests/integration/test_example_xml.py::TestExampleSourceXML::test_generate_example_source PASSED [ 40%]
tests/integration/test_example_xml.py::TestExampleNoteXML::test_parse_example_note PASSED [ 40%]
tests/integration/test_example_xml.py::TestExampleNoteXML::test_generate_example_note PASSED [ 40%]
tests/integration/test_example_xml.py::TestExampleCustomFieldsXML::test_parse_example_custom_fields PASSED [ 40%]
tests/integration/test_example_xml.py::TestExampleCustomFieldsXML::test_generate_example_custom_fields PASSED [ 40%]
tests/integration/test_example_xml.py::TestExampleBackwardCompatibility::test_parse_simple_example PASSED [ 40%]
tests/integration/test_example_xml.py::TestExampleRoundTrip::test_round_trip_all_enhancements PASSED [ 40%]
tests/integration/test_exporter_integration.py::TestExporterIntegration::test_kindle_exporter_real_data ERROR [ 40%]
tests/integration/test_exporter_integration.py::TestExporterIntegration::test_kindle_exporter_custom_options ERROR [ 40%]
tests/integration/test_exporter_integration.py::TestExporterIntegration::test_sqlite_exporter_real_data ERROR [ 40%]
tests/integration/test_exporter_integration.py::TestExporterIntegration::test_sqlite_exporter_schema_validation ERROR [ 40%]
tests/integration/test_exporter_integration.py::TestExporterIntegration::test_exporter_error_handling ERROR [ 40%]
tests/integration/test_exporter_integration.py::TestExporterIntegration::test_empty_database_export FAILED [ 41%]
tests/integration/test_fast_corpus_processing.py::TestFastCorpusProcessor::test_processor_initialization SKIPPED [ 41%]
tests/integration/test_fast_corpus_processing.py::TestFastCorpusProcessor::test_batch_processing_performance SKIPPED [ 41%]
tests/integration/test_fast_corpus_processing.py::TestFastCorpusProcessor::test_linguistic_caching SKIPPED [ 41%]
tests/integration/test_fast_corpus_processing.py::TestFastCorpusProcessor::test_memory_efficient_streaming SKIPPED [ 41%]
tests/integration/test_fast_corpus_processing.py::TestFastCorpusProcessor::test_parallel_processing SKIPPED [ 41%]
tests/integration/test_fast_corpus_processing.py::TestFastCorpusProcessor::test_spacy_optimization SKIPPED [ 41%]
tests/integration/test_fast_corpus_processing.py::TestFastCorpusProcessor::test_error_handling_resilience SKIPPED [ 41%]
tests/integration/test_fast_corpus_processing.py::TestFastCorpusProcessor::test_batch_size_optimization SKIPPED [ 41%]
tests/integration/test_fast_corpus_processing.py::TestFastCorpusProcessor::test_corpus_statistics_collection SKIPPED [ 41%]
tests/integration/test_fast_corpus_processing.py::TestFastCorpusProcessor::test_linguistic_feature_extraction SKIPPED [ 41%]
tests/integration/test_fast_corpus_processing.py::TestCorpusBatch::test_batch_creation SKIPPED [ 41%]
tests/integration/test_fast_corpus_processing.py::TestCorpusBatch::test_batch_serialization SKIPPED [ 41%]
tests/integration/test_fast_corpus_processing.py::TestPerformanceBenchmarks::test_large_corpus_benchmark SKIPPED [ 42%]
tests/integration/test_fieldworks_flag_behavior.py::test_fieldworks_flags_for_lift_provided_range PASSED [ 42%]
tests/integration/test_fieldworks_flag_behavior.py::test_fieldworks_flags_for_config_only_range PASSED [ 42%]
tests/integration/test_filtering_validation.py::test_filtering_and_refresh_integration PASSED [ 42%]
tests/integration/test_filtering_validation.py::test_namespace_handling_in_filtering PASSED [ 42%]
tests/integration/test_final_save_process.py::test_protestantism_save_process PASSED [ 42%]
tests/integration/test_flask_search_endpoint.py::TestFlaskSearchEndpoint::test_search_endpoint_with_results FAILED [ 42%]
tests/integration/test_flask_search_endpoint.py::TestFlaskSearchEndpoint::test_search_endpoint_empty_query PASSED [ 42%]
tests/integration/test_flask_search_endpoint.py::TestFlaskSearchEndpoint::test_search_endpoint_pagination FAILED [ 42%]
tests/integration/test_flask_search_endpoint.py::TestFlaskSearchEndpoint::test_direct_api_search FAILED [ 42%]
tests/integration/test_focused_coverage.py::TestDatabaseConnectorsCoverage::test_basex_connector_instantiation PASSED [ 42%]
tests/integration/test_focused_coverage.py::TestDatabaseConnectorsCoverage::test_mock_connector_coverage PASSED [ 42%]
tests/integration/test_focused_coverage.py::TestDatabaseConnectorsCoverage::test_connector_factory_coverage PASSED [ 42%]
tests/integration/test_focused_coverage.py::TestSearchIntegrationCoverage::test_xquery_builder_coverage PASSED [ 43%]
tests/integration/test_focused_coverage.py::TestSearchIntegrationCoverage::test_search_with_mock_data PASSED [ 43%]
tests/integration/test_focused_coverage.py::TestParserCoverage::test_lift_parser_basic_coverage PASSED [ 43%]
tests/integration/test_focused_coverage.py::TestParserCoverage::test_enhanced_lift_parser_coverage PASSED [ 43%]
tests/integration/test_focused_coverage.py::TestNamespaceManagerCoverage::test_lift_namespace_manager_coverage PASSED [ 43%]
tests/integration/test_focused_coverage.py::TestUtilitiesCoverage::test_exceptions_coverage PASSED [ 43%]
tests/integration/test_focused_coverage.py::TestUtilitiesCoverage::test_dictionary_service_edge_cases PASSED [ 43%]
tests/integration/test_form_field_persistence.py::TestFormFieldPersistence::test_sense_grammatical_info_persistence PASSED [ 43%]
tests/integration/test_form_field_persistence.py::TestFormFieldPersistence::test_entry_level_grammatical_info_persistence PASSED [ 43%]
tests/integration/test_form_field_persistence.py::TestFormFieldPersistence::test_usage_type_persistence PASSED [ 43%]
tests/integration/test_form_field_persistence.py::TestFormFieldPersistence::test_academic_domain_persistence PASSED [ 43%]
tests/integration/test_form_field_persistence.py::TestFormFieldPersistence::test_semantic_domain_persistence PASSED [ 43%]
tests/integration/test_form_field_persistence.py::TestFormFieldPersistence::test_etymology_persistence PASSED [ 43%]
tests/integration/test_form_field_persistence.py::TestFormFieldPersistence::test_pronunciation_persistence PASSED [ 44%]
tests/integration/test_form_field_persistence.py::TestFormFieldPersistence::test_variant_persistence PASSED [ 44%]
tests/integration/test_form_field_persistence.py::TestFormFieldPersistence::test_relation_persistence PASSED [ 44%]
tests/integration/test_form_serializer_integration.py::test_serializer_integration_with_flask PASSED [ 44%]
tests/integration/test_form_state_management_requirements.py::TestFormStateManagerRequirements::test_form_state_manager_initialization PASSED [ 44%]
tests/integration/test_form_state_management_requirements.py::TestFormStateManagerRequirements::test_json_path_binding_requirements PASSED [ 44%]
tests/integration/test_form_state_management_requirements.py::TestFormStateManagerRequirements::test_change_detection_requirements PASSED [ 44%]
tests/integration/test_form_state_management_requirements.py::TestFormStateManagerRequirements::test_form_serialization_requirements PASSED [ 44%]
tests/integration/test_form_state_management_requirements.py::TestClientValidationIntegration::test_validation_rule_loading PASSED [ 44%]
tests/integration/test_form_state_management_requirements.py::TestClientValidationIntegration::test_debounced_validation_requirements PASSED [ 44%]
tests/integration/test_form_state_management_requirements.py::TestClientValidationIntegration::test_validation_error_display_requirements PASSED [ 44%]
tests/integration/test_full_ranges_integration.py::test_grammatical_info_has_full_lift_ranges FAILED [ 44%]
tests/integration/test_full_ranges_integration.py::test_lexical_relation_types_available FAILED [ 44%]
tests/integration/test_full_ranges_integration.py::test_entry_form_loads_dynamic_ranges PASSED [ 45%]
tests/integration/test_full_ranges_integration.py::test_all_ranges_available FAILED [ 45%]
tests/integration/test_general_traits_integration.py::TestGeneralTraitsXMLParsing::test_parse_entry_with_morph_type_trait PASSED [ 45%]
tests/integration/test_general_traits_integration.py::TestGeneralTraitsXMLParsing::test_parse_entry_with_multiple_traits PASSED [ 45%]
tests/integration/test_general_traits_integration.py::TestGeneralTraitsXMLParsing::test_parse_sense_with_general_traits PASSED [ 45%]
tests/integration/test_general_traits_integration.py::TestGeneralTraitsXMLParsing::test_parse_sense_with_domain_and_usage_traits PASSED [ 45%]
tests/integration/test_general_traits_integration.py::TestGeneralTraitsXMLGeneration::test_generate_entry_with_traits PASSED [ 45%]
tests/integration/test_general_traits_integration.py::TestGeneralTraitsXMLGeneration::test_generate_sense_with_general_traits PASSED [ 45%]
tests/integration/test_general_traits_integration.py::TestGeneralTraitsXMLGeneration::test_roundtrip_preserves_all_trait_types PASSED [ 45%]
tests/integration/test_grammatical_category_integration.py::TestGrammaticalCategoryIntegration::test_protestant_scenario_integration PASSED [ 45%]
tests/integration/test_grammatical_category_integration.py::TestGrammaticalCategoryIntegration::test_multiple_senses_partial_form_data PASSED [ 45%]
tests/integration/test_grammatical_info_e2e.py::TestGrammaticalInfoEndToEnd::test_sense_level_grammatical_info_roundtrip PASSED [ 45%]
tests/integration/test_grammatical_info_e2e.py::TestGrammaticalInfoEndToEnd::test_entry_level_grammatical_info_roundtrip PASSED [ 45%]
tests/integration/test_grammatical_info_e2e.py::TestGrammaticalInfoEndToEnd::test_multiple_senses_with_different_pos PASSED [ 45%]
tests/integration/test_grammatical_info_e2e.py::TestGrammaticalInfoEndToEnd::test_update_grammatical_info PASSED [ 46%]
tests/integration/test_grammatical_traits_integration.py::TestGrammaticalTraitsXMLParsing::test_parse_sense_with_grammatical_traits PASSED [ 46%]
tests/integration/test_grammatical_traits_integration.py::TestGrammaticalTraitsXMLParsing::test_parse_sense_with_multiple_traits PASSED [ 46%]
tests/integration/test_grammatical_traits_integration.py::TestGrammaticalTraitsXMLParsing::test_parse_sense_without_traits PASSED [ 46%]
tests/integration/test_grammatical_traits_integration.py::TestGrammaticalTraitsXMLParsing::test_parse_variant_with_grammatical_traits PASSED [ 46%]
tests/integration/test_grammatical_traits_integration.py::TestGrammaticalTraitsXMLParsing::test_parse_custom_traits PASSED [ 46%]
tests/integration/test_grammatical_traits_integration.py::TestGrammaticalTraitsXMLGeneration::test_generate_sense_with_traits PASSED [ 46%]
tests/integration/test_grammatical_traits_integration.py::TestGrammaticalTraitsXMLGeneration::test_generate_sense_without_traits PASSED [ 46%]
tests/integration/test_grammatical_traits_integration.py::TestGrammaticalTraitsXMLGeneration::test_generate_variant_with_traits PASSED [ 46%]
tests/integration/test_grammatical_traits_integration.py::TestGrammaticalTraitsXMLGeneration::test_roundtrip_preserves_traits PASSED [ 46%]
tests/integration/test_high_impact_coverage.py::TestHighImpactCoverage::test_base_model_comprehensive PASSED [ 46%]
tests/integration/test_high_impact_coverage.py::TestHighImpactCoverage::test_entry_model_comprehensive PASSED [ 46%]
tests/integration/test_high_impact_coverage.py::TestHighImpactCoverage::test_sense_model_comprehensive PASSED [ 46%]
tests/integration/test_high_impact_coverage.py::TestHighImpactCoverage::test_example_model_comprehensive PASSED [ 47%]
tests/integration/test_high_impact_coverage.py::TestHighImpactCoverage::test_pronunciation_model_comprehensive PASSED [ 47%]
tests/integration/test_high_impact_coverage.py::TestHighImpactCoverage::test_xquery_builder_comprehensive PASSED [ 47%]
tests/integration/test_high_impact_coverage.py::TestHighImpactCoverage::test_namespace_manager_comprehensive PASSED [ 47%]
tests/integration/test_high_impact_coverage.py::TestHighImpactCoverage::test_lift_parser_comprehensive PASSED [ 47%]
tests/integration/test_high_impact_coverage.py::TestHighImpactCoverage::test_enhanced_lift_parser_coverage PASSED [ 47%]
tests/integration/test_high_impact_coverage.py::TestHighImpactCoverage::test_connectors_comprehensive PASSED [ 47%]
tests/integration/test_high_impact_coverage.py::TestHighImpactCoverage::test_exception_variations PASSED [ 47%]
tests/integration/test_homograph_numbers.py::TestHomographNumberModel::test_entry_creation_with_homograph_number PASSED [ 47%]
tests/integration/test_homograph_numbers.py::TestHomographNumberModel::test_entry_creation_without_homograph_number PASSED [ 47%]
tests/integration/test_homograph_numbers.py::TestHomographNumberModel::test_entry_homograph_number_type_validation PASSED [ 47%]
tests/integration/test_homograph_numbers.py::TestHomographNumberLIFTParsing::test_parse_entry_with_homograph_number PASSED [ 47%]
tests/integration/test_homograph_numbers.py::TestHomographNumberLIFTParsing::test_parse_entry_with_homograph_number_2 PASSED [ 47%]
tests/integration/test_homograph_numbers.py::TestHomographNumberLIFTParsing::test_parse_entry_without_homograph_number PASSED [ 48%]
tests/integration/test_homograph_numbers.py::TestHomographNumberLIFTParsing::test_parse_entry_with_invalid_homograph_number PASSED [ 48%]
tests/integration/test_homograph_numbers.py::TestHomographNumberLIFTGeneration::test_generate_lift_with_homograph_number PASSED [ 48%]
tests/integration/test_homograph_numbers.py::TestHomographNumberLIFTGeneration::test_generate_lift_with_homograph_number_2 PASSED [ 48%]
tests/integration/test_homograph_numbers.py::TestHomographNumberLIFTGeneration::test_generate_lift_without_homograph_number PASSED [ 48%]
tests/integration/test_homograph_numbers.py::TestHomographNumberLIFTGeneration::test_generate_lift_multiple_entries_with_homograph_numbers PASSED [ 48%]
tests/integration/test_homograph_numbers.py::TestHomographNumberUIIntegration::test_entry_list_displays_homograph_number PASSED [ 48%]
tests/integration/test_homograph_numbers.py::TestHomographNumberUIIntegration::test_entry_form_displays_homograph_number PASSED [ 48%]
tests/integration/test_homograph_numbers.py::TestHomographNumberUIIntegration::test_entry_title_displays_homograph_number PASSED [ 48%]
tests/integration/test_homograph_numbers.py::TestHomographNumberUIIntegration::test_homograph_number_1_displays_in_ui PASSED [ 48%]
tests/integration/test_homograph_numbers.py::TestHomographNumberUIIntegration::test_consistent_homograph_spacing_across_templates PASSED [ 48%]
tests/integration/test_homograph_numbers.py::TestHomographNumberRoundTrip::test_homograph_number_round_trip PASSED [ 48%]
tests/integration/test_homograph_numbers.py::TestHomographNumberRoundTrip::test_multiple_homographs_round_trip PASSED [ 48%]
tests/integration/test_illustration_media_integration.py::test_image_upload_and_delete PASSED [ 49%]
tests/integration/test_illustrations_integration.py::TestIllustrationsXMLParsing::test_parse_single_illustration_with_label PASSED [ 49%]
tests/integration/test_illustrations_integration.py::TestIllustrationsXMLParsing::test_parse_multiple_illustrations PASSED [ 49%]
tests/integration/test_illustrations_integration.py::TestIllustrationsXMLParsing::test_parse_illustration_without_label PASSED [ 49%]
tests/integration/test_illustrations_integration.py::TestIllustrationsXMLParsing::test_parse_illustration_with_url PASSED [ 49%]
tests/integration/test_illustrations_integration.py::TestIllustrationsXMLGeneration::test_generate_single_illustration_with_label PASSED [ 49%]
tests/integration/test_illustrations_integration.py::TestIllustrationsXMLGeneration::test_generate_multiple_illustrations PASSED [ 49%]
tests/integration/test_illustrations_integration.py::TestIllustrationsXMLGeneration::test_generate_illustration_without_label PASSED [ 49%]
tests/integration/test_illustrations_integration.py::TestIllustrationsXMLGeneration::test_round_trip_preservation PASSED [ 49%]
tests/integration/test_invalid_entry_editability.py::TestInvalidEntryEditability::test_get_entry_for_editing_bypasses_validation PASSED [ 49%]
tests/integration/test_invalid_entry_editability.py::TestInvalidEntryEditability::test_view_entry_route_uses_non_validating_method PASSED [ 49%]
tests/integration/test_invalid_entry_editability.py::TestInvalidEntryEditability::test_edit_entry_route_uses_non_validating_method PASSED [ 49%]
tests/integration/test_invalid_entry_editability.py::TestInvalidEntryEditability::test_search_includes_invalid_entries PASSED [ 49%]
tests/integration/test_invalid_entry_editability.py::TestInvalidEntryEditability::test_validation_errors_shown_as_guidance_not_blockers PASSED [ 50%]
tests/integration/test_invalid_entry_editing.py::TestInvalidEntryEditing::test_get_entry_for_editing_bypasses_validation PASSED [ 50%]
tests/integration/test_invalid_entry_editing.py::TestInvalidEntryEditing::test_get_entry_for_editing_vs_regular_get_entry PASSED [ 50%]
tests/integration/test_invalid_entry_editing.py::TestInvalidEntryEditing::test_validation_shown_as_guidance_not_blocker PASSED [ 50%]
tests/integration/test_invalid_entry_editing.py::TestInvalidEntryEditing::test_edit_entry_view_uses_non_validating_method PASSED [ 50%]
tests/integration/test_invalid_entry_editing.py::TestInvalidEntryEditing::test_post_entry_update_uses_non_validating_method PASSED [ 50%]
tests/integration/test_invalid_entry_editing.py::TestInvalidEntryEditing::test_entry_not_found_still_raises_error PASSED [ 50%]
tests/integration/test_invalid_entry_editing.py::TestInvalidEntryEditing::test_real_scholastic_assessment_entry_editable SKIPPED [ 50%]
tests/integration/test_language_constraints.py::test_language_constraints PASSED [ 50%]
tests/integration/test_lift_entry_dates_integration.py::test_lift_parser_extracts_entry_dates_from_sample_file PASSED [ 50%]
tests/integration/test_lift_ranges_comprehensive.py::TestLIFTRangesParserComprehensive::test_parse_sample_ranges_file_all_types PASSED [ 50%]
tests/integration/test_lift_ranges_comprehensive.py::TestLIFTRangesParserComprehensive::test_parse_range_with_hierarchical_structure PASSED [ 50%]
tests/integration/test_lift_ranges_comprehensive.py::TestLIFTRangesParserComprehensive::test_parse_range_with_guid_support PASSED [ 50%]
tests/integration/test_lift_ranges_comprehensive.py::TestLIFTRangesParserComprehensive::test_parse_range_with_multilingual_labels PASSED [ 50%]
tests/integration/test_lift_ranges_comprehensive.py::TestLIFTRangesParserComprehensive::test_parse_range_with_abbreviations PASSED [ 51%]
tests/integration/test_lift_ranges_comprehensive.py::TestLIFTRangesParserComprehensive::test_parse_semantic_domain_large_hierarchy PASSED [ 51%]
tests/integration/test_lift_ranges_comprehensive.py::TestLIFTRangesParserComprehensive::test_parse_simple_ranges PASSED [ 51%]
tests/integration/test_lift_ranges_comprehensive.py::TestLIFTRangesParserComprehensive::test_parse_range_with_traits PASSED [ 51%]
tests/integration/test_lift_ranges_comprehensive.py::TestLIFTRangesParserComprehensive::test_parse_range_with_parent_attribute PASSED [ 51%]
tests/integration/test_lift_ranges_comprehensive.py::TestLIFTRangesParserComprehensive::test_parse_range_error_handling PASSED [ 51%]
tests/integration/test_lift_ranges_comprehensive.py::TestLIFTRangesParserComprehensive::test_parse_range_namespace_handling PASSED [ 51%]
tests/integration/test_lift_ranges_comprehensive.py::TestLIFTRangesParserComprehensive::test_parse_range_performance_large_file PASSED [ 51%]
tests/integration/test_lift_ranges_e2e_integration.py::TestLIFTRangesEndToEndIntegration::test_complete_lift_ranges_pipeline PASSED [ 51%]
tests/integration/test_lift_ranges_e2e_integration.py::TestLIFTRangesEndToEndIntegration::test_hierarchical_ranges_structure SKIPPED [ 51%]
tests/integration/test_lift_ranges_e2e_integration.py::TestLIFTRangesEndToEndIntegration::test_multilingual_range_support PASSED [ 51%]
tests/integration/test_lift_ranges_e2e_integration.py::TestLIFTRangesEndToEndIntegration::test_range_performance_with_large_dataset PASSED [ 51%]
tests/integration/test_lift_ranges_e2e_integration.py::TestLIFTRangesEndToEndIntegration::test_ui_integration_compatibility PASSED [ 51%]
tests/integration/test_lift_ranges_integration.py::test_entry_form_loads_lift_ranges FAILED [ 52%]
tests/integration/test_lift_ranges_integration.py::test_pronunciation_display_with_seh_fonipa PASSED [ 52%]
tests/integration/test_lift_ranges_integration.py::test_variant_forms_ui_with_ranges PASSED [ 52%]
tests/integration/test_lift_ranges_integration.py::test_relations_ui_with_ranges PASSED [ 52%]
tests/integration/test_lift_ranges_integration.py::test_usages_and_academic_domains_visible PASSED [ 52%]
tests/integration/test_lift_ranges_integration.py::test_all_lift_ranges_available_via_api FAILED [ 52%]
tests/integration/test_lift_ranges_integration.py::test_lift_ranges_api_performance PASSED [ 52%]
tests/integration/test_lift_ranges_integration.py::test_lift_ranges_entry_form_integration PASSED [ 52%]
tests/integration/test_lift_ranges_integration.py::test_lift_ranges_dynamic_loading_verification PASSED [ 52%]
tests/integration/test_lift_ranges_parser_comprehensive.py::TestLIFTRangesParserComprehensive::test_parser_parses_all_range_types PASSED [ 52%]
tests/integration/test_lift_ranges_parser_comprehensive.py::TestLIFTRangesParserComprehensive::test_parser_handles_simple_ranges PASSED [ 52%]
tests/integration/test_lift_ranges_parser_comprehensive.py::TestLIFTRangesParserComprehensive::test_parser_handles_hierarchical_ranges PASSED [ 52%]
tests/integration/test_lift_ranges_parser_comprehensive.py::TestLIFTRangesParserComprehensive::test_parser_handles_multilingual_content PASSED [ 52%]
tests/integration/test_lift_ranges_parser_comprehensive.py::TestLIFTRangesParserComprehensive::test_parser_handles_deep_hierarchy PASSED [ 53%]
tests/integration/test_lift_ranges_parser_comprehensive.py::TestLIFTRangesParserComprehensive::test_parser_handles_guid_and_traits PASSED [ 53%]
tests/integration/test_lift_ranges_parser_comprehensive.py::TestLIFTRangesParserComprehensive::test_parser_with_real_sample_file PASSED [ 53%]
tests/integration/test_lift_ranges_parser_comprehensive.py::TestLIFTRangesParserComprehensive::test_parser_error_handling PASSED [ 53%]
tests/integration/test_lift_ranges_parser_comprehensive.py::TestLIFTRangesParserComprehensive::test_parser_empty_ranges PASSED [ 53%]
tests/integration/test_lift_ranges_parser_comprehensive.py::TestLIFTRangesParserComprehensive::test_parser_namespace_handling PASSED [ 53%]
tests/integration/test_lift_ranges_parser_comprehensive.py::TestLIFTRangesParserComprehensive::test_parser_does_not_fallback_label_to_description PASSED [ 53%]
tests/integration/test_lift_ranges_sample_file.py::test_lift_ranges_with_sample_file PASSED [ 53%]
tests/integration/test_lift_ranges_sample_file.py::test_lift_ranges_parser_with_sample_file PASSED [ 53%]
tests/integration/test_lift_ranges_sample_file.py::test_lift_ranges_service_fallback PASSED [ 53%]
tests/integration/test_lift_registry_api.py::TestLIFTRegistryAPI::test_get_all_elements PASSED [ 53%]
tests/integration/test_lift_registry_api.py::TestLIFTRegistryAPI::test_get_element_by_name PASSED [ 53%]
tests/integration/test_lift_registry_api.py::TestLIFTRegistryAPI::test_get_nonexistent_element PASSED [ 53%]
tests/integration/test_lift_registry_api.py::TestLIFTRegistryAPI::test_get_displayable_elements PASSED [ 54%]
tests/integration/test_lift_registry_api.py::TestLIFTRegistryAPI::test_get_elements_by_category PASSED [ 54%]
tests/integration/test_lift_registry_api.py::TestLIFTRegistryAPI::test_get_elements_invalid_category PASSED [ 54%]
tests/integration/test_lift_registry_api.py::TestLIFTRegistryAPI::test_get_categories PASSED [ 54%]
tests/integration/test_lift_registry_api.py::TestLIFTRegistryAPI::test_get_visibility_options PASSED [ 54%]
tests/integration/test_lift_registry_api.py::TestLIFTRegistryAPI::test_get_hierarchy PASSED [ 54%]
tests/integration/test_lift_registry_api.py::TestLIFTRegistryAPI::test_get_metadata PASSED [ 54%]
tests/integration/test_lift_registry_api.py::TestLIFTRegistryAPI::test_get_default_profile PASSED [ 54%]
tests/integration/test_lift_registry_api.py::TestLIFTRegistryAPI::test_api_returns_json_content_type PASSED [ 54%]
tests/integration/test_live_search_functionality.py::TestLiveSearchFunctionality::test_basic_search ERROR [ 54%]
tests/integration/test_live_search_functionality.py::TestLiveSearchFunctionality::test_count_entries ERROR [ 54%]
tests/integration/test_live_search_functionality.py::TestLiveSearchFunctionality::test_search_edge_cases ERROR [ 54%]
tests/integration/test_live_search_functionality.py::TestLiveSearchFunctionality::test_search_pagination ERROR [ 54%]
tests/integration/test_live_search_functionality.py::TestLiveSearchFunctionality::test_search_special_characters ERROR [ 55%]
tests/integration/test_live_search_functionality.py::TestLiveSearchFunctionality::test_search_with_fields ERROR [ 55%]
tests/integration/test_merge_split_api.py::test_get_operations_empty PASSED [ 55%]
tests/integration/test_merge_split_api.py::test_get_operation_not_found PASSED [ 55%]
tests/integration/test_merge_split_api.py::test_split_entry_api PASSED   [ 55%]
tests/integration/test_merge_split_api.py::test_split_entry_validation_error PASSED [ 55%]
tests/integration/test_merge_split_api.py::test_split_entry_not_found PASSED [ 55%]
tests/integration/test_merge_split_api.py::test_merge_entries_api PASSED [ 55%]
tests/integration/test_merge_split_api.py::test_merge_entries_missing_source_id PASSED [ 55%]
tests/integration/test_merge_split_api.py::test_merge_senses_api PASSED  [ 55%]
tests/integration/test_merge_split_api.py::test_get_transfers_empty PASSED [ 55%]
tests/integration/test_merge_split_api.py::test_get_transfers_by_sense PASSED [ 55%]
tests/integration/test_merge_split_api.py::test_get_transfers_by_entry PASSED [ 55%]
tests/integration/test_merge_split_api.py::test_get_operation_status PASSED [ 55%]
tests/integration/test_merge_split_api.py::test_get_operation_status_not_found PASSED [ 56%]
tests/integration/test_merge_split_api.py::test_merge_entries_with_conflict_resolution PASSED [ 56%]
tests/integration/test_merge_split_api.py::test_merge_senses_with_strategy PASSED [ 56%]
tests/integration/test_migration_real_integration.py::TestCorpusMigration::test_schema_creation PASSED [ 56%]
tests/integration/test_migration_real_integration.py::TestCorpusMigration::test_csv_export_import_workflow PASSED [ 56%]
tests/integration/test_migration_real_integration.py::TestCorpusMigration::test_complete_migration_workflow PASSED [ 56%]
tests/integration/test_migration_real_integration.py::TestCorpusMigration::test_migration_with_edge_cases PASSED [ 56%]
tests/integration/test_migration_real_integration.py::TestCorpusMigration::test_deduplication PASSED [ 56%]
tests/integration/test_migration_real_integration.py::TestCorpusMigration::test_migration_performance PASSED [ 56%]
tests/integration/test_migration_real_integration.py::TestCorpusMigration::test_corpus_stats PASSED [ 56%]
tests/integration/test_migration_real_integration.py::TestCorpusMigration::test_migration_error_handling PASSED [ 56%]
tests/integration/test_model_integration.py::test_entry_validation_integration PASSED [ 56%]
tests/integration/test_model_integration.py::test_sense_validation_integration PASSED [ 56%]
tests/integration/test_model_integration.py::test_centralized_validation_consistency PASSED [ 57%]
tests/integration/test_morph_type_inheritance.py::TestMorphTypeInheritance::test_existing_morph_type_not_overridden PASSED [ 57%]
tests/integration/test_morph_type_inheritance.py::TestMorphTypeInheritance::test_empty_morph_type_gets_auto_classified PASSED [ 57%]
tests/integration/test_morph_type_inheritance.py::TestMorphTypeInheritance::test_morph_type_patterns PASSED [ 57%]
tests/integration/test_morph_type_inheritance.py::TestMorphTypeInheritance::test_lift_data_preservation PASSED [ 57%]
tests/integration/test_morph_type_inheritance.py::TestMorphTypeInheritance::test_flask_app_morph_type_handling PASSED [ 57%]
tests/integration/test_morph_type_inheritance_fixed.py::TestMorphTypeInheritance::test_existing_morph_type_not_overridden PASSED [ 57%]
tests/integration/test_morph_type_inheritance_fixed.py::TestMorphTypeInheritance::test_empty_morph_type_gets_auto_classified PASSED [ 57%]
tests/integration/test_morph_type_inheritance_fixed.py::TestMorphTypeInheritance::test_morph_type_patterns PASSED [ 57%]
tests/integration/test_morph_type_inheritance_fixed.py::TestMorphTypeInheritance::test_lift_data_preservation PASSED [ 57%]
tests/integration/test_morph_type_inheritance_fixed.py::TestMorphTypeInheritance::test_flask_app_morph_type_handling PASSED [ 57%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_new_entry_form_shows_empty_morph_type PASSED [ 57%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_existing_entry_form_shows_backend_morph_type PASSED [ 57%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_create_entry_api_auto_classifies_morph_type PASSED [ 58%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_create_entry_api_preserves_explicit_morph_type PASSED [ 58%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_entry_model_auto_classification_logic PASSED [ 58%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_lift_parser_preserves_entry_morph_type PASSED [ 58%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_javascript_morph_type_removal PASSED [ 58%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_template_morph_type_data_selected PASSED [ 58%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_api_json_response_includes_morph_type PASSED [ 58%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_server_side_classification_accuracy[headword0-stem] PASSED [ 58%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_server_side_classification_accuracy[headword1-phrase] PASSED [ 58%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_server_side_classification_accuracy[headword2-prefix] PASSED [ 58%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_server_side_classification_accuracy[headword3-suffix] PASSED [ 58%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_server_side_classification_accuracy[headword4-infix] PASSED [ 58%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_server_side_classification_accuracy[headword5-stem] PASSED [ 58%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_no_override_of_lift_data PASSED [ 59%]
tests/integration/test_morph_type_integration.py::TestMorphTypeIntegration::test_end_to_end_morph_type_workflow PASSED [ 59%]
tests/integration/test_morph_type_lift.py::test_lift_morph_type_parsing PASSED [ 59%]
tests/integration/test_morph_type_manual.py::test_morph_type_behavior PASSED [ 59%]
tests/integration/test_morph_type_server_side.py::TestMorphTypeServerSide::test_existing_morph_type_preserved PASSED [ 59%]
tests/integration/test_morph_type_server_side.py::TestMorphTypeServerSide::test_auto_classify_phrase PASSED [ 59%]
tests/integration/test_morph_type_server_side.py::TestMorphTypeServerSide::test_auto_classify_prefix PASSED [ 59%]
tests/integration/test_morph_type_server_side.py::TestMorphTypeServerSide::test_auto_classify_suffix PASSED [ 59%]
tests/integration/test_morph_type_server_side.py::TestMorphTypeServerSide::test_auto_classify_infix PASSED [ 59%]
tests/integration/test_morph_type_server_side.py::TestMorphTypeServerSide::test_auto_classify_default_stem PASSED [ 59%]
tests/integration/test_multilingual_editing.py::TestMultilingualFieldEditing::test_multilingual_note_parsing_from_lift PASSED [ 59%]
tests/integration/test_multilingual_editing.py::TestMultilingualFieldEditing::test_multilingual_note_serialization_to_dict PASSED [ 59%]
tests/integration/test_multilingual_editing.py::TestMultilingualFieldEditing::test_multilingual_sense_note_parsing PASSED [ 59%]
tests/integration/test_multilingual_editing.py::TestMultilingualFieldEditing::test_multilingual_note_form_rendering_in_ui PASSED [ 60%]
tests/integration/test_multilingual_editing.py::TestMultilingualFieldEditing::test_multilingual_note_form_submission_processing PASSED [ 60%]
tests/integration/test_multilingual_editing.py::TestMultilingualFieldEditing::test_multilingual_custom_field_support PASSED [ 60%]
tests/integration/test_multilingual_editing.py::TestMultilingualFieldEditing::test_form_shows_non_project_language PASSED [ 60%]
tests/integration/test_multilingual_entry_integration.py::TestMultilingualEntryIntegration::test_entry_creation_with_multilingual_notes PASSED [ 60%]
tests/integration/test_multilingual_entry_integration.py::TestMultilingualEntryIntegration::test_entry_update_with_multilingual_notes PASSED [ 60%]
tests/integration/test_multilingual_entry_integration.py::TestMultilingualEntryIntegration::test_entry_roundtrip_to_dict_from_dict PASSED [ 60%]
tests/integration/test_multilingual_entry_integration.py::TestMultilingualEntryIntegration::test_entry_mixed_notes_legacy_and_multilingual PASSED [ 60%]
tests/integration/test_multilingual_entry_integration.py::TestMultilingualEntryIntegration::test_entry_with_empty_multilingual_notes PASSED [ 60%]
tests/integration/test_multilingual_entry_integration.py::TestMultilingualEntryIntegration::test_entry_json_serialization_with_multilingual_notes PASSED [ 60%]
tests/integration/test_multilingual_notes_form_processing.py::TestMultilingualNotesFormProcessing::test_process_multilingual_notes_form_data PASSED [ 60%]
tests/integration/test_multilingual_notes_form_processing.py::TestMultilingualNotesFormProcessing::test_entry_creation_with_multilingual_notes PASSED [ 60%]
tests/integration/test_multilingual_notes_form_processing.py::TestMultilingualNotesFormProcessing::test_entry_serialization_with_multilingual_notes PASSED [ 60%]
tests/integration/test_multilingual_notes_form_processing.py::TestMultilingualNotesFormProcessing::test_backward_compatibility_with_simple_notes PASSED [ 60%]
tests/integration/test_multilingual_notes_form_processing.py::TestMultilingualNotesFormProcessing::test_process_multilingual_field_form_data PASSED [ 61%]
tests/integration/test_multilingual_notes_form_processing.py::TestMultilingualNotesFormProcessing::test_process_multilingual_field_form_data_empty_field PASSED [ 61%]
tests/integration/test_multilingual_notes_form_processing.py::TestMultilingualNotesFormProcessing::test_merge_form_data_with_multilingual_lexical_unit PASSED [ 61%]
tests/integration/test_multilingual_notes_search.py::TestMultilingualNotesSearch::test_search_multilingual_notes_unit PASSED [ 61%]
tests/integration/test_multilingual_notes_search.py::TestMultilingualNotesSearch::test_search_legacy_notes_unit PASSED [ 61%]
tests/integration/test_multilingual_notes_search.py::TestMultilingualNotesSearch::test_search_mixed_notes_unit PASSED [ 61%]
tests/integration/test_multilingual_notes_search.py::TestMultilingualNotesSearch::test_notes_serialization_for_search PASSED [ 61%]
tests/integration/test_multilingual_notes_search.py::TestMultilingualNotesSearch::test_get_searchable_note_content PASSED [ 61%]
tests/integration/test_multilingual_notes_search.py::TestMultilingualNotesSearch::test_search_with_notes_field_integration PASSED [ 61%]
tests/integration/test_multiple_trait_serialization.py::TestMultipleTraitSerialization::test_multiple_usage_types_create_separate_traits PASSED [ 61%]
tests/integration/test_multiple_trait_serialization.py::TestMultipleTraitSerialization::test_multiple_domain_types_create_separate_traits PASSED [ 61%]
tests/integration/test_multiple_trait_serialization.py::TestMultipleTraitSerialization::test_combined_multiple_usage_and_domain_types PASSED [ 61%]
tests/integration/test_multiple_trait_serialization.py::TestMultipleTraitSerialization::test_single_usage_type_still_works PASSED [ 61%]
tests/integration/test_namespace_handling.py::TestLIFTNamespaceManager::test_detect_namespaces_with_lift_namespace PASSED [ 62%]
tests/integration/test_namespace_handling.py::TestLIFTNamespaceManager::test_detect_namespaces_without_namespace PASSED [ 62%]
tests/integration/test_namespace_handling.py::TestLIFTNamespaceManager::test_normalize_add_namespace PASSED [ 62%]
tests/integration/test_namespace_handling.py::TestLIFTNamespaceManager::test_normalize_remove_namespace PASSED [ 62%]
tests/integration/test_namespace_handling.py::TestLIFTNamespaceManager::test_xpath_with_namespace PASSED [ 62%]
tests/integration/test_namespace_handling.py::TestLIFTNamespaceManager::test_xpath_without_namespace PASSED [ 62%]
tests/integration/test_namespace_handling.py::TestXPathBuilder::test_entry_xpath_with_namespace PASSED [ 62%]
tests/integration/test_namespace_handling.py::TestXPathBuilder::test_entry_xpath_without_namespace PASSED [ 62%]
tests/integration/test_namespace_handling.py::TestXPathBuilder::test_sense_xpath PASSED [ 62%]
tests/integration/test_namespace_handling.py::TestXPathBuilder::test_lexical_unit_xpath PASSED [ 62%]
tests/integration/test_namespace_handling.py::TestXQueryBuilder::test_namespace_prologue PASSED [ 62%]
tests/integration/test_namespace_handling.py::TestXQueryBuilder::test_entry_by_id_query_with_namespace PASSED [ 62%]
tests/integration/test_namespace_handling.py::TestXQueryBuilder::test_entry_by_id_query_without_namespace PASSED [ 62%]
tests/integration/test_namespace_handling.py::TestXQueryBuilder::test_search_query_with_pagination PASSED [ 63%]
tests/integration/test_namespace_handling.py::TestXQueryBuilder::test_count_entries_query PASSED [ 63%]
tests/integration/test_namespace_handling.py::TestXQueryBuilder::test_insert_entry_query PASSED [ 63%]
tests/integration/test_namespace_handling.py::TestXQueryBuilder::test_update_entry_query PASSED [ 63%]
tests/integration/test_namespace_handling.py::TestXQueryBuilder::test_delete_entry_query PASSED [ 63%]
tests/integration/test_namespace_handling.py::TestXQueryBuilder::test_statistics_query PASSED [ 63%]
tests/integration/test_namespace_handling.py::TestXQueryBuilder::test_advanced_search_query PASSED [ 63%]
tests/integration/test_namespace_handling.py::TestXQueryBuilder::test_escape_xquery_string PASSED [ 63%]
tests/integration/test_namespace_handling.py::TestNamespaceIntegration::test_round_trip_namespace_handling PASSED [ 63%]
tests/integration/test_namespace_handling.py::TestNamespaceIntegration::test_xpath_and_xquery_consistency PASSED [ 63%]
tests/integration/test_navigation_performance.py::TestMainNavigation::test_corpus_management_navigation_exists PASSED [ 63%]
tests/integration/test_navigation_performance.py::TestMainNavigation::test_corpus_management_page_loads PASSED [ 63%]
tests/integration/test_navigation_performance.py::TestPerformanceOptimization::test_entries_page_performance PASSED [ 63%]
tests/integration/test_navigation_performance.py::TestPerformanceOptimization::test_entries_with_caching_mock PASSED [ 64%]
tests/integration/test_parser_comprehensive.py::TestLIFTParserComprehensive::test_lift_parser_instantiation PASSED [ 64%]
tests/integration/test_parser_comprehensive.py::TestLIFTParserComprehensive::test_lift_parser_basic_parsing PASSED [ 64%]
tests/integration/test_parser_comprehensive.py::TestLIFTParserComprehensive::test_lift_parser_complex_structure PASSED [ 64%]
tests/integration/test_parser_comprehensive.py::TestLIFTParserComprehensive::test_lift_parser_empty_file PASSED [ 64%]
tests/integration/test_parser_comprehensive.py::TestLIFTParserComprehensive::test_lift_parser_malformed_xml PASSED [ 64%]
tests/integration/test_parser_comprehensive.py::TestLIFTParserComprehensive::test_lift_parser_special_characters PASSED [ 64%]
tests/integration/test_parser_comprehensive.py::TestLIFTParserComprehensive::test_lift_parser_memory_efficiency PASSED [ 64%]
tests/integration/test_parser_comprehensive.py::TestEnhancedLiftParserComprehensive::test_enhanced_lift_parser_instantiation PASSED [ 64%]
tests/integration/test_parser_comprehensive.py::TestEnhancedLiftParserComprehensive::test_enhanced_parser_vs_basic_parser PASSED [ 64%]
tests/integration/test_parser_comprehensive.py::TestEnhancedLiftParserComprehensive::test_enhanced_parser_advanced_features PASSED [ 64%]
tests/integration/test_parser_comprehensive.py::TestParserErrorHandling::test_parser_file_not_found PASSED [ 64%]
tests/integration/test_parser_comprehensive.py::TestParserErrorHandling::test_parser_permission_denied PASSED [ 64%]
tests/integration/test_parser_comprehensive.py::TestParserErrorHandling::test_parser_encoding_issues PASSED [ 65%]
tests/integration/test_parser_comprehensive.py::TestParserIntegration::test_parser_with_real_lift_files PASSED [ 65%]
tests/integration/test_parser_comprehensive.py::TestParserIntegration::test_parser_performance_baseline PASSED [ 65%]
tests/integration/test_performance_benchmarks.py::TestPerformanceBenchmarks::test_bulk_entry_creation_performance PASSED [ 65%]
tests/integration/test_performance_benchmarks.py::TestPerformanceBenchmarks::test_search_performance PASSED [ 65%]
tests/integration/test_performance_benchmarks.py::TestPerformanceBenchmarks::test_entry_retrieval_performance PASSED [ 65%]
tests/integration/test_performance_benchmarks.py::TestPerformanceBenchmarks::test_count_operations_performance PASSED [ 65%]
tests/integration/test_performance_benchmarks.py::TestPerformanceBenchmarks::test_memory_usage_during_operations PASSED [ 65%]
tests/integration/test_performance_benchmarks.py::TestPerformanceBenchmarks::test_concurrent_operations_performance PASSED [ 65%]
tests/integration/test_performance_benchmarks.py::TestPerformanceRegression::test_baseline_operations PASSED [ 65%]
tests/integration/test_phase_3_integration.py::TestPhase3AutoSaveIntegration::test_auto_save_endpoint_integration PASSED [ 65%]
tests/integration/test_phase_3_integration.py::TestPhase3AutoSaveIntegration::test_auto_save_with_validation_errors PASSED [ 65%]
tests/integration/test_phase_3_integration.py::TestPhase3AutoSaveIntegration::test_auto_save_endpoint_missing_data PASSED [ 65%]
tests/integration/test_phase_3_integration.py::TestPhase3AutoSaveIntegration::test_auto_save_test_endpoint PASSED [ 65%]
tests/integration/test_phase_3_integration.py::TestPhase3AutoSaveIntegration::test_entry_form_includes_autosave_scripts PASSED [ 66%]
tests/integration/test_phase_3_integration.py::TestPhase3AutoSaveIntegration::test_phase_3_javascript_integration PASSED [ 66%]
tests/integration/test_phase_3_integration.py::TestPhase3AutoSaveIntegration::test_complete_phase_3_integration PASSED [ 66%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_validation_ui_components_available PASSED [ 66%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_field_level_validation_structure PASSED [ 66%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_inline_validation_css_classes PASSED [ 66%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_section_validation_badges_present PASSED [ 66%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_section_validation_javascript_integration PASSED [ 66%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_real_time_validation_endpoint PASSED [ 66%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_section_validation_endpoint PASSED [ 66%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_form_validation_endpoint PASSED [ 66%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_form_submission_with_validation_blocking PASSED [ 66%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_form_submission_with_warnings_allowed PASSED [ 66%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_validation_state_persistence PASSED [ 67%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_real_time_validation_performance PASSED [ 67%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_section_validation_performance PASSED [ 67%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_phase_4_complete_integration PASSED [ 67%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_validation_feedback_accessibility PASSED [ 67%]
tests/integration/test_phase_4_real_time_validation.py::TestPhase4RealTimeValidation::test_validation_internationalization PASSED [ 67%]
tests/integration/test_pos_inheritance_scenarios.py::test_pos_inheritance_scenarios PASSED [ 67%]
tests/integration/test_pos_inheritance_scenarios.py::test_hardcoded_entry_inheritance PASSED [ 67%]
tests/integration/test_pos_simple.py::test_grammatical_info_persists PASSED [ 67%]
tests/integration/test_postgresql_integration.py::TestPostgreSQLConnector::test_config_from_env PASSED [ 67%]
tests/integration/test_postgresql_integration.py::TestPostgreSQLConnector::test_connection_success PASSED [ 67%]
tests/integration/test_postgresql_integration.py::TestPostgreSQLConnector::test_connection_failure PASSED [ 67%]
tests/integration/test_postgresql_integration.py::TestPostgreSQLConnector::test_execute_query_success PASSED [ 67%]
tests/integration/test_postgresql_integration.py::TestPostgreSQLConnector::test_execute_query_failure PASSED [ 68%]
tests/integration/test_postgresql_integration.py::TestPostgreSQLConnector::test_fetch_all_success PASSED [ 68%]
tests/integration/test_postgresql_integration.py::TestPostgreSQLConnector::test_fetch_all_failure PASSED [ 68%]
tests/integration/test_postgresql_integration.py::TestPostgreSQLConnector::test_context_manager PASSED [ 68%]
tests/integration/test_postgresql_integration.py::TestPostgreSQLSetup::test_schema_creation_sql PASSED [ 68%]
tests/integration/test_postgresql_integration.py::TestPostgreSQLSetup::test_index_creation_sql PASSED [ 68%]
tests/integration/test_postgresql_integration.py::TestSimpleMigration::test_sqlite_data_reading PASSED [ 68%]
tests/integration/test_postgresql_integration.py::TestSimpleMigration::test_data_transformation PASSED [ 68%]
tests/integration/test_postgresql_integration.py::TestPostgreSQLIntegration::test_real_connection PASSED [ 68%]
tests/integration/test_postgresql_integration.py::TestPostgreSQLIntegration::test_schema_creation_real PASSED [ 68%]
tests/integration/test_postgresql_real_integration.py::TestPostgreSQLRealIntegration::test_postgresql_connection PASSED [ 68%]
tests/integration/test_postgresql_real_integration.py::TestPostgreSQLRealIntegration::test_create_dictionary_schema PASSED [ 68%]
tests/integration/test_postgresql_real_integration.py::TestPostgreSQLRealIntegration::test_sqlite_to_postgresql_migration PASSED [ 68%]
tests/integration/test_postgresql_real_integration.py::TestPostgreSQLRealIntegration::test_advanced_corpus_features PASSED [ 69%]
tests/integration/test_postgresql_real_integration.py::TestPostgreSQLRealIntegration::test_word_sketch_features PASSED [ 69%]
tests/integration/test_postgresql_real_integration.py::TestPostgreSQLRealIntegration::test_performance_with_large_dataset PASSED [ 69%]
tests/integration/test_postgresql_real_integration.py::TestPostgreSQLRealIntegration::test_transaction_handling PASSED [ 69%]
tests/integration/test_pronunciation_and_dynamic_ranges.py::test_pronunciation_restricted_language_code PASSED [ 69%]
tests/integration/test_pronunciation_and_dynamic_ranges.py::test_dictionary_service_language_codes PASSED [ 69%]
tests/integration/test_pronunciation_and_dynamic_ranges.py::test_variant_types_from_traits PASSED [ 69%]
tests/integration/test_pronunciation_and_dynamic_ranges.py::test_api_endpoints_for_dynamic_ranges PASSED [ 69%]
tests/integration/test_pronunciation_display.py::test_pronunciation_display_in_entry_form PASSED [ 69%]
tests/integration/test_pronunciation_display.py::test_pronunciation_conversion PASSED [ 69%]
tests/integration/test_pronunciation_form_display.py::test_pronunciation_field_displays_in_form PASSED [ 69%]
tests/integration/test_pronunciation_form_display.py::test_pronunciation_form_renders_input_fields PASSED [ 69%]
tests/integration/test_pronunciation_media_integration.py::TestPronunciationMediaXMLParsing::test_parse_single_media_without_label PASSED [ 69%]
tests/integration/test_pronunciation_media_integration.py::TestPronunciationMediaXMLParsing::test_parse_single_media_with_label PASSED [ 70%]
tests/integration/test_pronunciation_media_integration.py::TestPronunciationMediaXMLParsing::test_parse_multiple_media_elements PASSED [ 70%]
tests/integration/test_pronunciation_media_integration.py::TestPronunciationMediaXMLParsing::test_parse_media_with_url PASSED [ 70%]
tests/integration/test_pronunciation_media_integration.py::TestPronunciationMediaXMLGeneration::test_generate_media_without_label PASSED [ 70%]
tests/integration/test_pronunciation_media_integration.py::TestPronunciationMediaXMLGeneration::test_generate_media_with_label PASSED [ 70%]
tests/integration/test_pronunciation_media_integration.py::TestPronunciationMediaXMLGeneration::test_generate_multiple_media PASSED [ 70%]
tests/integration/test_pronunciation_media_integration.py::TestPronunciationMediaXMLGeneration::test_round_trip_preservation PASSED [ 70%]
tests/integration/test_pronunciation_unicode_fix.py::TestPronunciationUnicodeDisplay::test_pronunciation_unicode_encoding_in_js PASSED [ 70%]
tests/integration/test_pronunciation_unicode_fix.py::TestPronunciationUnicodeDisplay::test_pronunciation_template_json_encoding PASSED [ 70%]
tests/integration/test_pronunciation_unicode_fix.py::TestPronunciationUnicodeDisplay::test_api_endpoints_work PASSED [ 70%]
tests/integration/test_query_builder.py::test_simple_lexical_unit_search PASSED [ 70%]
tests/integration/test_query_builder.py::test_sense_definition_search PASSED [ 70%]
tests/integration/test_query_builder.py::test_grammatical_info_search PASSED [ 70%]
tests/integration/test_query_builder.py::test_etymology_search PASSED    [ 70%]
tests/integration/test_query_builder.py::test_relation_search PASSED     [ 71%]
tests/integration/test_query_builder.py::test_complex_multi_field_query PASSED [ 71%]
tests/integration/test_query_builder_filter_consistency.py::TestQueryBuilderFilterConsistency::test_initial_filter_has_comprehensive_fields PASSED [ 71%]
tests/integration/test_query_builder_filter_consistency.py::TestQueryBuilderFilterConsistency::test_initial_filter_has_comprehensive_operators PASSED [ 71%]
tests/integration/test_query_builder_filter_consistency.py::TestQueryBuilderFilterConsistency::test_javascript_creates_identical_filter_options PASSED [ 71%]
tests/integration/test_query_builder_filter_consistency.py::TestQueryBuilderFilterConsistency::test_no_hardcoded_options_in_javascript PASSED [ 71%]
tests/integration/test_query_builder_filter_consistency.py::TestQueryBuilderFilterConsistency::test_optgroup_structure_preservation PASSED [ 71%]
tests/integration/test_query_builder_ui.py::TestQueryBuilderUI::test_query_builder_page_renders PASSED [ 71%]
tests/integration/test_query_builder_ui.py::TestQueryBuilderUI::test_query_builder_has_field_options PASSED [ 71%]
tests/integration/test_query_builder_ui.py::TestQueryBuilderUI::test_query_builder_has_operator_options PASSED [ 71%]
tests/integration/test_query_builder_ui.py::TestQueryBuilderUI::test_query_builder_dynamic_filter_management PASSED [ 71%]
tests/integration/test_query_builder_ui.py::TestQueryBuilderUI::test_query_builder_has_sorting_options PASSED [ 71%]
tests/integration/test_query_builder_ui.py::TestQueryBuilderUI::test_query_builder_preview_functionality PASSED [ 71%]
tests/integration/test_query_builder_ui.py::TestQueryBuilderUI::test_query_builder_save_functionality PASSED [ 72%]
tests/integration/test_query_builder_ui.py::TestQueryBuilderAPI::test_validate_query_endpoint PASSED [ 72%]
tests/integration/test_query_builder_ui.py::TestQueryBuilderAPI::test_preview_query_endpoint PASSED [ 72%]
tests/integration/test_query_builder_ui.py::TestQueryBuilderAPI::test_save_query_endpoint PASSED [ 72%]
tests/integration/test_query_builder_ui.py::TestQueryBuilderAPI::test_load_saved_queries_endpoint PASSED [ 72%]
tests/integration/test_query_builder_ui.py::TestQueryBuilderAPI::test_execute_query_and_create_workset PASSED [ 72%]
tests/integration/test_query_builder_ui.py::TestQueryBuilderPerformance::test_query_validation_response_time PASSED [ 72%]
tests/integration/test_query_builder_ui.py::TestQueryBuilderPerformance::test_query_preview_handles_large_results PASSED [ 72%]
tests/integration/test_ranges_api.py::TestRangesAPI::test_get_ranges_returns_structured_data PASSED [ 72%]
tests/integration/test_ranges_api.py::TestRangesAPI::test_get_ranges_handles_empty_ranges PASSED [ 72%]
tests/integration/test_ranges_api.py::TestRangesAPI::test_get_ranges_caches_results PASSED [ 72%]
tests/integration/test_ranges_api.py::TestRangesAPI::test_grammatical_info_range_structure PASSED [ 72%]
tests/integration/test_ranges_api.py::TestRangesAPI::test_lexical_relation_range_structure PASSED [ 72%]
tests/integration/test_ranges_api.py::TestRangesAPIEndpoints::test_ranges_endpoint_structure_ready PASSED [ 73%]
tests/integration/test_ranges_api.py::TestRangesAPIEndpoints::test_specific_range_endpoint_structure PASSED [ 73%]
tests/integration/test_ranges_consistency.py::test_ranges_consistency PASSED [ 73%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_list_ranges PASSED [ 73%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_get_specific_range_exists PASSED [ 73%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_get_range_returns_id_and_label PASSED [ 73%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_get_specific_range_not_found PASSED [ 73%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_create_range_valid PASSED [ 73%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_create_range_missing_id PASSED [ 73%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_create_range_missing_labels PASSED [ 73%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_update_range_not_found PASSED [ 73%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_delete_range_not_found PASSED [ 73%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_list_range_elements PASSED [ 73%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_list_range_elements_not_found PASSED [ 74%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_create_range_element_missing_id PASSED [ 74%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_get_range_usage PASSED [ 74%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_get_range_usage_with_element_id PASSED [ 74%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_migrate_range_values_missing_operation PASSED [ 74%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_migrate_range_values_dry_run PASSED [ 74%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_create_update_delete_range_workflow PASSED [ 74%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_api_returns_json_content_type PASSED [ 74%]
tests/integration/test_ranges_editor_api.py::TestRangesEditorAPI::test_error_handling_invalid_json PASSED [ 74%]
tests/integration/test_ranges_elements_crud_clean.py::TestRangeElementsCRUDClean::test_create_and_get FAILED [ 74%]
tests/integration/test_ranges_installation.py::test_install_recommended_ranges_endpoint PASSED [ 74%]
tests/integration/test_ranges_installation.py::test_entry_form_shows_ranges_missing_banner PASSED [ 74%]
tests/integration/test_ranges_installation.py::test_install_recommended_when_ranges_exist FAILED [ 74%]
tests/integration/test_ranges_installation.py::test_recommended_traits_yaml_content FAILED [ 75%]
tests/integration/test_ranges_installation.py::test_minimal_lift_ranges_content PASSED [ 75%]
tests/integration/test_ranges_labels_and_official_flag.py::test_ranges_editor_api_includes_label_and_official_flag FAILED [ 75%]
tests/integration/test_ranges_labels_and_official_flag.py::test_custom_ranges_marked_as_custom PASSED [ 75%]
tests/integration/test_ranges_multilingual_api.py::TestMultilingualElementAPI::test_create_element_with_multilingual_properties PASSED [ 75%]
tests/integration/test_ranges_multilingual_api.py::TestMultilingualElementAPI::test_get_element_returns_multilingual_properties PASSED [ 75%]
tests/integration/test_ranges_multilingual_api.py::TestMultilingualElementAPI::test_update_element_multilingual_properties PASSED [ 75%]
tests/integration/test_ranges_multilingual_api.py::TestMultilingualElementAPI::test_create_range_json_rejected PASSED [ 75%]
tests/integration/test_ranges_multilingual_api.py::TestMultilingualElementAPI::test_list_elements_shows_all_properties PASSED [ 75%]
tests/integration/test_ranges_multilingual_api.py::TestMultilingualElementValidation::test_create_element_without_id_fails PASSED [ 75%]
tests/integration/test_ranges_multilingual_api.py::TestMultilingualElementValidation::test_update_nonexistent_element_fails PASSED [ 75%]
tests/integration/test_ranges_multilingual_api.py::TestMultilingualElementCRUD::test_full_crud_cycle PASSED [ 75%]
tests/integration/test_real_integration.py::TestRealIntegration::test_real_entry_creation_and_retrieval ERROR [ 75%]
tests/integration/test_real_integration.py::TestRealIntegration::test_real_search_functionality ERROR [ 75%]
tests/integration/test_real_integration.py::TestRealIntegration::test_real_entry_update_and_delete ERROR [ 76%]
tests/integration/test_real_integration.py::TestRealIntegration::test_real_statistics_and_counts ERROR [ 76%]
tests/integration/test_real_integration.py::TestRealIntegration::test_real_lift_import_export_roundtrip ERROR [ 76%]
tests/integration/test_real_integration.py::TestRealIntegration::test_real_error_handling ERROR [ 76%]
tests/integration/test_real_integration.py::TestRealIntegration::test_real_sense_operations ERROR [ 76%]
tests/integration/test_real_integration.py::TestRealModelInteractions::test_sense_property_setters PASSED [ 76%]
tests/integration/test_real_integration.py::TestRealModelInteractions::test_entry_sense_integration PASSED [ 76%]
tests/integration/test_real_integration.py::TestRealModelInteractions::test_entry_validation_comprehensive PASSED [ 76%]
tests/integration/test_real_submission.py::test_real_form_submission PASSED [ 76%]
tests/integration/test_relation_variant_types.py::TestRelationBasedVariants::test_parse_relation_with_variant_type_trait PASSED [ 76%]
tests/integration/test_relation_variant_types.py::TestRelationBasedVariants::test_parse_multiple_relations_with_variant_traits PASSED [ 76%]
tests/integration/test_relation_variant_types.py::TestRelationBasedVariants::test_generate_lift_with_relation_variant_traits PASSED [ 76%]
tests/integration/test_relation_variant_types.py::TestRelationBasedVariants::test_get_variant_type_relations PASSED [ 76%]
tests/integration/test_relation_variant_types.py::TestRelationBasedVariants::test_variant_type_round_trip PASSED [ 77%]
tests/integration/test_relations_ui.py::TestRelationsUI::test_relation_object_creation PASSED [ 77%]
tests/integration/test_relations_ui.py::TestRelationsUI::test_entry_model_supports_relations_list PASSED [ 77%]
tests/integration/test_relations_ui.py::TestRelationsUI::test_entry_relations_serialization PASSED [ 77%]
tests/integration/test_relations_ui.py::TestRelationsUI::test_empty_relations_handling PASSED [ 77%]
tests/integration/test_relations_ui.py::TestRelationsUI::test_add_relation_method PASSED [ 77%]
tests/integration/test_relations_ui.py::TestRelationsAPISupport::test_api_entry_creation_with_relations PASSED [ 77%]
tests/integration/test_relations_ui.py::TestRelationsAPISupport::test_api_entry_update_with_relations PASSED [ 77%]
tests/integration/test_relations_ui.py::TestRelationsRangesIntegration::test_relation_types_from_ranges PASSED [ 77%]
tests/integration/test_relations_ui.py::TestRelationsRangesIntegration::test_relation_validation_ready PASSED [ 77%]
tests/integration/test_relations_ui.py::TestRelationsLifecycle::test_add_relation_to_existing_entry PASSED [ 77%]
tests/integration/test_relations_ui.py::TestRelationsLifecycle::test_remove_relation_from_entry PASSED [ 77%]
tests/integration/test_relations_ui.py::TestRelationsLifecycle::test_modify_relation_in_entry PASSED [ 77%]
tests/integration/test_reversals_integration.py::test_reversal_data_structure PASSED [ 78%]
tests/integration/test_reversals_integration.py::test_reversal_multitext_forms PASSED [ 78%]
tests/integration/test_reversals_integration.py::test_reversal_without_type PASSED [ 78%]
tests/integration/test_reversals_integration.py::test_reversal_nested_main_structure PASSED [ 78%]
tests/integration/test_reversals_integration.py::test_reversal_main_without_grammatical_info PASSED [ 78%]
tests/integration/test_reversals_integration.py::test_reversal_empty_main PASSED [ 78%]
tests/integration/test_reversals_integration.py::test_multiple_reversals_per_sense PASSED [ 78%]
tests/integration/test_reversals_integration.py::test_reversal_with_all_fields PASSED [ 78%]
tests/integration/test_reversals_integration.py::test_reversal_serialization_basic PASSED [ 78%]
tests/integration/test_reversals_integration.py::test_reversal_serialization_with_main PASSED [ 78%]
tests/integration/test_reversals_integration.py::test_reversal_type_language_codes PASSED [ 78%]
tests/integration/test_scan_and_create_custom_ranges.py::test_scan_and_create_custom_ranges_creates_trait_values PASSED [ 78%]
tests/integration/test_scan_and_create_custom_ranges.py::test_ranges_editor_returns_custom_range PASSED [ 78%]
tests/integration/test_search.py::TestSearch::test_basic_search ERROR    [ 79%]
tests/integration/test_search.py::TestSearch::test_search_exact_match ERROR [ 79%]
tests/integration/test_search.py::TestSearch::test_search_by_field ERROR [ 79%]
tests/integration/test_search.py::TestSearch::test_search_special_characters ERROR [ 79%]
tests/integration/test_search.py::TestSearch::test_search_pagination ERROR [ 79%]
tests/integration/test_search.py::TestSearch::test_search_no_results ERROR [ 79%]
tests/integration/test_search.py::TestSearch::test_search_after_update ERROR [ 79%]
tests/integration/test_search_api_debug.py::TestSearchAPI::test_search_api_basic PASSED [ 79%]
tests/integration/test_search_api_debug.py::TestSearchAPI::test_search_with_notes_field PASSED [ 79%]
tests/integration/test_search_api_debug.py::TestSearchAPI::test_search_with_multiple_fields PASSED [ 79%]
tests/integration/test_search_api_debug.py::TestSearchAPI::test_search_error_handling PASSED [ 79%]
tests/integration/test_search_api_debug.py::TestSearchAPI::test_search_debug_info PASSED [ 79%]
tests/integration/test_search_functionality.py::test_count_entries ERROR [ 79%]
tests/integration/test_search_functionality.py::test_basic_search ERROR  [ 80%]
tests/integration/test_search_functionality.py::test_search_api_endpoint_exists PASSED [ 80%]
tests/integration/test_search_functionality.py::test_search_api_response_structure PASSED [ 80%]
tests/integration/test_search_functionality.py::test_search_api_parameter_validation PASSED [ 80%]
tests/integration/test_search_functionality.py::test_search_frontend_page_loads PASSED [ 80%]
tests/integration/test_search_functionality.py::test_search_frontend_javascript_integration PASSED [ 80%]
tests/integration/test_search_functionality.py::test_search_javascript_file_accessible PASSED [ 80%]
tests/integration/test_search_functionality.py::test_search_api_with_frontend_query PASSED [ 80%]
tests/integration/test_search_functionality.py::test_search_error_handling PASSED [ 80%]
tests/integration/test_search_integration_comprehensive.py::TestSearchIntegrationComprehensive::test_search_basic PASSED [ 80%]
tests/integration/test_search_integration_comprehensive.py::TestSearchIntegrationComprehensive::test_exact_match_search PASSED [ 80%]
tests/integration/test_search_integration_comprehensive.py::TestSearchIntegrationComprehensive::test_partial_match_search PASSED [ 80%]
tests/integration/test_search_integration_comprehensive.py::TestSearchIntegrationComprehensive::test_multilingual_search PASSED [ 80%]
tests/integration/test_search_integration_comprehensive.py::TestSearchIntegrationComprehensive::test_case_insensitive_search PASSED [ 80%]
tests/integration/test_search_integration_comprehensive.py::TestSearchIntegrationComprehensive::test_empty_search_query PASSED [ 81%]
tests/integration/test_search_integration_comprehensive.py::TestSearchIntegrationComprehensive::test_search_pagination PASSED [ 81%]
tests/integration/test_search_integration_comprehensive.py::TestSearchIntegrationComprehensive::test_search_special_characters PASSED [ 81%]
tests/integration/test_search_integration_comprehensive.py::TestSearchIntegrationComprehensive::test_search_performance_limits PASSED [ 81%]
tests/integration/test_search_integration_comprehensive.py::TestXQueryBuilderComprehensive::test_xquery_builder_instantiation PASSED [ 81%]
tests/integration/test_search_integration_comprehensive.py::TestXQueryBuilderComprehensive::test_xquery_builder_entry_retrieval PASSED [ 81%]
tests/integration/test_search_integration_comprehensive.py::TestXQueryBuilderComprehensive::test_xquery_builder_count_query PASSED [ 81%]
tests/integration/test_search_integration_comprehensive.py::TestXQueryBuilderComprehensive::test_xquery_builder_special_characters PASSED [ 81%]
tests/integration/test_search_integration_comprehensive.py::TestXQueryBuilderComprehensive::test_xquery_builder_pagination PASSED [ 81%]
tests/integration/test_search_integration_comprehensive.py::TestLIFTNamespaceManagerComprehensive::test_namespace_manager_instantiation PASSED [ 81%]
tests/integration/test_search_integration_comprehensive.py::TestLIFTNamespaceManagerComprehensive::test_namespace_manager_lift_namespace PASSED [ 81%]
tests/integration/test_search_integration_comprehensive.py::TestLIFTNamespaceManagerComprehensive::test_namespace_manager_prefix_operations PASSED [ 81%]
tests/integration/test_search_integration_comprehensive.py::TestLIFTNamespaceManagerComprehensive::test_namespace_manager_xml_declaration PASSED [ 81%]
tests/integration/test_search_integration_comprehensive.py::TestSearchEdgeCases::test_search_with_mock_connector PASSED [ 82%]
tests/integration/test_search_integration_comprehensive.py::TestSearchEdgeCases::test_search_error_handling PASSED [ 82%]
tests/integration/test_search_integration_comprehensive.py::TestSearchEdgeCases::test_search_memory_efficiency PASSED [ 82%]
tests/integration/test_search_invalid_entry.py::test_invalid_entry_in_search PASSED [ 82%]
tests/integration/test_search_pagination.py::TestSearchPagination::test_pagination_consistency SKIPPED [ 82%]
tests/integration/test_search_pagination.py::TestSearchPagination::test_search_with_limit_and_offset SKIPPED [ 82%]
tests/integration/test_search_pagination.py::TestSearchPagination::test_search_with_limit_only SKIPPED [ 82%]
tests/integration/test_search_pagination.py::TestSearchPagination::test_search_with_specific_limit SKIPPED [ 82%]
tests/integration/test_sense_level_fields_no_data_loss.py::TestSenseLevelFieldsNoDataLoss::test_usage_type_list_preserved_through_form_processing PASSED [ 82%]
tests/integration/test_sense_level_fields_no_data_loss.py::TestSenseLevelFieldsNoDataLoss::test_semantic_domains_list_preserved_through_form_processing PASSED [ 82%]
tests/integration/test_sense_level_fields_no_data_loss.py::TestSenseLevelFieldsNoDataLoss::test_domain_type_list_preserved_through_form_processing PASSED [ 82%]
tests/integration/test_sense_level_fields_no_data_loss.py::TestSenseLevelFieldsNoDataLoss::test_semicolon_separated_string_converted_to_list PASSED [ 82%]
tests/integration/test_sense_level_fields_no_data_loss.py::TestSenseLevelFieldsNoDataLoss::test_empty_list_fields_handled_correctly PASSED [ 82%]
tests/integration/test_sense_level_fields_no_data_loss.py::TestSenseLevelFieldsNoDataLoss::test_entry_with_usage_type_saved_and_retrieved PASSED [ 83%]
tests/integration/test_sense_level_fields_no_data_loss.py::TestSenseLevelFieldsNoDataLoss::test_entry_with_domain_type_saved_and_retrieved PASSED [ 83%]
tests/integration/test_sense_level_fields_no_data_loss.py::TestSenseLevelFieldsNoDataLoss::test_form_submission_to_database_roundtrip PASSED [ 83%]
tests/integration/test_sense_level_fields_no_data_loss.py::TestSenseLevelFieldsNoDataLoss::test_multiple_senses_with_different_usage_types PASSED [ 83%]
tests/integration/test_sense_level_fields_no_data_loss.py::TestSenseLevelFieldsNoDataLoss::test_single_value_as_list PASSED [ 83%]
tests/integration/test_serialization_error.py::test_entry_serialization_issue PASSED [ 83%]
tests/integration/test_settings_page_resilience.py::test_settings_page_handles_missing_dict_service PASSED [ 83%]
tests/integration/test_settings_route.py::TestSettingsRoute::test_get_settings_page PASSED [ 83%]
tests/integration/test_settings_route.py::TestSettingsRoute::test_language_choices_in_form PASSED [ 83%]
tests/integration/test_settings_route.py::TestSettingsRoute::test_settings_are_applied_immediately PASSED [ 83%]
tests/integration/test_settings_route.py::TestSettingsRoute::test_update_settings_successfully PASSED [ 83%]
tests/integration/test_settings_route.py::TestSettingsRoute::test_update_settings_validation_error PASSED [ 83%]
tests/integration/test_setup_and_docs.py::test_apidocs_contains_projects_endpoints PASSED [ 83%]
tests/integration/test_setup_and_docs.py::test_create_project_returns_success_json PASSED [ 84%]
tests/integration/test_setup_and_docs.py::test_settings_wizard_modal_shows PASSED [ 84%]
tests/integration/test_setup_and_docs.py::test_help_page_mentions_project_setup PASSED [ 84%]
tests/integration/test_setup_and_docs.py::test_apispec_json_contains_expected_paths PASSED [ 84%]
tests/integration/test_standard_ranges_metadata_and_duplicates.py::test_standard_ranges_config_does_not_duplicate_and_label_fallback PASSED [ 84%]
tests/integration/test_standard_ranges_metadata_and_duplicates.py::test_config_not_applied_when_lift_has_same_range PASSED [ 84%]
tests/integration/test_statistics_and_status.py::TestDictionaryStatistics::test_count_entries ERROR [ 84%]
tests/integration/test_statistics_and_status.py::TestDictionaryStatistics::test_count_senses_and_examples ERROR [ 84%]
tests/integration/test_statistics_and_status.py::TestDictionaryStatistics::test_statistics_after_import ERROR [ 84%]
tests/integration/test_statistics_and_status.py::TestSystemStatus::test_get_system_status ERROR [ 84%]
tests/integration/test_statistics_and_status.py::TestSystemStatus::test_system_status_disconnected PASSED [ 84%]
tests/integration/test_subsenses_integration.py::test_create_entry_with_subsenses PASSED [ 84%]
tests/integration/test_subsenses_integration.py::test_subsense_data_structure PASSED [ 84%]
tests/integration/test_subsenses_integration.py::test_recursive_subsense_depth PASSED [ 85%]
tests/integration/test_subsenses_integration.py::test_subsense_without_nested_subsenses PASSED [ 85%]
tests/integration/test_subsenses_integration.py::test_multiple_subsenses_same_level PASSED [ 85%]
tests/integration/test_subsenses_integration.py::test_subsense_with_all_fields PASSED [ 85%]
tests/integration/test_subsenses_integration.py::test_subsense_id_uniqueness PASSED [ 85%]
tests/integration/test_subsenses_integration.py::test_empty_sense_subsenses_array PASSED [ 85%]
tests/integration/test_template_rendering.py::test_template_rendering PASSED [ 85%]
tests/integration/test_tools_page.py::test_tools_page PASSED             [ 85%]
tests/integration/test_tools_page.py::test_clear_cache PASSED            [ 85%]
tests/integration/test_ui_enhancements.py::TestPronunciationUIElements::test_pronunciation_has_separate_buttons PASSED [ 85%]
tests/integration/test_ui_enhancements.py::TestPronunciationUIElements::test_pronunciation_buttons_in_template PASSED [ 85%]
tests/integration/test_ui_enhancements.py::TestIllustrationUIElements::test_illustration_has_upload_button PASSED [ 85%]
tests/integration/test_ui_enhancements.py::TestIllustrationUIElements::test_illustration_has_preview_container PASSED [ 85%]
tests/integration/test_ui_enhancements.py::TestJavaScriptFileUploadHandlers::test_entry_form_js_has_upload_handler PASSED [ 85%]
tests/integration/test_ui_enhancements.py::TestJavaScriptFileUploadHandlers::test_entry_form_js_has_generate_handler PASSED [ 86%]
tests/integration/test_ui_enhancements.py::TestJavaScriptFileUploadHandlers::test_multilingual_sense_fields_js_has_illustration_picker PASSED [ 86%]
tests/integration/test_ui_enhancements.py::TestJavaScriptFileUploadHandlers::test_multilingual_sense_fields_js_has_preview_initialization PASSED [ 86%]
tests/integration/test_ui_enhancements.py::TestJavaScriptFileUploadHandlers::test_entry_form_js_has_illustration_handlers PASSED [ 86%]
tests/integration/test_ui_enhancements.py::TestJavaScriptFileUploadHandlers::test_css_view_displays_illustration PASSED [ 86%]
tests/integration/test_ui_enhancements.py::TestJavaScriptFileUploadHandlers::test_css_view_displays_remote_illustration PASSED [ 86%]
tests/integration/test_ui_form_submission.py::TestUIFormSubmissionWorkflow::test_create_new_entry_with_usage_type_from_form PASSED [ 86%]
tests/integration/test_ui_form_submission.py::TestUIFormSubmissionWorkflow::test_edit_existing_entry_update_usage_type_from_form PASSED [ 86%]
tests/integration/test_ui_form_submission.py::TestUIFormSubmissionWorkflow::test_add_sense_with_usage_type_to_existing_entry PASSED [ 86%]
tests/integration/test_ui_form_submission.py::TestUIFormSubmissionWorkflow::test_empty_usage_type_removes_field PASSED [ 86%]
tests/integration/test_ui_form_submission.py::TestUIFormSubmissionWorkflow::test_single_value_usage_type_becomes_list PASSED [ 86%]
tests/integration/test_ui_ranges_phase4.py::TestUIRangesDynamicIntegration::test_entry_form_loads_dynamic_grammatical_info PASSED [ 86%]
tests/integration/test_ui_ranges_phase4.py::TestUIRangesDynamicIntegration::test_entry_form_loads_dynamic_relation_types PASSED [ 86%]
tests/integration/test_ui_ranges_phase4.py::TestUIRangesDynamicIntegration::test_search_page_uses_dynamic_ranges PASSED [ 87%]
tests/integration/test_ui_ranges_phase4.py::TestUIRangesDynamicIntegration::test_entry_form_hierarchical_semantic_domain_editor PASSED [ 87%]
tests/integration/test_ui_ranges_phase4.py::TestUIRangesDynamicIntegration::test_ui_gracefully_handles_missing_ranges PASSED [ 87%]
tests/integration/test_ui_ranges_phase4.py::TestUIRangesDynamicIntegration::test_javascript_ranges_loader_functionality PASSED [ 87%]
tests/integration/test_ui_ranges_phase4.py::TestUIRangesDynamicIntegration::test_entry_form_etymology_types_dropdown PASSED [ 87%]
tests/integration/test_ui_ranges_phase4.py::TestUIRangesDynamicIntegration::test_entry_form_status_and_usage_type_selectors PASSED [ 87%]
tests/integration/test_ui_ranges_phase4.py::TestUIRangesDynamicIntegration::test_query_builder_uses_dynamic_ranges PASSED [ 87%]
tests/integration/test_ui_ranges_phase4.py::TestUIRangesSpecialEditors::test_semantic_domain_hierarchical_tree_view PASSED [ 87%]
tests/integration/test_ui_ranges_phase4.py::TestUIRangesSpecialEditors::test_grammatical_info_hierarchical_categories PASSED [ 87%]
tests/integration/test_ui_ranges_phase4.py::TestUIRangesSpecialEditors::test_range_editor_multilingual_display PASSED [ 87%]
tests/integration/test_ui_ranges_phase4.py::TestUIRangesSpecialEditors::test_range_search_and_filter_functionality PASSED [ 87%]
tests/integration/test_ui_ranges_phase4.py::TestUIRangesSpecialEditors::test_range_validation_and_error_handling_in_ui FAILED [ 87%]
tests/integration/test_usage_type_string_bug.py::test_usage_type_string_incorrectly_split_into_characters PASSED [ 87%]
tests/integration/test_usage_type_string_bug.py::test_usage_type_as_list_works_correctly PASSED [ 88%]
tests/integration/test_validation_relaxation.py::test_get_ranges_crash PASSED [ 88%]
tests/integration/test_validation_relaxation.py::test_validation_allows_empty_source_definition PASSED [ 88%]
tests/integration/test_validation_relaxation.py::test_validation_rejects_empty_all_definitions PASSED [ 88%]
tests/integration/test_validation_relaxation.py::test_validation_allows_empty_source_with_gloss PASSED [ 88%]
tests/integration/test_validation_rules.py::TestValidationModes::test_entry_without_senses_draft_mode PASSED [ 88%]
tests/integration/test_validation_rules.py::TestValidationModes::test_entry_deletion_bypasses_validation PASSED [ 88%]
tests/integration/test_validation_rules.py::TestValidationModes::test_progressive_workflow PASSED [ 88%]
tests/integration/test_validation_rules.py::TestValidationModes::test_dictionary_service_draft_mode PASSED [ 88%]
tests/integration/test_validation_rules.py::TestEntryValidationRules::test_r1_1_1_entry_id_required PASSED [ 88%]
tests/integration/test_validation_rules.py::TestEntryValidationRules::test_r1_1_2_lexical_unit_required PASSED [ 88%]
tests/integration/test_validation_rules.py::TestEntryValidationRules::test_r1_1_3_at_least_one_sense_required PASSED [ 88%]
tests/integration/test_validation_rules.py::TestEntryValidationRules::test_r1_2_1_entry_id_format_validation PASSED [ 88%]
tests/integration/test_validation_rules.py::TestEntryValidationRules::test_r1_2_2_lexical_unit_format_validation PASSED [ 89%]
tests/integration/test_validation_rules.py::TestEntryValidationRules::test_r1_2_3_language_code_validation PASSED [ 89%]
tests/integration/test_validation_rules.py::TestSenseValidationRules::test_r2_1_1_sense_id_required PASSED [ 89%]
tests/integration/test_validation_rules.py::TestSenseValidationRules::test_r2_1_2_sense_definition_or_gloss_required PASSED [ 89%]
tests/integration/test_validation_rules.py::TestSenseValidationRules::test_r2_1_3_variant_sense_validation PASSED [ 89%]
tests/integration/test_validation_rules.py::TestSenseValidationRules::test_r2_2_1_definition_content_validation PASSED [ 89%]
tests/integration/test_validation_rules.py::TestSenseValidationRules::test_r2_2_2_gloss_content_validation PASSED [ 89%]
tests/integration/test_validation_rules.py::TestSenseValidationRules::test_r2_2_3_example_text_validation PASSED [ 89%]
tests/integration/test_validation_rules.py::TestNoteValidationRules::test_r3_1_1_unique_note_types PASSED [ 89%]
tests/integration/test_validation_rules.py::TestNoteValidationRules::test_r3_1_2_note_content_validation PASSED [ 89%]
tests/integration/test_validation_rules.py::TestNoteValidationRules::test_r3_1_3_multilingual_note_structure PASSED [ 89%]
tests/integration/test_validation_rules.py::TestPronunciationValidationRules::test_r4_1_1_pronunciation_language_restriction PASSED [ 89%]
tests/integration/test_validation_rules.py::TestPronunciationValidationRules::test_r4_1_2_ipa_character_validation PASSED [ 89%]
tests/integration/test_validation_rules.py::TestPronunciationValidationRules::test_r4_2_1_no_double_stress_markers PASSED [ 90%]
tests/integration/test_validation_rules.py::TestPronunciationValidationRules::test_r4_2_2_no_double_length_markers PASSED [ 90%]
tests/integration/test_validation_rules.py::TestPOSConsistencyRules::test_r6_1_1_entry_sense_pos_consistency PASSED [ 90%]
tests/integration/test_validation_rules.py::TestPOSConsistencyRules::test_r6_1_2_conflicting_sense_pos_requires_manual_entry_pos PASSED [ 90%]
tests/integration/test_validation_rules.py::TestRelationValidationRules::test_r5_1_1_entry_reference_integrity PASSED [ 90%]
tests/integration/test_validation_rules.py::TestRelationValidationRules::test_r5_1_2_sense_level_reference_integrity PASSED [ 90%]
tests/integration/test_validation_rules.py::TestRelationValidationRules::test_r5_2_1_relation_type_validation SKIPPED [ 90%]
tests/integration/test_validation_rules.py::TestDynamicRangeValidation::test_r8_1_1_types_from_lift_ranges PASSED [ 90%]
tests/integration/test_validation_rules.py::TestDynamicRangeValidation::test_r8_2_1_variant_types_from_traits PASSED [ 90%]
tests/integration/test_validation_rules.py::TestDynamicRangeValidation::test_r8_2_2_language_codes_from_lift_data PASSED [ 90%]
tests/integration/test_validation_rules.py::TestPerformanceValidationRules::test_r10_1_1_bulk_validation_performance SKIPPED [ 90%]
tests/integration/test_validation_rules.py::TestPerformanceValidationRules::test_r10_2_1_error_reporting_with_field_paths PASSED [ 90%]
tests/integration/test_validation_rules_fixed.py::TestValidationModes::test_save_entry_without_senses_in_draft_mode PASSED [ 90%]
tests/integration/test_validation_rules_fixed.py::TestValidationModes::test_delete_entry_bypasses_validation PASSED [ 90%]
tests/integration/test_validation_rules_fixed.py::TestValidationModes::test_progressive_validation_workflow PASSED [ 91%]
tests/integration/test_validation_rules_fixed.py::TestEntryValidationRulesFixed::test_r1_1_1_entry_id_required PASSED [ 91%]
tests/integration/test_validation_rules_fixed.py::TestEntryValidationRulesFixed::test_r1_1_2_lexical_unit_required PASSED [ 91%]
tests/integration/test_validation_rules_fixed.py::TestEntryValidationRulesFixed::test_r1_1_3_at_least_one_sense_required_save_mode PASSED [ 91%]
tests/integration/test_validation_rules_fixed.py::TestEntryValidationRulesFixed::test_r1_1_3_sense_not_required_draft_mode PASSED [ 91%]
tests/integration/test_validation_rules_fixed.py::TestEntryValidationRulesFixed::test_r1_2_1_entry_id_format_validation PASSED [ 91%]
tests/integration/test_validation_rules_fixed.py::TestEntryValidationRulesFixed::test_r1_2_2_lexical_unit_format_validation PASSED [ 91%]
tests/integration/test_validation_rules_fixed.py::TestSenseValidationRulesFixed::test_r2_1_1_sense_id_required PASSED [ 91%]
tests/integration/test_validation_rules_fixed.py::TestSenseValidationRulesFixed::test_r2_1_2_sense_definition_or_gloss_required PASSED [ 91%]
tests/integration/test_validation_rules_fixed.py::TestSenseValidationRulesFixed::test_r2_2_1_definition_content_validation PASSED [ 91%]
tests/integration/test_validation_rules_fixed.py::TestSenseValidationRulesFixed::test_r2_2_2_gloss_content_validation PASSED [ 91%]
tests/integration/test_validation_rules_fixed.py::TestValidationEngineDirectly::test_validation_engine_with_proper_data PASSED [ 91%]
tests/integration/test_validation_rules_fixed.py::TestValidationEngineDirectly::test_validation_modes_in_engine PASSED [ 91%]
tests/integration/test_variant_container.py::TestVariantContainer::test_extract_variant_relations_from_traits PASSED [ 92%]
tests/integration/test_variant_container.py::TestVariantContainer::test_extract_variant_relations_no_traits PASSED [ 92%]
tests/integration/test_variant_container.py::TestVariantContainer::test_extract_variant_relations_without_order PASSED [ 92%]
tests/integration/test_variant_container.py::TestVariantContainer::test_entry_to_dict_includes_variant_relations PASSED [ 92%]
tests/integration/test_variant_entry_complete.py::test_variant_entry_without_senses PASSED [ 92%]
tests/integration/test_variant_entry_complete.py::test_regular_entry_requires_senses PASSED [ 92%]
tests/integration/test_variant_entry_complete.py::test_variant_entry_with_senses PASSED [ 92%]
tests/integration/test_variant_entry_complete.py::test_non_variant_relation_requires_senses PASSED [ 92%]
tests/integration/test_variant_entry_listing_fix.py::test_variant_entry_listing_without_validation_errors PASSED [ 92%]
tests/integration/test_variant_entry_listing_fix.py::test_validation_still_works_for_create_operations PASSED [ 92%]
tests/integration/test_variant_entry_listing_fix.py::test_non_validating_parser_accepts_variant_entries PASSED [ 92%]
tests/integration/test_variant_forms_ui.py::TestVariantFormsUI::test_entry_model_supports_variants PASSED [ 92%]
tests/integration/test_variant_forms_ui.py::TestVariantFormsUI::test_variant_object_creation_and_serialization PASSED [ 92%]
tests/integration/test_variant_forms_ui.py::TestVariantFormsUI::test_entry_variant_serialization PASSED [ 93%]
tests/integration/test_variant_forms_ui.py::TestVariantFormsUI::test_empty_variants_handling PASSED [ 93%]
tests/integration/test_variant_forms_ui.py::TestVariantFormsUI::test_variant_validation_requirements PASSED [ 93%]
tests/integration/test_variant_forms_ui.py::TestVariantFormsAPISupport::test_api_entry_creation_with_variants PASSED [ 93%]
tests/integration/test_variant_forms_ui.py::TestVariantFormsAPISupport::test_api_entry_update_with_variants PASSED [ 93%]
tests/integration/test_variant_forms_ui.py::TestVariantFormsRangesIntegration::test_variant_type_from_ranges PASSED [ 93%]
tests/integration/test_variant_forms_ui.py::TestVariantFormsRangesIntegration::test_form_language_code_validation_ready PASSED [ 93%]
tests/integration/test_variant_forms_ui.py::TestVariantFormsLifecycle::test_add_variant_to_existing_entry PASSED [ 93%]
tests/integration/test_variant_forms_ui.py::TestVariantFormsLifecycle::test_remove_variant_from_entry PASSED [ 93%]
tests/integration/test_variant_forms_ui.py::TestVariantFormsLifecycle::test_modify_variant_in_entry PASSED [ 93%]
tests/integration/test_variant_sense_validation.py::test_variant_entries_have_no_senses PASSED [ 93%]
tests/integration/test_variant_trait_labels_ui.py::TestVariantTraitLabelsUI::test_variant_types_from_traits_api_endpoint PASSED [ 93%]
tests/integration/test_variant_trait_labels_ui.py::TestVariantTraitLabelsUI::test_entry_form_contains_variant_container PASSED [ 93%]
tests/integration/test_variant_trait_labels_ui.py::TestVariantTraitLabelsUI::test_variant_forms_uses_traits_based_range_id PASSED [ 94%]
tests/integration/test_variant_trait_labels_ui.py::TestVariantTraitLabelsUI::test_variant_forms_manager_initialization PASSED [ 94%]
tests/integration/test_variant_type_dynamic_in_form.py::test_variant_type_select_is_dynamic PASSED [ 94%]
tests/integration/test_variant_validation_fix.py::test_variant_entry_validation PASSED [ 94%]
tests/integration/test_web_form_protestantism.py::test_protestantism_form_submission PASSED [ 94%]
tests/integration/test_web_form_protestantism.py::test_form_data_parsing PASSED [ 94%]
tests/integration/test_web_form_real.py::TestRealWebFormSubmission::test_web_form_definition_preservation PASSED [ 94%]
tests/integration/test_web_form_real.py::TestRealWebFormSubmission::test_web_form_with_new_definition PASSED [ 94%]
tests/integration/test_word_sketch_integration.py::TestWordSketchPostgreSQLIntegration::test_create_word_sketch_table_schema PASSED [ 94%]
tests/integration/test_word_sketch_integration.py::TestWordSketchPostgreSQLIntegration::test_insert_word_sketch PASSED [ 94%]
tests/integration/test_word_sketch_integration.py::TestWordSketchPostgreSQLIntegration::test_query_word_sketches_by_headword PASSED [ 94%]
tests/integration/test_word_sketch_integration.py::TestWordSketchPostgreSQLIntegration::test_calculate_logdice_score PASSED [ 94%]
tests/integration/test_word_sketch_integration.py::TestSUBTLEXIntegration::test_import_subtlex_data PASSED [ 94%]
tests/integration/test_word_sketch_integration.py::TestSUBTLEXIntegration::test_calculate_psychological_accessibility PASSED [ 95%]
tests/integration/test_word_sketch_integration.py::TestSUBTLEXIntegration::test_frequency_analysis_integration PASSED [ 95%]
tests/integration/test_word_sketch_integration.py::TestSentenceAlignedProcessing::test_batch_process_aligned_sentences PASSED [ 95%]
tests/integration/test_word_sketch_integration.py::TestSentenceAlignedProcessing::test_extract_word_sketches_from_sentences PASSED [ 95%]
tests/integration/test_word_sketch_integration.py::TestSentenceAlignedProcessing::test_linguistic_cache_functionality PASSED [ 95%]
tests/integration/test_word_sketch_integration.py::TestSketchGrammarProcessing::test_load_sketch_grammar_patterns PASSED [ 95%]
tests/integration/test_word_sketch_integration.py::TestSketchGrammarProcessing::test_apply_sketch_patterns_to_sentence PASSED [ 95%]
tests/integration/test_working_coverage.py::test_dictionary_service_with_real_basex PASSED [ 95%]
tests/integration/test_workset_api.py::TestWorksetAPI::test_create_workset_from_query PASSED [ 95%]
tests/integration/test_workset_api.py::TestWorksetAPI::test_get_workset_with_pagination PASSED [ 95%]
tests/integration/test_workset_api.py::TestWorksetAPI::test_update_workset_query PASSED [ 95%]
tests/integration/test_workset_api.py::TestWorksetAPI::test_delete_workset PASSED [ 95%]
tests/integration/test_workset_api.py::TestWorksetAPI::test_bulk_update_workset PASSED [ 95%]
tests/integration/test_workset_api.py::TestWorksetAPI::test_get_bulk_operation_progress PASSED [ 95%]
tests/integration/test_workset_api.py::TestWorksetAPI::test_validate_workset_query PASSED [ 96%]
tests/integration/test_workset_api.py::TestWorksetPerformance::test_workset_handles_large_datasets PASSED [ 96%]
tests/integration/test_workset_api.py::TestWorksetPerformance::test_workset_concurrent_access SKIPPED [ 96%]
tests/integration/test_worksets.py::test_create_workset PASSED           [ 96%]
tests/integration/test_worksets.py::test_create_workset_json_rejected PASSED [ 96%]
tests/integration/test_xml_api_nonexistent_entry.py::TestXMLAPINonexistentEntry::test_put_nonexistent_entry_creates_it PASSED [ 96%]
tests/integration/test_xml_api_nonexistent_entry.py::TestXMLAPINonexistentEntry::test_put_entry_with_multiple_relations PASSED [ 96%]
tests/integration/test_xml_api_nonexistent_entry.py::TestXMLAPINonexistentEntry::test_put_updates_existing_entry_with_new_relations PASSED [ 96%]
tests/integration/test_xml_entry_crud_integration.py::TestXMLEntryCRUD::test_create_entry_via_api PASSED [ 96%]
tests/integration/test_xml_entry_crud_integration.py::TestXMLEntryCRUD::test_read_entry_via_api PASSED [ 96%]
tests/integration/test_xml_entry_crud_integration.py::TestXMLEntryCRUD::test_update_entry_via_api PASSED [ 96%]
tests/integration/test_xml_entry_crud_integration.py::TestXMLEntryCRUD::test_delete_entry_via_api PASSED [ 96%]
tests/integration/test_xml_entry_crud_integration.py::TestXMLEntryCRUD::test_full_crud_cycle PASSED [ 96%]
tests/integration/test_xml_entry_crud_integration.py::TestXMLEntryCRUD::test_update_preserves_other_entries PASSED [ 97%]
tests/integration/test_xml_entry_crud_integration.py::TestXMLEntryAPIErrorHandling::test_update_nonexistent_entry PASSED [ 97%]
tests/integration/test_xml_entry_crud_integration.py::TestXMLEntryAPIErrorHandling::test_create_duplicate_entry PASSED [ 97%]
tests/integration/test_xml_entry_crud_integration.py::TestXMLEntryAPIErrorHandling::test_invalid_xml PASSED [ 97%]
tests/integration/test_xml_form_submission.py::TestXMLFormSubmission::test_create_entry_via_xml_api PASSED [ 97%]
tests/integration/test_xml_form_submission.py::TestXMLFormSubmission::test_update_entry_via_xml_api PASSED [ 97%]
tests/integration/test_xml_form_submission.py::TestXMLFormSubmission::test_get_entry_via_xml_api PASSED [ 97%]
tests/integration/test_xml_form_submission.py::TestXMLFormSubmission::test_delete_entry_via_xml_api PASSED [ 97%]
tests/integration/test_xml_form_submission.py::TestXMLFormSubmission::test_search_entries_via_xml_api PASSED [ 97%]
tests/integration/test_xml_form_submission.py::TestXMLFormSubmission::test_get_stats_via_xml_api PASSED [ 97%]
tests/integration/test_xml_form_submission.py::TestXMLFormSubmission::test_invalid_xml_rejected PASSED [ 97%]
tests/integration/test_xml_form_submission.py::TestXMLFormSubmission::test_empty_xml_rejected PASSED [ 97%]
tests/integration/test_xml_form_submission.py::TestXMLFormSubmission::test_id_mismatch_in_update_rejected PASSED [ 97%]
tests/integration/test_xml_form_submission.py::TestXMLFormSubmission::test_nonexistent_entry_returns_404 PASSED [ 98%]
tests/integration/test_xml_service_basex.py::TestIntegrationCreateEntry::test_create_and_verify_entry PASSED [ 98%]
tests/integration/test_xml_service_basex.py::TestIntegrationCreateEntry::test_create_duplicate_entry_fails PASSED [ 98%]
tests/integration/test_xml_service_basex.py::TestIntegrationCreateEntry::test_create_invalid_entry_fails PASSED [ 98%]
tests/integration/test_xml_service_basex.py::TestIntegrationGetEntry::test_get_existing_entry PASSED [ 98%]
tests/integration/test_xml_service_basex.py::TestIntegrationGetEntry::test_get_nonexistent_entry_fails PASSED [ 98%]
tests/integration/test_xml_service_basex.py::TestIntegrationUpdateEntry::test_update_existing_entry PASSED [ 98%]
tests/integration/test_xml_service_basex.py::TestIntegrationUpdateEntry::test_update_nonexistent_entry_fails PASSED [ 98%]
tests/integration/test_xml_service_basex.py::TestIntegrationUpdateEntry::test_update_with_id_mismatch_fails PASSED [ 98%]
tests/integration/test_xml_service_basex.py::TestIntegrationDeleteEntry::test_delete_existing_entry PASSED [ 98%]
tests/integration/test_xml_service_basex.py::TestIntegrationDeleteEntry::test_delete_nonexistent_entry_fails PASSED [ 98%]
tests/integration/test_xml_service_basex.py::TestIntegrationSearch::test_search_entries_by_text PASSED [ 98%]
tests/integration/test_xml_service_basex.py::TestIntegrationSearch::test_search_with_pagination PASSED [ 98%]
tests/integration/test_xml_service_basex.py::TestIntegrationSearch::test_search_no_results PASSED [ 99%]
tests/integration/test_xml_service_basex.py::TestIntegrationDatabaseStats::test_get_database_stats PASSED [ 99%]
tests/integration/test_xml_service_basex.py::TestIntegrationDatabaseStats::test_stats_reflect_changes PASSED [ 99%]
tests/integration/test_xml_service_basex.py::TestIntegrationEndToEnd::test_full_crud_lifecycle PASSED [ 99%]
tests/integration/test_xml_service_basex.py::TestIntegrationEndToEnd::test_multiple_concurrent_entries PASSED [ 99%]
tests/integration/test_xml_validation_api.py::TestXMLValidationAPI::test_validate_xml_api_valid_entry PASSED [ 99%]
tests/integration/test_xml_validation_api.py::TestXMLValidationAPI::test_validate_xml_api_missing_required_field PASSED [ 99%]
tests/integration/test_xml_validation_api.py::TestXMLValidationAPI::test_validate_xml_api_malformed_xml PASSED [ 99%]
tests/integration/test_xml_validation_api.py::TestXMLValidationAPI::test_validate_xml_api_empty_request PASSED [ 99%]
tests/integration/test_xml_validation_api.py::TestXMLValidationAPI::test_validate_xml_api_empty_id PASSED [ 99%]
tests/integration/test_xml_validation_api.py::TestXMLValidationAPI::test_validate_xml_api_complex_entry PASSED [ 99%]
tests/integration/test_xml_validation_api.py::TestXMLValidationAPI::test_validate_xml_api_unicode_content PASSED [ 99%]
tests/integration/test_xml_validation_api.py::TestXMLValidationAPI::test_validate_xml_api_response_structure PASSED [ 99%]
tests/integration/test_xml_validation_api.py::TestXMLValidationAPI::test_validate_xml_api_text_xml_content_type PASSED [100%]

==================================== ERRORS ====================================
_______ ERROR at setup of TestDictionaryService.test_initialize_database _______
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_service_22b0adaf

During handling of the above exception, another exception occurred:
tests/integration/test_dictionary_service.py:50: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_service_22b0adaf
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpn5xyii_t.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpse_1rdn9.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpb3rllh7a.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_service_22b0adaf
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_service_22b0adaf
____________ ERROR at setup of TestDictionaryService.test_get_entry ____________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_service_8d04710b

During handling of the above exception, another exception occurred:
tests/integration/test_dictionary_service.py:50: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_service_8d04710b
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp6qgg7zg_.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp7gedfls7.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp5kwi73n1.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_service_8d04710b
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_service_8d04710b
__________ ERROR at setup of TestDictionaryService.test_create_entry ___________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_service_ce25f041

During handling of the above exception, another exception occurred:
tests/integration/test_dictionary_service.py:50: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_service_ce25f041
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpg1oxjlvu.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpb3cr57o9.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp34g1zt12.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_service_ce25f041
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_service_ce25f041
__________ ERROR at setup of TestDictionaryService.test_update_entry ___________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_service_2aae6a55

During handling of the above exception, another exception occurred:
tests/integration/test_dictionary_service.py:50: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_service_2aae6a55
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpn0iqh27j.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmptwd0w6c8.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp07sxzycx.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_service_2aae6a55
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_service_2aae6a55
__________ ERROR at setup of TestDictionaryService.test_delete_entry ___________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_service_2bf7db85

During handling of the above exception, another exception occurred:
tests/integration/test_dictionary_service.py:50: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_service_2bf7db85
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpdkl54ynp.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpcbraz5h0.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpcxnsrfso.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_service_2bf7db85
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_service_2bf7db85
__________ ERROR at setup of TestDictionaryService.test_list_entries ___________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_service_550b9d17

During handling of the above exception, another exception occurred:
tests/integration/test_dictionary_service.py:50: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_service_550b9d17
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmprayt7lqo.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmppmh9n5vb.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpskf6237v.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_service_550b9d17
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_service_550b9d17
_________ ERROR at setup of TestDictionaryService.test_search_entries __________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_service_9be8b0bf

During handling of the above exception, another exception occurred:
tests/integration/test_dictionary_service.py:50: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_service_9be8b0bf
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpmhh7y19_.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpm4ywtx_x.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp4ic25kiz.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_service_9be8b0bf
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_service_9be8b0bf
___________ ERROR at setup of TestDictionaryService.test_import_lift ___________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_service_daca9fc9

During handling of the above exception, another exception occurred:
tests/integration/test_dictionary_service.py:50: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_service_daca9fc9
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp0oamwucb.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpww34o_5c.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp0r7z2ch1.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_service_daca9fc9
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_service_daca9fc9
___________ ERROR at setup of TestDictionaryService.test_export_lift ___________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_service_9907d235

During handling of the above exception, another exception occurred:
tests/integration/test_dictionary_service.py:50: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_service_9907d235
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp369r7_0m.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp3uere8zk.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpj8lnmcdv.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_service_9907d235
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_service_9907d235
_____________________ ERROR at setup of test_entry_update ______________________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_entry_update_34a851cf_2bdf_4322_ac88_f8f68a4bcfd2

During handling of the above exception, another exception occurred:
tests/integration/test_entry_update.py:52: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_entry_update_34a851cf_2bdf_4322_ac88_f8f68a4bcfd2
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp6_rwnz12.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp_ww69qvc.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpxsf70_aw.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_entry_update_34a851cf_2bdf_4322_ac88_f8f68a4bcfd2
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_entry_update_34a851cf_2bdf_4322_ac88_f8f68a4bcfd2
___ ERROR at setup of TestExporterIntegration.test_kindle_exporter_real_data ___
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_exporters_f1b64e74

During handling of the above exception, another exception occurred:
tests/integration/test_exporter_integration.py:113: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_exporters_f1b64e74
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_exporters_f1b64e74
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_exporters_f1b64e74
_ ERROR at setup of TestExporterIntegration.test_kindle_exporter_custom_options _
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_exporters_f1b64e74

During handling of the above exception, another exception occurred:
tests/integration/test_exporter_integration.py:113: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_exporters_f1b64e74
___ ERROR at setup of TestExporterIntegration.test_sqlite_exporter_real_data ___
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_exporters_f1b64e74

During handling of the above exception, another exception occurred:
tests/integration/test_exporter_integration.py:113: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_exporters_f1b64e74
_ ERROR at setup of TestExporterIntegration.test_sqlite_exporter_schema_validation _
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_exporters_f1b64e74

During handling of the above exception, another exception occurred:
tests/integration/test_exporter_integration.py:113: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_exporters_f1b64e74
____ ERROR at setup of TestExporterIntegration.test_exporter_error_handling ____
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_exporters_f1b64e74

During handling of the above exception, another exception occurred:
tests/integration/test_exporter_integration.py:113: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_exporters_f1b64e74
_______ ERROR at setup of TestLiveSearchFunctionality.test_basic_search ________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: dictionary

During handling of the above exception, another exception occurred:
tests/integration/test_live_search_functionality.py:55: in setUpClass
    cls.connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: dictionary
------------------------------ Captured log setup ------------------------------
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: dictionary
_______ ERROR at setup of TestLiveSearchFunctionality.test_count_entries _______
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: dictionary

During handling of the above exception, another exception occurred:
tests/integration/test_live_search_functionality.py:55: in setUpClass
    cls.connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: dictionary
_____ ERROR at setup of TestLiveSearchFunctionality.test_search_edge_cases _____
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: dictionary

During handling of the above exception, another exception occurred:
tests/integration/test_live_search_functionality.py:55: in setUpClass
    cls.connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: dictionary
_____ ERROR at setup of TestLiveSearchFunctionality.test_search_pagination _____
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: dictionary

During handling of the above exception, another exception occurred:
tests/integration/test_live_search_functionality.py:55: in setUpClass
    cls.connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: dictionary
_ ERROR at setup of TestLiveSearchFunctionality.test_search_special_characters _
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: dictionary

During handling of the above exception, another exception occurred:
tests/integration/test_live_search_functionality.py:55: in setUpClass
    cls.connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: dictionary
____ ERROR at setup of TestLiveSearchFunctionality.test_search_with_fields _____
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: dictionary

During handling of the above exception, another exception occurred:
tests/integration/test_live_search_functionality.py:55: in setUpClass
    cls.connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: dictionary
_ ERROR at setup of TestRealIntegration.test_real_entry_creation_and_retrieval _
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_real_integration_a75cce90_b2f5_45ae_a33d_3cbccb4290b7

During handling of the above exception, another exception occurred:
tests/integration/test_real_integration.py:58: in db_connector
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_real_integration_a75cce90_b2f5_45ae_a33d_3cbccb4290b7
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmptstwe9tt.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpi71yl27f.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmphtw6vzxe.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_real_integration_a75cce90_b2f5_45ae_a33d_3cbccb4290b7
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_real_integration_a75cce90_b2f5_45ae_a33d_3cbccb4290b7
_____ ERROR at setup of TestRealIntegration.test_real_search_functionality _____
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_real_integration_cfe271dd_4061_4cb4_b727_557e808d04a4

During handling of the above exception, another exception occurred:
tests/integration/test_real_integration.py:58: in db_connector
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_real_integration_cfe271dd_4061_4cb4_b727_557e808d04a4
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpb94xgq6y.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpkz0ov31m.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpgnuwfg1v.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_real_integration_cfe271dd_4061_4cb4_b727_557e808d04a4
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_real_integration_cfe271dd_4061_4cb4_b727_557e808d04a4
___ ERROR at setup of TestRealIntegration.test_real_entry_update_and_delete ____
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_real_integration_c9eb6c06_ec9e_4aea_b1a7_19ffd19b16bd

During handling of the above exception, another exception occurred:
tests/integration/test_real_integration.py:58: in db_connector
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_real_integration_c9eb6c06_ec9e_4aea_b1a7_19ffd19b16bd
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpoi_hvm8o.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp5dmigo76.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp5juwajd4.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_real_integration_c9eb6c06_ec9e_4aea_b1a7_19ffd19b16bd
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_real_integration_c9eb6c06_ec9e_4aea_b1a7_19ffd19b16bd
____ ERROR at setup of TestRealIntegration.test_real_statistics_and_counts _____
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_real_integration_43d443bb_3c71_4222_bcb3_b8fec725a685

During handling of the above exception, another exception occurred:
tests/integration/test_real_integration.py:58: in db_connector
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_real_integration_43d443bb_3c71_4222_bcb3_b8fec725a685
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp00by4rdm.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpih5mvbzg.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp7z4msomz.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_real_integration_43d443bb_3c71_4222_bcb3_b8fec725a685
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_real_integration_43d443bb_3c71_4222_bcb3_b8fec725a685
_ ERROR at setup of TestRealIntegration.test_real_lift_import_export_roundtrip _
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_real_integration_b03cc75e_be4d_450a_8853_786d2db5fcf8

During handling of the above exception, another exception occurred:
tests/integration/test_real_integration.py:58: in db_connector
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_real_integration_b03cc75e_be4d_450a_8853_786d2db5fcf8
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpff2jdlzk.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp2juu7vf2.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp5rdfwn3n.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_real_integration_b03cc75e_be4d_450a_8853_786d2db5fcf8
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_real_integration_b03cc75e_be4d_450a_8853_786d2db5fcf8
________ ERROR at setup of TestRealIntegration.test_real_error_handling ________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_real_integration_c1132e56_58bf_4408_a076_da836c0348fe

During handling of the above exception, another exception occurred:
tests/integration/test_real_integration.py:58: in db_connector
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_real_integration_c1132e56_58bf_4408_a076_da836c0348fe
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpbil55hfg.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpzocttu3c.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp7exhm8em.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_real_integration_c1132e56_58bf_4408_a076_da836c0348fe
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_real_integration_c1132e56_58bf_4408_a076_da836c0348fe
_______ ERROR at setup of TestRealIntegration.test_real_sense_operations _______
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_real_integration_4752cf57_6c7f_4f1c_8aa4_f5a2d02407f7

During handling of the above exception, another exception occurred:
tests/integration/test_real_integration.py:58: in db_connector
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_real_integration_4752cf57_6c7f_4f1c_8aa4_f5a2d02407f7
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmppu_r4odh.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpxxvpoibq.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpu625mxz2.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_real_integration_4752cf57_6c7f_4f1c_8aa4_f5a2d02407f7
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_real_integration_4752cf57_6c7f_4f1c_8aa4_f5a2d02407f7
________________ ERROR at setup of TestSearch.test_basic_search ________________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_search

During handling of the above exception, another exception occurred:
tests/integration/test_search.py:51: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_search
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpe7l3pal9.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp8jdt3a1e.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpu_2y5pbm.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_dict_search
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_search
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_search
_____________ ERROR at setup of TestSearch.test_search_exact_match _____________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_search

During handling of the above exception, another exception occurred:
tests/integration/test_search.py:51: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_search
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpwzutndpa.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp5q51t2nw.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp4xuufz2g.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_dict_search
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_search
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_search
______________ ERROR at setup of TestSearch.test_search_by_field _______________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_search

During handling of the above exception, another exception occurred:
tests/integration/test_search.py:51: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_search
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpctmcsex1.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpy997aufr.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp1m02k2fr.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_dict_search
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_search
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_search
_________ ERROR at setup of TestSearch.test_search_special_characters __________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_search

During handling of the above exception, another exception occurred:
tests/integration/test_search.py:51: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_search
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp8u1g9ir1.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpw2elsa80.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpm6738rlb.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_dict_search
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_search
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_search
_____________ ERROR at setup of TestSearch.test_search_pagination ______________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_search

During handling of the above exception, another exception occurred:
tests/integration/test_search.py:51: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_search
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp2qc4w5fo.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp8m9d1ejg.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpp0kja1w_.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_dict_search
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_search
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_search
_____________ ERROR at setup of TestSearch.test_search_no_results ______________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_search

During handling of the above exception, another exception occurred:
tests/integration/test_search.py:51: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_search
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp1zqwpaol.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp5wj2zsl0.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpcwkfmlab.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_dict_search
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_search
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_search
____________ ERROR at setup of TestSearch.test_search_after_update _____________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_search

During handling of the above exception, another exception occurred:
tests/integration/test_search.py:51: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_search
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp49tvwsx3.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpdrcspghk.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpu1r_sdpi.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_dict_search
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_search
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_search
_____________________ ERROR at setup of test_count_entries _____________________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_search_func

During handling of the above exception, another exception occurred:
tests/integration/test_search_functionality.py:72: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_search_func
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp4povbdte.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpub238oer.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp324ue4bh.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_dict_search_func
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_search_func
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_search_func
_____________________ ERROR at setup of test_basic_search ______________________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_search_func

During handling of the above exception, another exception occurred:
tests/integration/test_search_functionality.py:72: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_search_func
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpzw89k8s6.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpifrnxkxl.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmppduc9apb.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_dict_search_func
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_search_func
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_search_func
________ ERROR at setup of TestDictionaryStatistics.test_count_entries _________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_stats

During handling of the above exception, another exception occurred:
tests/integration/test_statistics_and_status.py:41: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_stats
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpjde1bg8m.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmppxjg2v4s.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp819wvx10.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_dict_stats
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_stats
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_stats
__ ERROR at setup of TestDictionaryStatistics.test_count_senses_and_examples ___
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_stats

During handling of the above exception, another exception occurred:
tests/integration/test_statistics_and_status.py:41: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_stats
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp0wjv7eui.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpwvk1a_lx.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp52403urz.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_dict_stats
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_stats
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_stats
___ ERROR at setup of TestDictionaryStatistics.test_statistics_after_import ____
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_stats

During handling of the above exception, another exception occurred:
tests/integration/test_statistics_and_status.py:41: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_stats
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpfu9ktnj7.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpagb6a4iy.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpnlbv9y3r.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_dict_stats
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_stats
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_stats
__________ ERROR at setup of TestSystemStatus.test_get_system_status ___________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_dict_stats

During handling of the above exception, another exception occurred:
tests/integration/test_statistics_and_status.py:41: in dict_service
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_dict_stats
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp9o5suz2z.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpjjmi5lsd.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpjhjbthfn.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_dict_stats
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_dict_stats
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_dict_stats
=================================== FAILURES ===================================
_______________ TestSenseRelationCRUD.test_read_sense_relations ________________
tests/integration/test_component_sense_relations_crud.py:277: in test_read_sense_relations
    assert 'sense-relation-search-input' in html
E   assert 'sense-relation-search-input' in '<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Edit Entry: basketball</title>\n    <!-- Bootstrap CSS -->\n    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">\n    <!-- Bootstrap Icons -->\n    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">\n    <!-- Font Awesome for icons -->\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">\n    <!-- Custom CSS -->\n    <link rel="stylesheet" href="/static/css/main.css">\n    \n<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css">\n<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css">\n<link rel="stylesheet" href="/static/css/form-tooltips.css">\n<link rel="stylesheet" href="/static/css/validation-feedback.css">\n\n</head>\n<body>\n    <!-- Navigation -->\n    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">\n        <div cla...ions</label>\n                        </div>\n                    </div>\n                </div>\n                \n                <hr class="my-4">\n                \n                <div class="d-flex justify-content-between">\n                    <button type="button" class="btn btn-outline-secondary" id="reset-field-visibility">\n                        <i class="fas fa-undo"></i> Reset to Defaults\n                    </button>\n                    <div>\n                        <button type="button" class="btn btn-outline-primary" id="hide-empty-sections">\n                            <i class="fas fa-eye-slash"></i> Hide Empty Sections\n                        </button>\n                        <button type="button" class="btn btn-outline-primary" id="show-all-sections">\n                            <i class="fas fa-eye"></i> Show All Sections\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n    \n</body>\n</html>'
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: None

DEBUG: get_ranges using db_name: test_20251224_0015_unit_cf5030
DEBUG: ranges_xml length: 914
DEBUG: LIFTRangesParser.parse_string called with XML length 914
DEBUG: _parse_range_hierarchy for grammatical-info, total elements found: 3
DEBUG: Using direct hierarchy for grammatical-info, direct count: 3
DEBUG: _parse_range_hierarchy for usage-type, total elements found: 2
DEBUG: Using direct hierarchy for usage-type, direct count: 2
DEBUG: _parse_range_hierarchy for semantic-domain, total elements found: 2
DEBUG: Using direct hierarchy for semantic-domain, direct count: 2
DEBUG: _parse_range_hierarchy for academic-domain, total elements found: 2
DEBUG: Using direct hierarchy for academic-domain, direct count: 2
DEBUG: _parse_range_hierarchy for variant-type, total elements found: 2
DEBUG: Using direct hierarchy for variant-type, direct count: 2
DEBUG: _parse_ranges returned 5 results
DEBUG: variant-type values count: 2
DEBUG: parsed_ranges keys: ['grammatical-info', 'usage-type', 'semantic-domain', 'academic-domain', 'variant-type']
DEBUG: variant-type values count: 2
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_20251224_0015_unit_cf5030
INFO     app.database.basex_connector:basex_connector.py:379 Database 'test_20251224_0015_unit_cf5030' created successfully
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_cf5030
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_cf5030)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD /tmp/tmpn0rzv77d.xml
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD /tmp/tmphokvomys.xml
WARNING  app:__init__.py:74 TEST_DB_NAME 'test_20251224_0015_unit_cf5030' differs from app BASEX_DATABASE 'test_20251224_0013_session_b260c9' - sync to TEST_DB_NAME
INFO     app.services.dictionary_service:dictionary_service.py:103 Skipping BaseX connection during tests
INFO     app.services.backup_scheduler:backup_scheduler.py:50 Backup scheduler started
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_cf5030
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_cf5030)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_cf5030
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_cf5030)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0015_unit_cf5030' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpr8gv1gil.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp9sja0d1b.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp4b1eb389.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2668 Querying for ranges using collection('test_20251224_0015_unit_cf5030')//lift-ranges
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_cf5030
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_cf5030)
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
collection('test_20251224_0015_unit_cf5030')//lift-ranges
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: collection('test_20251224_0015_unit_cf5030')//lift-ranges...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.services.dictionary_service:dictionary_service.py:2675 Found ranges document using collection() query
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range-element>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range-element>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range-element>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range-element>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range-element>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range-element>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range-element>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range-element>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range-element>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range-element>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range-element>
WARNING  app.services.dictionary_service:dictionary_service.py:2761 lexical-relation not found in parsed ranges, adding default
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            exists(collection('test_20251224_0015_unit_cf5030')//lift:lift)
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            exists(collectio...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        exists(collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="main_entry_001"])
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_cf5030
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_cf5030)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0015_unit_cf5030' after update
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        exists(collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="component_entry_001"])
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_cf5030
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_cf5030)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0015_unit_cf5030' after update
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        exists(collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="component_entry_002"])
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_cf5030
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_cf5030)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0015_unit_cf5030' after update
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        exists(collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="target_entry_001"])
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_cf5030
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_cf5030)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0015_unit_cf5030' after update
----------------------------- Captured stdout call -----------------------------
Executing query for entry: main_entry_001
Query: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="main_entry_001"]
        return $entry
        
Entry XML: <entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form l...
Entry parsed successfully: main_entry_001
Executing query for entry: main_entry_001
Query: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="main_entry_001"]
        return $entry
        
Entry XML: <entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form l...
Entry parsed successfully: main_entry_001
Executing query for entry: sense_target
Query: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="sense_target"]
        return $entry
        
Entry sense_target not found in database test_20251224_0015_unit_cf5030
Executing query for entry: target_entry_001
Query: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="target_entry_001"]
        return $entry
        
Entry XML: <entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="target_entry_001"><lexical-unit><form...
Entry parsed successfully: target_entry_001
Executing query for entry: main_entry_001
Query: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="main_entry_001"]
        return $entry
        
Entry XML: <entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form l...
Entry parsed successfully: main_entry_001
Executing query for entry: main_entry_001
Query: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="main_entry_001"]
        return $entry
        
Entry XML: <entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form l...
Entry parsed successfully: main_entry_001
EDIT_ENTRY CALLED FOR main_entry_001
Flask app database name: test_20251224_0015_unit_cf5030
Environment TEST_DB_NAME: test_20251224_0015_unit_cf5030
Executing query for entry (for editing): main_entry_001
Query: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="main_entry_001"]
        return $entry
        
Entry XML: <entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form l...
Entry parsed successfully for editing: main_entry_001
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['grammatical-info', 'usage-type', 'semantic-domain', 'academic-domain', 'variant-type', 'lexical-relation']
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['grammatical-info', 'usage-type', 'semantic-domain', 'academic-domain', 'variant-type', 'lexical-relation']
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['grammatical-info', 'usage-type', 'semantic-domain', 'academic-domain', 'variant-type', 'lexical-relation']
------------------------------ Captured log call -------------------------------
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="main_entry_001"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.services.dictionary_service:dictionary_service.py:667 Raw query result: <entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
DEBUG    app.parsers.lift_parser:lift_parser.py:154 Normalized XML: <lift xmlns="http://fieldworks.sil.org/schemas/lift/0.13" xmlns:lift="http://fieldworks.sil.org/sche...
INFO     app.services.dictionary_service:dictionary_service.py:761 [UPDATE_ENTRY] Received skip_validation=False, draft=False, skip_bidirectional=False
INFO     app.services.dictionary_service:dictionary_service.py:763 [UPDATE_ENTRY] Running validation in mode: save
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="main_entry_001"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.services.dictionary_service:dictionary_service.py:667 Raw query result: <entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
DEBUG    app.parsers.lift_parser:lift_parser.py:154 Normalized XML: <lift xmlns="http://fieldworks.sil.org/schemas/lift/0.13" xmlns:lift="http://fieldworks.sil.org/sche...
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="sense_target"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.services.dictionary_service:dictionary_service.py:1111 list_entries called with: limit=None, offset=0, sort_by=lexical_unit, sort_order=asc, filter_text=
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
             count(collection('test_20251224_0015_unit_cf5030')//lift:entry)
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.services.dictionary_service:dictionary_service.py:1130 Database connection status: True
DEBUG    app.services.dictionary_service:dictionary_service.py:1133 Using database: test_20251224_0015_unit_cf5030
DEBUG    app.services.dictionary_service:dictionary_service.py:1226 Constructed query for list_entries: 
            
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
            (for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry
            order by lower-case(($entry/lift:lexical-unit/lift:form/lift:text)[1]) empty least
            return $entry)
            
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
            (for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry
            order by lower-case(($entry/lift:lexical-unit/lift:form/lift:text)[1]) empty least
            return $entry)
            
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
  ...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.parsers.lift_parser:lift_parser.py:154 Normalized XML: <lift><entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="seed_app_001" dateCreated="2024...
DEBUG    app.services.dictionary_service:dictionary_service.py:1026 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:761 [UPDATE_ENTRY] Received skip_validation=True, draft=False, skip_bidirectional=False
INFO     app.services.dictionary_service:dictionary_service.py:768 [UPDATE_ENTRY] Skipping validation as requested
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="target_entry_001"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.services.dictionary_service:dictionary_service.py:667 Raw query result: <entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="target_entry_001"><lexical-unit><form lang="en"><text>sport</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_target_001"><definition><form lang="en"><text>Physical activity</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="target_entry_001"><lexical-unit><form lang="en"><text>sport</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_target_001"><definition><form lang="en"><text>Physical activity</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="target_entry_001"><lexical-unit><form lang="en"><text>sport</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_target_001"><definition><form lang="en"><text>Physical activity</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="target_entry_001"><lexical-unit><form lang="en"><text>sport</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_target_001"><definition><form lang="en"><text>Physical activity</text></form></definition></sense></entry>
DEBUG    app.parsers.lift_parser:lift_parser.py:154 Normalized XML: <lift xmlns="http://fieldworks.sil.org/schemas/lift/0.13" xmlns:lift="http://fieldworks.sil.org/sche...
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="main_entry_001"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.services.dictionary_service:dictionary_service.py:667 Raw query result: <entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
DEBUG    app.parsers.lift_parser:lift_parser.py:154 Normalized XML: <lift xmlns="http://fieldworks.sil.org/schemas/lift/0.13" xmlns:lift="http://fieldworks.sil.org/sche...
DEBUG    app.services.dictionary_service:dictionary_service.py:1026 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:761 [UPDATE_ENTRY] Received skip_validation=True, draft=False, skip_bidirectional=True
INFO     app.services.dictionary_service:dictionary_service.py:768 [UPDATE_ENTRY] Skipping validation as requested
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="main_entry_001"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.services.dictionary_service:dictionary_service.py:667 Raw query result: <entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition></sense></entry>
DEBUG    app.parsers.lift_parser:lift_parser.py:154 Normalized XML: <lift xmlns="http://fieldworks.sil.org/schemas/lift/0.13" xmlns:lift="http://fieldworks.sil.org/sche...
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_cf5030
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_cf5030)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0015_unit_cf5030' after update
INFO     app.services.dictionary_service:dictionary_service.py:851 Added reverse relation 'synonim' from 'main_entry_001' to 'target_entry_001'
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_cf5030
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_cf5030)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0015_unit_cf5030' after update
INFO     app.services.dictionary_service:dictionary_service.py:891 Added reverse sense relation 'synonim' to entry 'target_entry_001' for sense relation from 'main_entry_001'
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_cf5030
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_cf5030)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0015_unit_cf5030' after update
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="main_entry_001"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.services.dictionary_service:dictionary_service.py:3361 Raw query result: <entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition><relation type="synonim" ref="sense_target_001"/></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition><relation type="synonim" ref="sense_target_001"/></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition><relation type="synonim" ref="sense_target_001"/></sense></entry>
<entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="main_entry_001"><lexical-unit><form lang="en"><text>basketball</text></form></lexical-unit><trait name="morph-type" value="stem"/><sense id="sense_main_001"><definition><form lang="en"><text>A sport played with a ball and hoops</text></form></definition><relation type="synonim" ref="sense_target_001"/></sense></entry>
DEBUG    app.parsers.lift_parser:lift_parser.py:154 Normalized XML: <lift xmlns="http://fieldworks.sil.org/schemas/lift/0.13" xmlns:lift="http://fieldworks.sil.org/sche...
DEBUG    app.services.dictionary_service:dictionary_service.py:1026 Returning cached LIFT ranges.
DEBUG    app.services.dictionary_service:dictionary_service.py:1111 list_entries called with: limit=None, offset=0, sort_by=lexical_unit, sort_order=asc, filter_text=
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
             count(collection('test_20251224_0015_unit_cf5030')//lift:entry)
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.services.dictionary_service:dictionary_service.py:1130 Database connection status: True
DEBUG    app.services.dictionary_service:dictionary_service.py:1133 Using database: test_20251224_0015_unit_cf5030
DEBUG    app.services.dictionary_service:dictionary_service.py:1226 Constructed query for list_entries: 
            
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
            (for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry
            order by lower-case(($entry/lift:lexical-unit/lift:form/lift:text)[1]) empty least
            return $entry)
            
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
            (for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry
            order by lower-case(($entry/lift:lexical-unit/lift:form/lift:text)[1]) empty least
            return $entry)
            
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
  ...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.parsers.lift_parser:lift_parser.py:154 Normalized XML: <lift><entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="seed_app_001" dateCreated="2024...
INFO     app.database.basex_connector:basex_connector.py:177 Query references DB 'dictionary' which differs from connector DB 'test_20251224_0015_unit_cf5030'; switching session DB temporarily
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

                for $entry in collection('dictionary')//entry
                where $entry/relation[@type='_component-lexeme' and @ref='main_entry_001']
                return $entry
            
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
                for $entry in collection('dictionary')//entry
                where $entry/relation...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.services.dictionary_service:dictionary_service.py:1111 list_entries called with: limit=None, offset=0, sort_by=lexical_unit, sort_order=asc, filter_text=
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
             count(collection('test_20251224_0015_unit_cf5030')//lift:entry)
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.services.dictionary_service:dictionary_service.py:1130 Database connection status: True
DEBUG    app.services.dictionary_service:dictionary_service.py:1133 Using database: test_20251224_0015_unit_cf5030
DEBUG    app.services.dictionary_service:dictionary_service.py:1226 Constructed query for list_entries: 
            
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
            (for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry
            order by lower-case(($entry/lift:lexical-unit/lift:form/lift:text)[1]) empty least
            return $entry)
            
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
            (for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry
            order by lower-case(($entry/lift:lexical-unit/lift:form/lift:text)[1]) empty least
            return $entry)
            
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
  ...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
DEBUG    app.parsers.lift_parser:lift_parser.py:154 Normalized XML: <lift><entry xmlns="http://fieldworks.sil.org/schemas/lift/0.13" id="seed_app_001" dateCreated="2024...
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_cf5030')//lift:entry[@id="main_entry_001"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_cf5030' after query
INFO     app.services.css_mapping_service:css_mapping_service.py:345 [CSS Service] Rendering entry, XML length: 1531
INFO     app.services.css_mapping_service:css_mapping_service.py:346 [CSS Service] Profile: Default Display Profile
INFO     app.services.css_mapping_service:css_mapping_service.py:347 [CSS Service] Dict service available: True
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
DEBUG    app.services.css_mapping_service:css_mapping_service.py:666 Could not replace range values with abbreviations: junk after document element: line 2, column 0
DEBUG    app.services.css_mapping_service:css_mapping_service.py:792 Could not resolve relation references: junk after document element: line 2, column 0
DEBUG    app.services.css_mapping_service:css_mapping_service.py:506 Could not extract entry-level PoS: junk after document element: line 2, column 0
INFO     app.services.css_mapping_service:css_mapping_service.py:397 [CSS Service] Transformer output length: 125
WARNING  app.services.css_mapping_service:css_mapping_service.py:411 Failed to count senses in entry: junk after document element: line 2, column 0
---------------------------- Captured log teardown -----------------------------
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
ERROR    app.database.basex_connector:basex_connector.py:291 Command execution failed: Database 'test_20251224_0015_unit_cf5030' is opened by another process.

ERROR    app.database.basex_connector:basex_connector.py:397 Failed to drop database 'test_20251224_0015_unit_cf5030': Command execution failed: Database 'test_20251224_0015_unit_cf5030' is opened by another process.

WARNING  parent_conftest:conftest.py:228 Failed to drop test database test_20251224_0015_unit_cf5030: Failed to drop database 'test_20251224_0015_unit_cf5030': Command execution failed: Database 'test_20251224_0015_unit_cf5030' is opened by another process.

DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
_______________ test_grammatical_info_search_with_dynamic_types ________________
tests/integration/test_cross_reference_functionality.py:186: in test_grammatical_info_search_with_dynamic_types
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <WrapperTestResponse streamed [404 NOT FOUND]>.status_code
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpfz3fh77x.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpa_7_fiwx.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpzs83yza4.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------

DEBUG: get_range hit for grammatical-info
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
___________________ test_workset_creation_with_complex_query ___________________
tests/integration/test_cross_reference_functionality.py:225: in test_workset_creation_with_complex_query
    assert grammar_resp.status_code == 200
E   assert 404 == 200
E    +  where 404 = <WrapperTestResponse streamed [404 NOT FOUND]>.status_code
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpbqz9_2a7.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmps31i8x_8.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpeopq7ib2.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------

DEBUG: get_range hit for lexical-relation
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']

DEBUG: get_range hit for variant-type
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']

DEBUG: get_range hit for grammatical-info
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
            <root>{
              collection('test_20251224_0013_session_b260c9')//lift:relation[lift:trait[@name='variant-type']]
              |
              collection('test_20251224_0013_session_b260c9')//lift:variant[lift:trait[@name='type']]
            }</root>
            
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
_________________ test_ranges_api_provides_all_necessary_types _________________
tests/integration/test_cross_reference_functionality.py:294: in test_ranges_api_provides_all_necessary_types
    assert expected_range in ranges, f"Missing expected range: {expected_range}"
E   AssertionError: Missing expected range: grammatical-info
E   assert 'grammatical-info' in {'lexical-relation': {'config_type': 'lexical-relation', 'description': {'en': 'Types of lexical relationships between entries'}, 'fieldworks_standard': True, 'guid': 'lexical-relation-default', ...}}
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpit40ikc_.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp5g7q8m_c.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpul7xyrkw.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
________________ TestCSSFiltering.test_relation_filter_exclude _________________
tests/integration/test_css_filtering.py:48: in test_relation_filter_exclude
    assert "synonym" in html
E   assert 'synonym' in '<div class="lift-entry-rendered profile-exclude-test"><span class="lexical-unit"></span> <span class="relation">syn e3, ant e4</span></div>'
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp82uciilf.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpm8t0yinp.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpex0cymtf.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
INFO     app.services.css_mapping_service:css_mapping_service.py:345 [CSS Service] Rendering entry, XML length: 744
INFO     app.services.css_mapping_service:css_mapping_service.py:346 [CSS Service] Profile: Exclude Test
INFO     app.services.css_mapping_service:css_mapping_service.py:347 [CSS Service] Dict service available: False
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
DEBUG    app.services.css_mapping_service:css_mapping_service.py:711 Resolving relation ref e2 as entry in database test_20251224_0013_session_b260c9
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0013_session_b260c9')//lift:entry[@id="e2"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.services.css_mapping_service:css_mapping_service.py:733 Not found as entry, trying as sense ID: e2
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

                                declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
                                for $sense in collection('test_20251224_0013_session_b260c9')//lift:sense[@id="e2"]
                                let $entry := $sense/ancestor::lift:entry
                                return $entry
                                
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
                                declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0....
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.services.css_mapping_service:css_mapping_service.py:711 Resolving relation ref e3 as entry in database test_20251224_0013_session_b260c9
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0013_session_b260c9')//lift:entry[@id="e3"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.services.css_mapping_service:css_mapping_service.py:733 Not found as entry, trying as sense ID: e3
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

                                declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
                                for $sense in collection('test_20251224_0013_session_b260c9')//lift:sense[@id="e3"]
                                let $entry := $sense/ancestor::lift:entry
                                return $entry
                                
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
                                declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0....
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.services.css_mapping_service:css_mapping_service.py:711 Resolving relation ref e4 as entry in database test_20251224_0013_session_b260c9
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0013_session_b260c9')//lift:entry[@id="e4"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.services.css_mapping_service:css_mapping_service.py:733 Not found as entry, trying as sense ID: e4
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

                                declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
                                for $sense in collection('test_20251224_0013_session_b260c9')//lift:sense[@id="e4"]
                                let $entry := $sense/ancestor::lift:entry
                                return $entry
                                
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
                                declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0....
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
INFO     app.services.css_mapping_service:css_mapping_service.py:397 [CSS Service] Transformer output length: 79
________________ TestCSSFiltering.test_relation_filter_include _________________
tests/integration/test_css_filtering.py:62: in test_relation_filter_include
    assert "synonym" in html
E   assert 'synonym' in '<div class="lift-entry-rendered profile-include-test"><span class="lexical-unit"></span></div>'
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpuvbdnm4t.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpbowoywi1.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpslhfsx6h.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
INFO     app.services.css_mapping_service:css_mapping_service.py:345 [CSS Service] Rendering entry, XML length: 744
INFO     app.services.css_mapping_service:css_mapping_service.py:346 [CSS Service] Profile: Include Test
INFO     app.services.css_mapping_service:css_mapping_service.py:347 [CSS Service] Dict service available: False
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
DEBUG    app.services.css_mapping_service:css_mapping_service.py:711 Resolving relation ref e2 as entry in database test_20251224_0013_session_b260c9
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0013_session_b260c9')//lift:entry[@id="e2"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.services.css_mapping_service:css_mapping_service.py:733 Not found as entry, trying as sense ID: e2
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

                                declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
                                for $sense in collection('test_20251224_0013_session_b260c9')//lift:sense[@id="e2"]
                                let $entry := $sense/ancestor::lift:entry
                                return $entry
                                
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
                                declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0....
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.services.css_mapping_service:css_mapping_service.py:711 Resolving relation ref e3 as entry in database test_20251224_0013_session_b260c9
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0013_session_b260c9')//lift:entry[@id="e3"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.services.css_mapping_service:css_mapping_service.py:733 Not found as entry, trying as sense ID: e3
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

                                declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
                                for $sense in collection('test_20251224_0013_session_b260c9')//lift:sense[@id="e3"]
                                let $entry := $sense/ancestor::lift:entry
                                return $entry
                                
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
                                declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0....
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.services.css_mapping_service:css_mapping_service.py:711 Resolving relation ref e4 as entry in database test_20251224_0013_session_b260c9
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0013_session_b260c9')//lift:entry[@id="e4"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.services.css_mapping_service:css_mapping_service.py:733 Not found as entry, trying as sense ID: e4
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

                                declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
                                for $sense in collection('test_20251224_0013_session_b260c9')//lift:sense[@id="e4"]
                                let $entry := $sense/ancestor::lift:entry
                                return $entry
                                
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
                                declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0....
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
INFO     app.services.css_mapping_service:css_mapping_service.py:397 [CSS Service] Transformer output length: 34
________ TestCSSRelationResolution.test_multiple_relations_all_resolved ________
tests/integration/test_css_relation_resolution.py:195: in test_multiple_relations_all_resolved
    assert 'ant' in html  # Antonym shows as abbreviation by default
E   assert 'ant' in '<div class="lift-entry-rendered profile-test-profile"><span class="headword lexical-unit"></span> <span class="trait" data-trait-name="morph-type">stem</span> <div class="sense"><span class="relation">Synonym fast, Antonym slow</span></div></div>'
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpbqpafiss.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpspif1vis.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpmu3w3av4.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_20251224_0015_unit_85e5a7
INFO     app.database.basex_connector:basex_connector.py:379 Database 'test_20251224_0015_unit_85e5a7' created successfully
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_85e5a7
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_85e5a7)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD /tmp/tmpc59umecp.xml
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD /tmp/tmpgg0di43h.xml
INFO     app.services.dictionary_service:dictionary_service.py:103 Skipping BaseX connection during tests
----------------------------- Captured stdout call -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            exists(collection('test_20251224_0015_unit_85e5a7')//lift:lift)
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            exists(collectio...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_85e5a7' after query
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        exists(collection('test_20251224_0015_unit_85e5a7')//lift:entry[@id="synonym_entry"])
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_85e5a7' after query
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_85e5a7
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_85e5a7)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0015_unit_85e5a7' after update
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        exists(collection('test_20251224_0015_unit_85e5a7')//lift:entry[@id="antonym_entry"])
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_85e5a7' after query
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_85e5a7
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_85e5a7)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0015_unit_85e5a7' after update
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        exists(collection('test_20251224_0015_unit_85e5a7')//lift:entry[@id="multi_relation_entry"])
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_85e5a7' after query
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0015_unit_85e5a7
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0015_unit_85e5a7)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0015_unit_85e5a7' after update
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_85e5a7')//lift:entry[@id="multi_relation_entry"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_85e5a7' after query
INFO     app.services.css_mapping_service:css_mapping_service.py:345 [CSS Service] Rendering entry, XML length: 399
INFO     app.services.css_mapping_service:css_mapping_service.py:346 [CSS Service] Profile: Test Profile
INFO     app.services.css_mapping_service:css_mapping_service.py:347 [CSS Service] Dict service available: True
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
DEBUG    app.services.css_mapping_service:css_mapping_service.py:711 Resolving relation ref synonym_entry as entry in database test_20251224_0015_unit_85e5a7
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_85e5a7')//lift:entry[@id="synonym_entry"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_85e5a7' after query
DEBUG    app.services.css_mapping_service:css_mapping_service.py:781 Resolved synonym_entry to: fast
DEBUG    app.services.css_mapping_service:css_mapping_service.py:711 Resolving relation ref antonym_entry as entry in database test_20251224_0015_unit_85e5a7
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        for $entry in collection('test_20251224_0015_unit_85e5a7')//lift:entry[@id="antonym_entry"]
        return $entry
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            dec...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0015_unit_85e5a7' after query
DEBUG    app.services.css_mapping_service:css_mapping_service.py:781 Resolved antonym_entry to: slow
INFO     app.services.css_mapping_service:css_mapping_service.py:397 [CSS Service] Transformer output length: 186
---------------------------- Captured log teardown -----------------------------
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_20251224_0015_unit_85e5a7
INFO     app.database.basex_connector:basex_connector.py:394 Database 'test_20251224_0015_unit_85e5a7' dropped successfully
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
_________________ TestDatabaseDrop.test_drop_database_content __________________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c

During handling of the above exception, another exception occurred:
app/services/dictionary_service.py:1763: in count_entries
    result = self.db_connector.execute_query(query)
app/database/basex_connector.py:165: in execute_query
    self.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c

The above exception was the direct cause of the following exception:
tests/integration/test_database_drop_integration.py:110: in test_drop_database_content
    initial_count = dict_service_with_data.count_entries()
app/services/dictionary_service.py:1769: in count_entries
    raise DatabaseError(f"Failed to count entries: {e}") from e
E   app.utils.exceptions.DatabaseError: Failed to count entries: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp03uhalrh.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpb03hela0.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpt19vjsb2.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:103 Skipping BaseX connection during tests
INFO     app.services.dictionary_service:dictionary_service.py:158 Initializing database 'test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c' from LIFT file: /tmp/tmp3i5wvina.lift
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
INFO     app.services.dictionary_service:dictionary_service.py:176 Dropping existing database: test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: OPEN test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:209 Creating new database 'test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c' from /tmp/tmp3i5wvina.lift
INFO     app.services.dictionary_service:dictionary_service.py:212 Using absolute path: /tmp/tmp3i5wvina.lift
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c "/tmp/tmp3i5wvina.lift"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: OPEN test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c
DEBUG    app.services.dictionary_service:dictionary_service.py:359 Using recommended ranges from config: config/recommended_ranges.lift-ranges
INFO     app.services.dictionary_service:dictionary_service.py:241 Adding LIFT ranges file to database: config/recommended_ranges.lift-ranges (size=27 bytes)
INFO     app.services.dictionary_service:dictionary_service.py:243 Using absolute path for ranges: /mnt/d/Dokumenty/slownik-wielki/flask-app/config/recommended_ranges.lift-ranges
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/mnt/d/Dokumenty/slownik-wielki/flask-app/config/recommended_ranges.lift-ranges"
INFO     app.services.dictionary_service:dictionary_service.py:247 LIFT ranges file added successfully via admin connector
INFO     app.database.basex_connector:basex_connector.py:177 Query references DB 'test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c' which differs from connector DB 'None'; switching session DB temporarily
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
xquery exists(collection('test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c')//lift-ranges)
ERROR    app.database.basex_connector:basex_connector.py:202 Query execution failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
Query was:
xquery exists(collection('test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c')//lift-ranges)
WARNING  app.database.basex_connector:basex_connector.py:211 Referenced DB 'test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c' not found; trying substitution to TEST_DB_NAME 'test_20251224_0013_session_b260c9'
ERROR    app.database.basex_connector:basex_connector.py:221 Substitution retry failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
WARNING  app.services.dictionary_service:dictionary_service.py:257 Failed to verify ranges after initialization: Query execution failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
Query was:
xquery exists(collection('test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c')//lift-ranges)
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:278 Database initialization complete
INFO     app.services.dictionary_service:dictionary_service.py:280 Database initialization complete
------------------------------ Captured log call -------------------------------
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c
WARNING  app.services.dictionary_service:dictionary_service.py:3413 Error detecting namespace usage: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c
ERROR    app.services.dictionary_service:dictionary_service.py:1768 Error counting entries: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c
Traceback (most recent call last):
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 82, in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/services/dictionary_service.py", line 1763, in count_entries
    result = self.db_connector.execute_query(query)
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 165, in execute_query
    self.connect()
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 95, in connect
    raise DatabaseError(f"Connection failed: {e}")
app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c
---------------------------- Captured log teardown -----------------------------
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_drop_674bf658_ec0c_409c_8e88_9a4faacf668c
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
_________________ TestDatabaseDrop.test_drop_and_reinitialize __________________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380

During handling of the above exception, another exception occurred:
app/services/dictionary_service.py:1763: in count_entries
    result = self.db_connector.execute_query(query)
app/database/basex_connector.py:165: in execute_query
    self.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380

The above exception was the direct cause of the following exception:
tests/integration/test_database_drop_integration.py:124: in test_drop_and_reinitialize
    initial_count = dict_service_with_data.count_entries()
app/services/dictionary_service.py:1769: in count_entries
    raise DatabaseError(f"Failed to count entries: {e}") from e
E   app.utils.exceptions.DatabaseError: Failed to count entries: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpd52ccbst.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpfblm6t1b.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmps6ctc5c1.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:103 Skipping BaseX connection during tests
INFO     app.services.dictionary_service:dictionary_service.py:158 Initializing database 'test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380' from LIFT file: /tmp/tmpuyib4rkb.lift
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
INFO     app.services.dictionary_service:dictionary_service.py:176 Dropping existing database: test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: OPEN test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:209 Creating new database 'test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380' from /tmp/tmpuyib4rkb.lift
INFO     app.services.dictionary_service:dictionary_service.py:212 Using absolute path: /tmp/tmpuyib4rkb.lift
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380 "/tmp/tmpuyib4rkb.lift"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: OPEN test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380
DEBUG    app.services.dictionary_service:dictionary_service.py:359 Using recommended ranges from config: config/recommended_ranges.lift-ranges
INFO     app.services.dictionary_service:dictionary_service.py:241 Adding LIFT ranges file to database: config/recommended_ranges.lift-ranges (size=27 bytes)
INFO     app.services.dictionary_service:dictionary_service.py:243 Using absolute path for ranges: /mnt/d/Dokumenty/slownik-wielki/flask-app/config/recommended_ranges.lift-ranges
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/mnt/d/Dokumenty/slownik-wielki/flask-app/config/recommended_ranges.lift-ranges"
INFO     app.services.dictionary_service:dictionary_service.py:247 LIFT ranges file added successfully via admin connector
INFO     app.database.basex_connector:basex_connector.py:177 Query references DB 'test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380' which differs from connector DB 'None'; switching session DB temporarily
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
xquery exists(collection('test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380')//lift-ranges)
ERROR    app.database.basex_connector:basex_connector.py:202 Query execution failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
Query was:
xquery exists(collection('test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380')//lift-ranges)
WARNING  app.database.basex_connector:basex_connector.py:211 Referenced DB 'test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380' not found; trying substitution to TEST_DB_NAME 'test_20251224_0013_session_b260c9'
ERROR    app.database.basex_connector:basex_connector.py:221 Substitution retry failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
WARNING  app.services.dictionary_service:dictionary_service.py:257 Failed to verify ranges after initialization: Query execution failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
Query was:
xquery exists(collection('test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380')//lift-ranges)
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:278 Database initialization complete
INFO     app.services.dictionary_service:dictionary_service.py:280 Database initialization complete
------------------------------ Captured log call -------------------------------
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380
WARNING  app.services.dictionary_service:dictionary_service.py:3413 Error detecting namespace usage: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380
ERROR    app.services.dictionary_service:dictionary_service.py:1768 Error counting entries: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380
Traceback (most recent call last):
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 82, in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/services/dictionary_service.py", line 1763, in count_entries
    result = self.db_connector.execute_query(query)
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 165, in execute_query
    self.connect()
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 95, in connect
    raise DatabaseError(f"Connection failed: {e}")
app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380
---------------------------- Captured log teardown -----------------------------
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_drop_72ccc1f5_d17f_4e2e_b4e9_b070d8c44380
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
__________ TestDatabaseDrop.test_drop_database_content_multiple_times __________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82

During handling of the above exception, another exception occurred:
app/services/dictionary_service.py:1763: in count_entries
    result = self.db_connector.execute_query(query)
app/database/basex_connector.py:165: in execute_query
    self.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82

The above exception was the direct cause of the following exception:
tests/integration/test_database_drop_integration.py:176: in test_drop_database_content_multiple_times
    count = dict_service_with_data.count_entries()
app/services/dictionary_service.py:1769: in count_entries
    raise DatabaseError(f"Failed to count entries: {e}") from e
E   app.utils.exceptions.DatabaseError: Failed to count entries: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpu61ru785.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmphfg1exao.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpv5hffbxv.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:103 Skipping BaseX connection during tests
INFO     app.services.dictionary_service:dictionary_service.py:158 Initializing database 'test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82' from LIFT file: /tmp/tmp9krw0i7l.lift
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
INFO     app.services.dictionary_service:dictionary_service.py:176 Dropping existing database: test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: OPEN test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:209 Creating new database 'test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82' from /tmp/tmp9krw0i7l.lift
INFO     app.services.dictionary_service:dictionary_service.py:212 Using absolute path: /tmp/tmp9krw0i7l.lift
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82 "/tmp/tmp9krw0i7l.lift"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: OPEN test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
DEBUG    app.services.dictionary_service:dictionary_service.py:359 Using recommended ranges from config: config/recommended_ranges.lift-ranges
INFO     app.services.dictionary_service:dictionary_service.py:241 Adding LIFT ranges file to database: config/recommended_ranges.lift-ranges (size=27 bytes)
INFO     app.services.dictionary_service:dictionary_service.py:243 Using absolute path for ranges: /mnt/d/Dokumenty/slownik-wielki/flask-app/config/recommended_ranges.lift-ranges
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/mnt/d/Dokumenty/slownik-wielki/flask-app/config/recommended_ranges.lift-ranges"
INFO     app.services.dictionary_service:dictionary_service.py:247 LIFT ranges file added successfully via admin connector
INFO     app.database.basex_connector:basex_connector.py:177 Query references DB 'test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82' which differs from connector DB 'None'; switching session DB temporarily
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
xquery exists(collection('test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82')//lift-ranges)
ERROR    app.database.basex_connector:basex_connector.py:202 Query execution failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
Query was:
xquery exists(collection('test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82')//lift-ranges)
WARNING  app.database.basex_connector:basex_connector.py:211 Referenced DB 'test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82' not found; trying substitution to TEST_DB_NAME 'test_20251224_0013_session_b260c9'
ERROR    app.database.basex_connector:basex_connector.py:221 Substitution retry failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
WARNING  app.services.dictionary_service:dictionary_service.py:257 Failed to verify ranges after initialization: Query execution failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
Query was:
xquery exists(collection('test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82')//lift-ranges)
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:278 Database initialization complete
INFO     app.services.dictionary_service:dictionary_service.py:280 Database initialization complete
------------------------------ Captured log call -------------------------------
INFO     app.services.dictionary_service:dictionary_service.py:486 Dropping and recreating database: test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
INFO     app.services.dictionary_service:dictionary_service.py:503 Closed current database session
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
INFO     app.services.dictionary_service:dictionary_service.py:516 Attempt 1: Dropping database: test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
INFO     app.services.dictionary_service:dictionary_service.py:518 Successfully dropped database
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
INFO     app.services.dictionary_service:dictionary_service.py:598 Successfully created empty database
INFO     app.services.dictionary_service:dictionary_service.py:609 Successfully recreated empty database
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
WARNING  app.services.dictionary_service:dictionary_service.py:3413 Error detecting namespace usage: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
ERROR    app.services.dictionary_service:dictionary_service.py:1768 Error counting entries: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
Traceback (most recent call last):
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 82, in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/services/dictionary_service.py", line 1763, in count_entries
    result = self.db_connector.execute_query(query)
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 165, in execute_query
    self.connect()
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 95, in connect
    raise DatabaseError(f"Connection failed: {e}")
app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
---------------------------- Captured log teardown -----------------------------
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_drop_b935f2a3_ceb5_4277_809d_71d814c22f82
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
___________ TestDisplayAspectIntegration.test_variant_display_aspect ___________
tests/integration/test_display_aspect_integration.py:162: in test_variant_display_aspect
    assert 'Spelling' in html_label or 'spelling' in html_label
E   assert ('Spelling' in '<div class="lift-entry-rendered profile-variant-test"><div class=\'entry-empty\'>No content to display</div></div>' or 'spelling' in '<div class="lift-entry-rendered profile-variant-test"><div class=\'entry-empty\'>No content to display</div></div>')
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp5i471h4c.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp1kvxhhg2.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp3qj2tbwy.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.services.dictionary_service:dictionary_service.py:103 Skipping BaseX connection during tests
INFO     app.services.backup_scheduler:backup_scheduler.py:50 Backup scheduler started
----------------------------- Captured stdout call -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: None

DEBUG: get_ranges using db_name: test_20251224_0013_session_b260c9
DEBUG: ranges_xml length: 14
DEBUG: LIFTRangesParser.parse_string called with XML length 14
DEBUG: _parse_ranges returned 0 results
DEBUG: parsed_ranges keys: []
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
INFO     app.services.css_mapping_service:css_mapping_service.py:345 [CSS Service] Rendering entry, XML length: 355
INFO     app.services.css_mapping_service:css_mapping_service.py:346 [CSS Service] Profile: Variant Test
INFO     app.services.css_mapping_service:css_mapping_service.py:347 [CSS Service] Dict service available: False
DEBUG    app.services.dictionary_service:dictionary_service.py:2668 Querying for ranges using collection('test_20251224_0013_session_b260c9')//lift-ranges
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
collection('test_20251224_0013_session_b260c9')//lift-ranges
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: collection('test_20251224_0013_session_b260c9')//lift-ranges...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.services.dictionary_service:dictionary_service.py:2675 Found ranges document using collection() query
WARNING  app.services.dictionary_service:dictionary_service.py:2761 lexical-relation not found in parsed ranges, adding default
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.css_mapping_service:css_mapping_service.py:397 [CSS Service] Transformer output length: 52
___________________________ test_ranges_api_endpoint ___________________________
tests/integration/test_dynamic_ranges.py:29: in test_ranges_api_endpoint
    assert 'grammatical-info' in ranges
E   AssertionError: assert 'grammatical-info' in {'lexical-relation': {'config_type': 'lexical-relation', 'description': {'en': 'Types of lexical relationships between entries'}, 'fieldworks_standard': True, 'guid': 'lexical-relation-default', ...}}
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmptn01fxj4.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp91jfqpz_.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpj4ybqued.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
_________________________ test_lexical_relation_range __________________________
tests/integration/test_dynamic_ranges.py:63: in test_lexical_relation_range
    assert all('id' in rt and 'value' in rt for rt in relation_types)
E   assert False
E    +  where False = all(<generator object test_lexical_relation_range.<locals>.<genexpr> at 0x7282c038f920>)
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp_k_q7pef.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp_gkb440w.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpkp6dv5zv.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------

DEBUG: get_range hit for lexical-relation
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
________________ TestEntryFormLoading.test_ranges_api_available ________________
tests/integration/test_entry_form_loads.py:64: in test_ranges_api_available
    assert semantic_range_key is not None, f"No semantic domain range found in: {list(ranges.keys())}"
E   AssertionError: No semantic domain range found in: ['lexical-relation']
E   assert None is not None
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpj8rgryjw.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpocbqhbgw.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp7rmzxij9.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
______________ TestExporterIntegration.test_empty_database_export ______________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_empty_export_710ea283

During handling of the above exception, another exception occurred:
tests/integration/test_exporter_integration.py:513: in test_empty_database_export
    connector.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_empty_export_710ea283
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpa0ebvff1.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmps8819q1q.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpubjoka7e.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
------------------------------ Captured log call -------------------------------
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_empty_export_710ea283
INFO     app.database.basex_connector:basex_connector.py:379 Database 'test_empty_export_710ea283' created successfully
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_empty_export_710ea283
__________ TestFlaskSearchEndpoint.test_search_endpoint_with_results ___________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d

During handling of the above exception, another exception occurred:
app/services/dictionary_service.py:1464: in search_entries
    count_result = self.db_connector.execute_query(count_query)
app/database/basex_connector.py:165: in execute_query
    self.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d

The above exception was the direct cause of the following exception:
tests/integration/test_flask_search_endpoint.py:131: in test_search_endpoint_with_results
    entries, total = dict_service.search_entries("test")
app/services/dictionary_service.py:1531: in search_entries
    raise DatabaseError(f"Failed to search entries: {str(e)}") from e
E   app.utils.exceptions.DatabaseError: Failed to search entries: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpuej03bpq.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpjyot4bnz.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpgi9mixuy.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:103 Skipping BaseX connection during tests
INFO     app.services.backup_scheduler:backup_scheduler.py:50 Backup scheduler started
INFO     app.services.dictionary_service:dictionary_service.py:103 Skipping BaseX connection during tests
INFO     app.services.dictionary_service:dictionary_service.py:158 Initializing database 'test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d' from LIFT file: /tmp/tmpqphbmgzi.lift
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
INFO     app.services.dictionary_service:dictionary_service.py:176 Dropping existing database: test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: OPEN test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:209 Creating new database 'test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d' from /tmp/tmpqphbmgzi.lift
INFO     app.services.dictionary_service:dictionary_service.py:212 Using absolute path: /tmp/tmpqphbmgzi.lift
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d "/tmp/tmpqphbmgzi.lift"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: OPEN test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d
DEBUG    app.services.dictionary_service:dictionary_service.py:359 Using recommended ranges from config: config/recommended_ranges.lift-ranges
INFO     app.services.dictionary_service:dictionary_service.py:241 Adding LIFT ranges file to database: config/recommended_ranges.lift-ranges (size=27 bytes)
INFO     app.services.dictionary_service:dictionary_service.py:243 Using absolute path for ranges: /mnt/d/Dokumenty/slownik-wielki/flask-app/config/recommended_ranges.lift-ranges
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/mnt/d/Dokumenty/slownik-wielki/flask-app/config/recommended_ranges.lift-ranges"
INFO     app.services.dictionary_service:dictionary_service.py:247 LIFT ranges file added successfully via admin connector
INFO     app.database.basex_connector:basex_connector.py:177 Query references DB 'test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d' which differs from connector DB 'None'; switching session DB temporarily
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
xquery exists(collection('test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d')//lift-ranges)
ERROR    app.database.basex_connector:basex_connector.py:202 Query execution failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
Query was:
xquery exists(collection('test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d')//lift-ranges)
WARNING  app.database.basex_connector:basex_connector.py:211 Referenced DB 'test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d' not found; trying substitution to TEST_DB_NAME 'test_20251224_0013_session_b260c9'
ERROR    app.database.basex_connector:basex_connector.py:221 Substitution retry failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
WARNING  app.services.dictionary_service:dictionary_service.py:257 Failed to verify ranges after initialization: Query execution failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
Query was:
xquery exists(collection('test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d')//lift-ranges)
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:278 Database initialization complete
INFO     app.services.dictionary_service:dictionary_service.py:280 Database initialization complete
------------------------------ Captured log call -------------------------------
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d
WARNING  app.services.dictionary_service:dictionary_service.py:3413 Error detecting namespace usage: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d
ERROR    app.services.dictionary_service:dictionary_service.py:1529 Error searching entries: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d
ERROR    app.services.dictionary_service:dictionary_service.py:1530 Traceback: Traceback (most recent call last):
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 82, in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/services/dictionary_service.py", line 1464, in search_entries
    count_result = self.db_connector.execute_query(count_query)
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 165, in execute_query
    self.connect()
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 95, in connect
    raise DatabaseError(f"Connection failed: {e}")
app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d
---------------------------- Captured log teardown -----------------------------
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_flask_search_837da585_e780_4a73_b6b2_b147ceb3641d
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
___________ TestFlaskSearchEndpoint.test_search_endpoint_pagination ____________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a

During handling of the above exception, another exception occurred:
app/services/dictionary_service.py:1464: in search_entries
    count_result = self.db_connector.execute_query(count_query)
app/database/basex_connector.py:165: in execute_query
    self.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a

The above exception was the direct cause of the following exception:
tests/integration/test_flask_search_endpoint.py:171: in test_search_endpoint_pagination
    _, total = dict_service.search_entries("test")
app/services/dictionary_service.py:1531: in search_entries
    raise DatabaseError(f"Failed to search entries: {str(e)}") from e
E   app.utils.exceptions.DatabaseError: Failed to search entries: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpjzeq0lgt.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp390sn0tz.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpe2065g0h.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:103 Skipping BaseX connection during tests
INFO     app.services.backup_scheduler:backup_scheduler.py:50 Backup scheduler started
INFO     app.services.dictionary_service:dictionary_service.py:103 Skipping BaseX connection during tests
INFO     app.services.dictionary_service:dictionary_service.py:158 Initializing database 'test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a' from LIFT file: /tmp/tmpdgxbju36.lift
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
INFO     app.services.dictionary_service:dictionary_service.py:176 Dropping existing database: test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: OPEN test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:209 Creating new database 'test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a' from /tmp/tmpdgxbju36.lift
INFO     app.services.dictionary_service:dictionary_service.py:212 Using absolute path: /tmp/tmpdgxbju36.lift
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a "/tmp/tmpdgxbju36.lift"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: OPEN test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a
DEBUG    app.services.dictionary_service:dictionary_service.py:359 Using recommended ranges from config: config/recommended_ranges.lift-ranges
INFO     app.services.dictionary_service:dictionary_service.py:241 Adding LIFT ranges file to database: config/recommended_ranges.lift-ranges (size=27 bytes)
INFO     app.services.dictionary_service:dictionary_service.py:243 Using absolute path for ranges: /mnt/d/Dokumenty/slownik-wielki/flask-app/config/recommended_ranges.lift-ranges
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/mnt/d/Dokumenty/slownik-wielki/flask-app/config/recommended_ranges.lift-ranges"
INFO     app.services.dictionary_service:dictionary_service.py:247 LIFT ranges file added successfully via admin connector
INFO     app.database.basex_connector:basex_connector.py:177 Query references DB 'test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a' which differs from connector DB 'None'; switching session DB temporarily
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
xquery exists(collection('test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a')//lift-ranges)
ERROR    app.database.basex_connector:basex_connector.py:202 Query execution failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
Query was:
xquery exists(collection('test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a')//lift-ranges)
WARNING  app.database.basex_connector:basex_connector.py:211 Referenced DB 'test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a' not found; trying substitution to TEST_DB_NAME 'test_20251224_0013_session_b260c9'
ERROR    app.database.basex_connector:basex_connector.py:221 Substitution retry failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
WARNING  app.services.dictionary_service:dictionary_service.py:257 Failed to verify ranges after initialization: Query execution failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
Query was:
xquery exists(collection('test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a')//lift-ranges)
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:278 Database initialization complete
INFO     app.services.dictionary_service:dictionary_service.py:280 Database initialization complete
------------------------------ Captured log call -------------------------------
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a
WARNING  app.services.dictionary_service:dictionary_service.py:3413 Error detecting namespace usage: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a
ERROR    app.services.dictionary_service:dictionary_service.py:1529 Error searching entries: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a
ERROR    app.services.dictionary_service:dictionary_service.py:1530 Traceback: Traceback (most recent call last):
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 82, in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/services/dictionary_service.py", line 1464, in search_entries
    count_result = self.db_connector.execute_query(count_query)
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 165, in execute_query
    self.connect()
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 95, in connect
    raise DatabaseError(f"Connection failed: {e}")
app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a
---------------------------- Captured log teardown -----------------------------
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_flask_search_6ac41518_6121_4399_8d10_eeea7dc1230a
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
________________ TestFlaskSearchEndpoint.test_direct_api_search ________________
app/database/basex_connector.py:82: in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
E   app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821

During handling of the above exception, another exception occurred:
app/services/dictionary_service.py:1464: in search_entries
    count_result = self.db_connector.execute_query(count_query)
app/database/basex_connector.py:165: in execute_query
    self.connect()
app/database/basex_connector.py:95: in connect
    raise DatabaseError(f"Connection failed: {e}")
E   app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821

The above exception was the direct cause of the following exception:
tests/integration/test_flask_search_endpoint.py:191: in test_direct_api_search
    entries, total = dict_service.search_entries("test")
app/services/dictionary_service.py:1531: in search_entries
    raise DatabaseError(f"Failed to search entries: {str(e)}") from e
E   app.utils.exceptions.DatabaseError: Failed to search entries: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp8c443lmc.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpbtue6dqa.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp06y44js0.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:103 Skipping BaseX connection during tests
INFO     app.services.backup_scheduler:backup_scheduler.py:50 Backup scheduler started
INFO     app.services.dictionary_service:dictionary_service.py:103 Skipping BaseX connection during tests
INFO     app.services.dictionary_service:dictionary_service.py:158 Initializing database 'test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821' from LIFT file: /tmp/tmp1pgh4c2_.lift
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: LIST
INFO     app.services.dictionary_service:dictionary_service.py:176 Dropping existing database: test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: OPEN test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CLOSE
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:209 Creating new database 'test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821' from /tmp/tmp1pgh4c2_.lift
INFO     app.services.dictionary_service:dictionary_service.py:212 Using absolute path: /tmp/tmp1pgh4c2_.lift
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821 "/tmp/tmp1pgh4c2_.lift"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: OPEN test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821
DEBUG    app.services.dictionary_service:dictionary_service.py:359 Using recommended ranges from config: config/recommended_ranges.lift-ranges
INFO     app.services.dictionary_service:dictionary_service.py:241 Adding LIFT ranges file to database: config/recommended_ranges.lift-ranges (size=27 bytes)
INFO     app.services.dictionary_service:dictionary_service.py:243 Using absolute path for ranges: /mnt/d/Dokumenty/slownik-wielki/flask-app/config/recommended_ranges.lift-ranges
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/mnt/d/Dokumenty/slownik-wielki/flask-app/config/recommended_ranges.lift-ranges"
INFO     app.services.dictionary_service:dictionary_service.py:247 LIFT ranges file added successfully via admin connector
INFO     app.database.basex_connector:basex_connector.py:177 Query references DB 'test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821' which differs from connector DB 'None'; switching session DB temporarily
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
xquery exists(collection('test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821')//lift-ranges)
ERROR    app.database.basex_connector:basex_connector.py:202 Query execution failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
Query was:
xquery exists(collection('test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821')//lift-ranges)
WARNING  app.database.basex_connector:basex_connector.py:211 Referenced DB 'test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821' not found; trying substitution to TEST_DB_NAME 'test_20251224_0013_session_b260c9'
ERROR    app.database.basex_connector:basex_connector.py:221 Substitution retry failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
WARNING  app.services.dictionary_service:dictionary_service.py:257 Failed to verify ranges after initialization: Query execution failed: Stopped at ., 1/9:
[XPST0003] Unexpected end of query: 'exists(collecti...'.
Query was:
xquery exists(collection('test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821')//lift-ranges)
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.services.dictionary_service:dictionary_service.py:278 Database initialization complete
INFO     app.services.dictionary_service:dictionary_service.py:280 Database initialization complete
------------------------------ Captured log call -------------------------------
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821
WARNING  app.services.dictionary_service:dictionary_service.py:3413 Error detecting namespace usage: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821
ERROR    app.database.basex_connector:basex_connector.py:93 Failed to connect to BaseX: Refusing to connect to potentially unsafe database in test mode: test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821
ERROR    app.services.dictionary_service:dictionary_service.py:1529 Error searching entries: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821
ERROR    app.services.dictionary_service:dictionary_service.py:1530 Traceback: Traceback (most recent call last):
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 82, in connect
    raise DatabaseError(f"Refusing to connect to potentially unsafe database in test mode: {self.database}")
app.utils.exceptions.DatabaseError: Refusing to connect to potentially unsafe database in test mode: test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/services/dictionary_service.py", line 1464, in search_entries
    count_result = self.db_connector.execute_query(count_query)
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 165, in execute_query
    self.connect()
  File "/mnt/d/Dokumenty/slownik-wielki/flask-app/app/database/basex_connector.py", line 95, in connect
    raise DatabaseError(f"Connection failed: {e}")
app.utils.exceptions.DatabaseError: Connection failed: Refusing to connect to potentially unsafe database in test mode: test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821
---------------------------- Captured log teardown -----------------------------
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_flask_search_e92457d5_cfe4_408d_a91f_b55e82ca1821
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
__________________ test_grammatical_info_has_full_lift_ranges __________________
tests/integration/test_full_ranges_integration.py:17: in test_grammatical_info_has_full_lift_ranges
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <WrapperTestResponse streamed [404 NOT FOUND]>.status_code
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpucwgzngy.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpf6zes_mv.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmphwnq3hv4.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------

DEBUG: get_range hit for grammatical-info
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
____________________ test_lexical_relation_types_available _____________________
tests/integration/test_full_ranges_integration.py:72: in test_lexical_relation_types_available
    assert 'value' in first_value
E   AssertionError: assert 'value' in {'abbrev': 'syn', 'id': 'synonym', 'label': 'Synonym'}
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpeetas96p.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp_9yzvkbo.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp39rebf6n.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------

DEBUG: get_range hit for lexical-relation
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
__________________________ test_all_ranges_available ___________________________
tests/integration/test_full_ranges_integration.py:128: in test_all_ranges_available
    assert core_range in available_ranges, f"Core range '{core_range}' missing. Available: {list(available_ranges)}"
E   AssertionError: Core range 'grammatical-info' missing. Available: ['lexical-relation']
E   assert 'grammatical-info' in {'lexical-relation'}
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpolzntl9h.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpxfcmapt5.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpug2p8jmb.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
______________________ test_entry_form_loads_lift_ranges _______________________
tests/integration/test_lift_ranges_integration.py:39: in test_entry_form_loads_lift_ranges
    assert 'grammatical-info' in ranges_dict, f"Expected 'grammatical-info' in ranges, got: {list(ranges_dict.keys())}"
E   AssertionError: Expected 'grammatical-info' in ranges, got: ['lexical-relation']
E   assert 'grammatical-info' in {'lexical-relation': {'config_type': 'lexical-relation', 'description': {'en': 'Types of lexical relationships between entries'}, 'fieldworks_standard': True, 'guid': 'lexical-relation-default', ...}}
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpetgf1aml.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpffllvjbi.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmprryas0bl.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: CREATE DB test_20251224_0017_unit_cbb825
INFO     app.database.basex_connector:basex_connector.py:379 Database 'test_20251224_0017_unit_cbb825' created successfully
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0017_unit_cbb825
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0017_unit_cbb825)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD /tmp/tmpngokizvd.xml
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD /tmp/tmpm_4sxc1h.xml
----------------------------- Captured stdout call -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
INFO     app.api.xml_entries:xml_entries.py:70 [XML API] Received CREATE request
DEBUG    app.api.xml_entries:xml_entries.py:71 [XML API] XML length: 355 characters
DEBUG    app.api.xml_entries:xml_entries.py:47 [XML API] Creating XMLEntryService with database: test_20251224_0013_session_b260c9
INFO     app.services.xml_entry_service:xml_entry_service.py:146 Detected namespace usage for 'test_20251224_0013_session_b260c9': True
INFO     app.services.xml_entry_service:xml_entry_service.py:182 Successfully connected to BaseX database 'test_20251224_0013_session_b260c9'
INFO     app.services.xml_entry_service:xml_entry_service.py:269 Creating entry: test_entry_10b1b373
DEBUG    app.services.xml_entry_service:xml_entry_service.py:629 entry_exists check for 'test_entry_10b1b373': result='false'
INFO     app.services.xml_entry_service:xml_entry_service.py:287 Creating entry test_entry_10b1b373
DEBUG    app.services.xml_entry_service:xml_entry_service.py:294 Executing insert query for entry test_entry_10b1b373
DEBUG    app.services.xml_entry_service:xml_entry_service.py:295 Insert query:

            declare namespace lift = "http://fieldworks.sil.org/schemas/lift/0.13";
            declare namespace flex = "http://fieldworks.sil.org/schemas/flex/0.1";
            
        insert node <lift:entry xmlns:lift="http://fieldworks.sil.org/schemas/lift/0.13" id="test_entry_10b1b373">
        <lift:lexical-unit>
            <lift:form lang="en"><lift:text>test</lift:text></lift:form>
        </lift:lexical-unit>
        <lift:sense id="sense1">
            <lift:grammatical-info value="noun" />
            <lift:definition>
                <lift:form lang="en"><lift:text>to try something</lift:text></lift:form>
            </lift:definition>
        </lift:sense>
    </lift:entry> into collection('test_20251224_0013_session_b260c9')//lift:lift
        
DEBUG    app.services.xml_entry_service:xml_entry_service.py:303 Flushed database changes for entry test_entry_10b1b373
INFO     app.services.xml_entry_service:xml_entry_service.py:307 Successfully created entry: test_entry_10b1b373
INFO     app.api.xml_entries:xml_entries.py:79 [XML API] Entry created: test_entry_10b1b373
INFO     app.api.xml_entries:xml_entries.py:86 [XML API] Cleared entries cache after creating entry test_entry_10b1b373
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
---------------------------- Captured log teardown -----------------------------
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
INFO     app.database.basex_connector:basex_connector.py:87 No BaseX database configured for this connector
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: None)
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: DROP DB test_20251224_0017_unit_cbb825
INFO     app.database.basex_connector:basex_connector.py:394 Database 'test_20251224_0017_unit_cbb825' dropped successfully
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
____________________ test_all_lift_ranges_available_via_api ____________________
tests/integration/test_lift_ranges_integration.py:237: in test_all_lift_ranges_available_via_api
    assert range_type in available_types or any(
E   AssertionError: Core range type 'grammatical-info' not found in available ranges: {'lexical-relation'}
E   assert ('grammatical-info' in {'lexical-relation'} or False)
E    +  where False = any(<generator object test_all_lift_ranges_available_via_api.<locals>.<genexpr> at 0x7282c038d2a0>)
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpoypbxqmx.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp7uy32mjm.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpxr7zd8io.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
________________ TestRangeElementsCRUDClean.test_create_and_get ________________
tests/integration/test_ranges_elements_crud_clean.py:69: in test_create_and_get
    assert element_exists, f"Element {element_id} should exist in range {test_range_id}"
E   AssertionError: Element clean-create-elem should exist in range Publications
E   assert False

During handling of the above exception, another exception occurred:
tests/integration/test_ranges_elements_crud_clean.py:71: in test_create_and_get
    pytest.fail(f"Failed to verify element exists in service layer: {e}")
E   Failed: Failed to verify element exists in service layer: Element clean-create-elem should exist in range Publications
E   assert False
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
DEBUG: LIFTRangesParser.parse_string called with XML length 401
DEBUG: _parse_range_hierarchy for test-range-integration, total elements found: 0
DEBUG: Using direct hierarchy for test-range-integration, direct count: 0
DEBUG: _parse_range_hierarchy for test-range-no-labels, total elements found: 0
DEBUG: Using direct hierarchy for test-range-no-labels, direct count: 0
DEBUG: _parse_range_hierarchy for test-range, total elements found: 0
DEBUG: Using direct hierarchy for test-range, direct count: 0
DEBUG: _parse_ranges returned 3 results
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpr8sot6wz.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpcxjnod3s.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpmvphgvbp.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
collection('test_20251224_0013_session_b260c9')//*[local-name() = 'lift-ranges']
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: collection('test_20251224_0013_session_b260c9')//*[local-name() = 'lift-ranges']...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
----------------------------- Captured stdout call -----------------------------
DEBUG: LIFTRangesParser.parse_string called with XML length 401
DEBUG: _parse_range_hierarchy for test-range-integration, total elements found: 0
DEBUG: Using direct hierarchy for test-range-integration, direct count: 0
DEBUG: _parse_range_hierarchy for test-range-no-labels, total elements found: 0
DEBUG: Using direct hierarchy for test-range-no-labels, direct count: 0
DEBUG: _parse_range_hierarchy for test-range, total elements found: 0
DEBUG: Using direct hierarchy for test-range, direct count: 0
DEBUG: _parse_ranges returned 3 results
DEBUG: LIFTRangesParser.parse_string called with XML length 401
DEBUG: _parse_range_hierarchy for test-range-integration, total elements found: 0
DEBUG: Using direct hierarchy for test-range-integration, direct count: 0
DEBUG: _parse_range_hierarchy for test-range-no-labels, total elements found: 0
DEBUG: Using direct hierarchy for test-range-no-labels, direct count: 0
DEBUG: _parse_range_hierarchy for test-range, total elements found: 0
DEBUG: Using direct hierarchy for test-range, direct count: 0
DEBUG: _parse_ranges returned 3 results
DEBUG: LIFTRangesParser.parse_string called with XML length 401
DEBUG: _parse_range_hierarchy for test-range-integration, total elements found: 0
DEBUG: Using direct hierarchy for test-range-integration, direct count: 0
DEBUG: _parse_range_hierarchy for test-range-no-labels, total elements found: 0
DEBUG: Using direct hierarchy for test-range-no-labels, direct count: 0
DEBUG: _parse_range_hierarchy for test-range, total elements found: 0
DEBUG: Using direct hierarchy for test-range, direct count: 0
DEBUG: _parse_ranges returned 3 results
DEBUG: LIFTRangesParser.parse_string called with XML length 401
DEBUG: _parse_range_hierarchy for test-range-integration, total elements found: 0
DEBUG: Using direct hierarchy for test-range-integration, direct count: 0
DEBUG: _parse_range_hierarchy for test-range-no-labels, total elements found: 0
DEBUG: Using direct hierarchy for test-range-no-labels, direct count: 0
DEBUG: _parse_range_hierarchy for test-range, total elements found: 0
DEBUG: Using direct hierarchy for test-range, direct count: 0
DEBUG: _parse_ranges returned 3 results
------------------------------ Captured log call -------------------------------
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
collection('test_20251224_0013_session_b260c9')//*[local-name() = 'lift-ranges']
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: collection('test_20251224_0013_session_b260c9')//*[local-name() = 'lift-ranges']...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
collection('test_20251224_0013_session_b260c9')//*[local-name() = 'lift-ranges']
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: collection('test_20251224_0013_session_b260c9')//*[local-name() = 'lift-ranges']...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

                for $entry in //entry[
                  .//trait[@name = 'Publications' and @value = 'clean-create-elem']
                ]
                return concat(
                  $entry/@id, '|||',
                  string($entry/lexical-unit/form[1]/text[1]), '|||',
                  count($entry//trait[@name = 'Publications' and @value = 'clean-create-elem'])
                )
                
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
                for $entry in //entry[
                  .//trait[@name = 'Publications' and @value...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: 
        delete node collection('test_20251224_0013_session_b260c9')//range[@id='Publications']//ran...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
INFO     app.services.ranges_service:ranges_service.py:727 Deleted element 'clean-create-elem' from range 'Publications'
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
collection('test_20251224_0013_session_b260c9')//*[local-name() = 'lift-ranges']
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: collection('test_20251224_0013_session_b260c9')//*[local-name() = 'lift-ranges']...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:

        exists(collection('test_20251224_0013_session_b260c9')//range[@id='Publications']//range-element[@id='clean-create-elem'])
        
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: 
        exists(collection('test_20251224_0013_session_b260c9')//range[@id='Publications']//range-el...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: 
        let $range := collection('test_20251224_0013_session_b260c9')//range[@id='Publications']
  ...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
INFO     app.services.ranges_service:ranges_service.py:631 Created element 'clean-create-elem' in range 'Publications' with GUID 48ae09e8-817a-474d-93f2-eb3a1c07fbcf
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
collection('test_20251224_0013_session_b260c9')//*[local-name() = 'lift-ranges']
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: collection('test_20251224_0013_session_b260c9')//*[local-name() = 'lift-ranges']...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
__________________ test_install_recommended_when_ranges_exist __________________
tests/integration/test_ranges_installation.py:65: in test_install_recommended_when_ranges_exist
    assert 'grammatical-info' in data['data']
E   AssertionError: assert 'grammatical-info' in {'lexical-relation': {'config_type': 'lexical-relation', 'description': {'en': 'Types of lexical relationships between entries'}, 'fieldworks_standard': True, 'guid': 'lexical-relation-default', ...}}
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmphq61vhmh.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpjj2pi03j.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpa43pgpff.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
_____________________ test_recommended_traits_yaml_content _____________________
tests/integration/test_ranges_installation.py:81: in test_recommended_traits_yaml_content
    assert 'variant-types' in data, "variant-types section missing from recommended_traits.yaml"
E   AssertionError: variant-types section missing from recommended_traits.yaml
E   assert 'variant-types' in {'complex-form-type': [{'definition': 'A word formed from two or more stems.', 'id': 'compound', 'label': 'Compound'}, {'definition': 'A stem that is made up of a root plus an affix that adds a non-inflectional component of meaning.', 'id': 'derivative', 'label': 'Derivative'}, {'definition': 'A multi-word expression that is recognized as a semantic unit.', 'id': 'idiom', 'label': 'Idiom'}, {'definition': 'A combination of a lexical verb and a verbal particle that forms a single semantic and syntactic unit.', 'id': 'phrasal-verb', 'label': 'Phrasal Verb'}, {'definition': 'A combination of two lexemes that are phonologically reduced.', 'id': 'contraction', 'label': 'Contraction'}, {'definition': 'Any pithy phrasal expression of wisdom or truth; esp., an adage, proverb, or maxim.', 'id': 'saying', 'label': 'Saying'}], 'variant-type': [{'definition': 'A regional or social variety of a language.', 'id': 'dialectal', 'label': 'Dialectal Variant'}, {'definition': 'Interchangeable forms used by the same speaker without discernible conditioning.', 'id': 'free', 'label': 'Free Variant'}, {'definition': "Forms that deviate from standard rules, such as 'men' for the plural of 'man'.", 'id': 'irregular', 'label': 'Irregularly Inflected Form'}, {'definition': 'Purely orthographic differences (e.g., color vs. colour).', 'id': 'spelling', 'label': 'Spelling Variant'}]}
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp4gswqm2l.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpx0wnj5o_.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp1tyl515o.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
___________ test_ranges_editor_api_includes_label_and_official_flag ____________
tests/integration/test_ranges_labels_and_official_flag.py:18: in test_ranges_editor_api_includes_label_and_official_flag
    assert lr.get('official') is True
E   AssertionError: assert False is True
E    +  where False = <built-in method get of dict object at 0x72828c19dc80>('official')
E    +    where <built-in method get of dict object at 0x72828c19dc80> = {'config_type': None, 'description': {'en': 'Lexical reference types'}, 'fieldworks_standard': False, 'guid': 'provided-lexical-relation', ...}.get
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp4rskhklr.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmpnk7zwp83.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp6_6horu6.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------
DEBUG: LIFTRangesParser.parse_string called with XML length 401
DEBUG: _parse_range_hierarchy for test-range-integration, total elements found: 0
DEBUG: Using direct hierarchy for test-range-integration, direct count: 0
DEBUG: _parse_range_hierarchy for test-range-no-labels, total elements found: 0
DEBUG: Using direct hierarchy for test-range-no-labels, direct count: 0
DEBUG: _parse_range_hierarchy for test-range, total elements found: 0
DEBUG: Using direct hierarchy for test-range, direct count: 0
DEBUG: _parse_ranges returned 3 results
------------------------------ Captured log call -------------------------------
INFO     app.database.basex_connector:basex_connector.py:192 Executing BaseX query:
collection('test_20251224_0013_session_b260c9')//*[local-name() = 'lift-ranges']
DEBUG    app.database.basex_connector:basex_connector.py:198 Query executed successfully: collection('test_20251224_0013_session_b260c9')//*[local-name() = 'lift-ranges']...
DEBUG    app.database.basex_connector:basex_connector.py:250 Restored session to original database 'test_20251224_0013_session_b260c9' after query
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: .//lift:range-element (plain: .//range-element) in <range>
DEBUG    app.parsers.lift_parser:lift_parser.py:1075 MISSING: ./lift:range-element (plain: ./range-element) in <range>
__ TestUIRangesSpecialEditors.test_range_validation_and_error_handling_in_ui ___
tests/integration/test_ui_ranges_phase4.py:415: in test_range_validation_and_error_handling_in_ui
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <WrapperTestResponse streamed [404 NOT FOUND]>.status_code
---------------------------- Captured stdout setup -----------------------------
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log setup ------------------------------
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:331 Update executed successfully: declare namespace lift = 'http://fieldworks.sil.org/schemas/lift/0.13'; delete node collection('test...
DEBUG    app.database.basex_connector:basex_connector.py:351 Closed session to persist changes
INFO     app.database.basex_connector:basex_connector.py:84 Opening BaseX database: test_20251224_0013_session_b260c9
DEBUG    app.database.basex_connector:basex_connector.py:89 Connected to BaseX server at localhost:1984 (database: test_20251224_0013_session_b260c9)
DEBUG    app.database.basex_connector:basex_connector.py:354 Reopened session after persist
DEBUG    app.database.basex_connector:basex_connector.py:360 Restored session to original database 'test_20251224_0013_session_b260c9' after update
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp6ughqtm5.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp1x0aqj1x.xml"
DEBUG    app.database.basex_connector:basex_connector.py:287 Command executed successfully: ADD "/tmp/tmp2yz5s0qh.xml"
DEBUG    app.database.basex_connector:basex_connector.py:142 Disconnected from BaseX server
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
INFO     app.services.dictionary_service:dictionary_service.py:2884 Recommended ranges already installed; returning existing ranges
----------------------------- Captured stdout call -----------------------------

DEBUG: get_range hit for grammatical-info
DEBUG: get_ranges entering for project_id 1, force_reload=False, current self.ranges keys: ['lexical-relation']
------------------------------ Captured log call -------------------------------
DEBUG    app.services.dictionary_service:dictionary_service.py:2656 Returning cached LIFT ranges.
=========================== short test summary info ============================
FAILED tests/integration/test_component_sense_relations_crud.py::TestSenseRelationCRUD::test_read_sense_relations
FAILED tests/integration/test_cross_reference_functionality.py::test_grammatical_info_search_with_dynamic_types
FAILED tests/integration/test_cross_reference_functionality.py::test_workset_creation_with_complex_query
FAILED tests/integration/test_cross_reference_functionality.py::test_ranges_api_provides_all_necessary_types
FAILED tests/integration/test_css_filtering.py::TestCSSFiltering::test_relation_filter_exclude
FAILED tests/integration/test_css_filtering.py::TestCSSFiltering::test_relation_filter_include
FAILED tests/integration/test_css_relation_resolution.py::TestCSSRelationResolution::test_multiple_relations_all_resolved
FAILED tests/integration/test_database_drop_integration.py::TestDatabaseDrop::test_drop_database_content
FAILED tests/integration/test_database_drop_integration.py::TestDatabaseDrop::test_drop_and_reinitialize
FAILED tests/integration/test_database_drop_integration.py::TestDatabaseDrop::test_drop_database_content_multiple_times
FAILED tests/integration/test_display_aspect_integration.py::TestDisplayAspectIntegration::test_variant_display_aspect
FAILED tests/integration/test_dynamic_ranges.py::test_ranges_api_endpoint - A...
FAILED tests/integration/test_dynamic_ranges.py::test_lexical_relation_range
FAILED tests/integration/test_entry_form_loads.py::TestEntryFormLoading::test_ranges_api_available
FAILED tests/integration/test_exporter_integration.py::TestExporterIntegration::test_empty_database_export
FAILED tests/integration/test_flask_search_endpoint.py::TestFlaskSearchEndpoint::test_search_endpoint_with_results
FAILED tests/integration/test_flask_search_endpoint.py::TestFlaskSearchEndpoint::test_search_endpoint_pagination
FAILED tests/integration/test_flask_search_endpoint.py::TestFlaskSearchEndpoint::test_direct_api_search
FAILED tests/integration/test_full_ranges_integration.py::test_grammatical_info_has_full_lift_ranges
FAILED tests/integration/test_full_ranges_integration.py::test_lexical_relation_types_available
FAILED tests/integration/test_full_ranges_integration.py::test_all_ranges_available
FAILED tests/integration/test_lift_ranges_integration.py::test_entry_form_loads_lift_ranges
FAILED tests/integration/test_lift_ranges_integration.py::test_all_lift_ranges_available_via_api
FAILED tests/integration/test_ranges_elements_crud_clean.py::TestRangeElementsCRUDClean::test_create_and_get
FAILED tests/integration/test_ranges_installation.py::test_install_recommended_when_ranges_exist
FAILED tests/integration/test_ranges_installation.py::test_recommended_traits_yaml_content
FAILED tests/integration/test_ranges_labels_and_official_flag.py::test_ranges_editor_api_includes_label_and_official_flag
FAILED tests/integration/test_ui_ranges_phase4.py::TestUIRangesSpecialEditors::test_range_validation_and_error_handling_in_ui
ERROR tests/integration/test_dictionary_service.py::TestDictionaryService::test_initialize_database
ERROR tests/integration/test_dictionary_service.py::TestDictionaryService::test_get_entry
ERROR tests/integration/test_dictionary_service.py::TestDictionaryService::test_create_entry
ERROR tests/integration/test_dictionary_service.py::TestDictionaryService::test_update_entry
ERROR tests/integration/test_dictionary_service.py::TestDictionaryService::test_delete_entry
ERROR tests/integration/test_dictionary_service.py::TestDictionaryService::test_list_entries
ERROR tests/integration/test_dictionary_service.py::TestDictionaryService::test_search_entries
ERROR tests/integration/test_dictionary_service.py::TestDictionaryService::test_import_lift
ERROR tests/integration/test_dictionary_service.py::TestDictionaryService::test_export_lift
ERROR tests/integration/test_entry_update.py::test_entry_update - app.utils.e...
ERROR tests/integration/test_exporter_integration.py::TestExporterIntegration::test_kindle_exporter_real_data
ERROR tests/integration/test_exporter_integration.py::TestExporterIntegration::test_kindle_exporter_custom_options
ERROR tests/integration/test_exporter_integration.py::TestExporterIntegration::test_sqlite_exporter_real_data
ERROR tests/integration/test_exporter_integration.py::TestExporterIntegration::test_sqlite_exporter_schema_validation
ERROR tests/integration/test_exporter_integration.py::TestExporterIntegration::test_exporter_error_handling
ERROR tests/integration/test_live_search_functionality.py::TestLiveSearchFunctionality::test_basic_search
ERROR tests/integration/test_live_search_functionality.py::TestLiveSearchFunctionality::test_count_entries
ERROR tests/integration/test_live_search_functionality.py::TestLiveSearchFunctionality::test_search_edge_cases
ERROR tests/integration/test_live_search_functionality.py::TestLiveSearchFunctionality::test_search_pagination
ERROR tests/integration/test_live_search_functionality.py::TestLiveSearchFunctionality::test_search_special_characters
ERROR tests/integration/test_live_search_functionality.py::TestLiveSearchFunctionality::test_search_with_fields
ERROR tests/integration/test_real_integration.py::TestRealIntegration::test_real_entry_creation_and_retrieval
ERROR tests/integration/test_real_integration.py::TestRealIntegration::test_real_search_functionality
ERROR tests/integration/test_real_integration.py::TestRealIntegration::test_real_entry_update_and_delete
ERROR tests/integration/test_real_integration.py::TestRealIntegration::test_real_statistics_and_counts
ERROR tests/integration/test_real_integration.py::TestRealIntegration::test_real_lift_import_export_roundtrip
ERROR tests/integration/test_real_integration.py::TestRealIntegration::test_real_error_handling
ERROR tests/integration/test_real_integration.py::TestRealIntegration::test_real_sense_operations
ERROR tests/integration/test_search.py::TestSearch::test_basic_search - app.u...
ERROR tests/integration/test_search.py::TestSearch::test_search_exact_match
ERROR tests/integration/test_search.py::TestSearch::test_search_by_field - ap...
ERROR tests/integration/test_search.py::TestSearch::test_search_special_characters
ERROR tests/integration/test_search.py::TestSearch::test_search_pagination - ...
ERROR tests/integration/test_search.py::TestSearch::test_search_no_results - ...
ERROR tests/integration/test_search.py::TestSearch::test_search_after_update
ERROR tests/integration/test_search_functionality.py::test_count_entries - ap...
ERROR tests/integration/test_search_functionality.py::test_basic_search - app...
ERROR tests/integration/test_statistics_and_status.py::TestDictionaryStatistics::test_count_entries
ERROR tests/integration/test_statistics_and_status.py::TestDictionaryStatistics::test_count_senses_and_examples
ERROR tests/integration/test_statistics_and_status.py::TestDictionaryStatistics::test_statistics_after_import
ERROR tests/integration/test_statistics_and_status.py::TestSystemStatus::test_get_system_status
====== 28 failed, 1199 passed, 52 skipped, 41 errors in 464.76s (0:07:44) ======
