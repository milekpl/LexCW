<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Entry: Protestantism</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/main.css">
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css">

</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <i class="fas fa-book"></i> Lexicographic Curation Workbench
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link " 
                           href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " 
                           href="/entries">Entries</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " 
                           href="/search">Search</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " 
                           href="/corpus-management">Corpus Management</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="importExportDropdown" role="button" 
                           data-bs-toggle="dropdown" aria-expanded="false">
                            Import/Export
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="importExportDropdown">
                            <li><a class="dropdown-item" href="/import/lift">Import LIFT</a></li>
                            <li><a class="dropdown-item" href="/export/lift">Export LIFT</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/export/kindle">Export for Kindle</a></li>
                            <li><a class="dropdown-item" href="/export/sqlite">Export for Mobile App</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="toolsDropdown" role="button" 
                           data-bs-toggle="dropdown" aria-expanded="false">
                            Tools
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="toolsDropdown">
                            <li><a class="dropdown-item" href="/tools/batch-edit">Batch Edit</a></li>
                            <li><a class="dropdown-item" href="/tools/validation">Validation</a></li>
                            <li><a class="dropdown-item" href="/tools/pronunciation">Pronunciation</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/settings">Settings</a></li>
                        </ul>
                    </li>
                </ul>
                <form class="d-flex" action="/search" method="get">
                    <input class="form-control me-2" type="search" name="q" placeholder="Quick search..." aria-label="Search">
                    <button class="btn btn-outline-light" type="submit">Search</button>
                </form>
            </div>
        </div>
    </nav>

    <!-- Flash messages -->
    <div class="container mt-3">
        
            
        
    </div>

    <!-- Main content -->
    <div class="container mt-4">
        
<div class="row mb-4">
    <div class="col-md-8">
        <h2>
            
            <i class="fas fa-edit"></i> Edit Entry: <span class="text-primary">Protestantism</span>
            
        </h2>
    </div>
    <div class="col-md-4 text-end">
        
        <a href="/entries/Protestantism_b97495fb-d52f-4755-94bf-a7a762339605" class="btn btn-outline-primary">
            <i class="fas fa-eye"></i> View Entry
        </a>
        
        <a href="/entries" class="btn btn-outline-secondary">
            <i class="fas fa-list"></i> All Entries
        </a>
    </div>
</div>

<form id="entry-form" method="post" 
      action="/entries/Protestantism_b97495fb-d52f-4755-94bf-a7a762339605/edit">
    <div class="row">
        <div class="col-md-4">
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5><i class="fas fa-book"></i> Basic Information</h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <label for="lexical-unit" class="form-label">Lexical Unit <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="lexical-unit" name="lexical_unit" 
                               value="Protestantism" required>
                        <div class="form-text">The headword as it appears in the dictionary.</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="citation-form" class="form-label">Citation Form</label>
                        <input type="text" class="form-control" id="citation-form" name="citation_form" 
                               value="">
                        <div class="form-text">Optional citation form if different from the headword.</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="part-of-speech" class="form-label">Part of Speech <span class="text-danger">*</span></label>
                        <select class="form-select dynamic-grammatical-info" id="part-of-speech" name="grammatical_info.part_of_speech" required
                                data-selected=""
                                data-range-id="grammatical-info">
                            <option value="">Select part of speech</option>
                            <!-- Options will be dynamically loaded from LIFT ranges -->
                        </select>
                    </div>

                    <!-- LIFT Ranges: Semantic Domain -->
                    <div class="mb-3">
                        <label for="semantic-domain-list" class="form-label">Semantic Domain</label>
                        <select class="form-select dynamic-lift-range" id="semantic-domain-ddp4" name="semantic_domain" 
                                data-range-id="semantic-domain-ddp4" 
                                data-hierarchical="true" 
                                data-searchable="true">
                            <option value="">Select semantic domain</option>
                        </select>
                    </div>

                    <!-- LIFT Ranges: Usage Type -->
                    <div class="mb-3">
                        <label for="usage-type" class="form-label">Usage Type</label>
                        <select class="form-select dynamic-lift-range" id="usage-type" name="usage_type" 
                                data-range-id="usage-type"
                                data-hierarchical="true"
                                data-searchable="true">
                            <option value="">Select usage type</option>
                        </select>
                    </div>

                    <!-- LIFT Ranges: Status -->
                    <div class="mb-3">
                        <label for="status" class="form-label">Status</label>
                        <select class="form-select dynamic-lift-range" id="status" name="status" 
                                data-range-id="status"
                                data-hierarchical="true"
                                data-searchable="true">
                            <option value="">Select status</option>
                        </select>
                    </div>

                    <!-- LIFT Ranges: Morphological Type -->
                    <div class="mb-3">
                        <label for="morph-type" class="form-label">Morphological Type</label>
                        <select class="form-select dynamic-lift-range" id="morph-type" name="morph_type" 
                                data-range-id="morph-type"
                                data-hierarchical="true"
                                data-searchable="true">
                            <option value="">Select morphological type</option>
                        </select>
                    </div>


                    
                    <div class="mb-3">
                        <label for="etymology" class="form-label">Etymology</label>
                        <textarea class="form-control" id="etymology" name="etymology" rows="3"></textarea>
                        <div class="form-text">Historical origin or derivation of the word.</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="entry-note" class="form-label">Entry Note</label>
                        <textarea class="form-control" id="entry-note" name="note" rows="3"></textarea>
                        <div class="form-text">Additional notes about this entry.</div>
                    </div>
                </div>
            </div>
            
            <div class="card mb-4">
                <div class="card-header bg-info text-white">
                    <h5><i class="fas fa-microphone"></i> Pronunciation</h5>
                </div>
                <div class="card-body">
                    <div id="pronunciation-container">
                        <!-- Pronunciation items will be dynamically generated by JavaScript -->
                    </div>
                    
                    <button type="button" class="btn btn-sm btn-primary" id="add-pronunciation-btn">
                        <i class="fas fa-plus"></i> Add Pronunciation
                    </button>
                </div>
            </div>
            
            <div class="card mb-4">
                <div class="card-header bg-warning text-white">
                    <h5><i class="fas fa-exchange-alt"></i> Variant Forms</h5>
                </div>
                <div class="card-body">
                    <div id="variants-container">
                        <!-- Variant forms will be populated by JavaScript -->
                    </div>
                    
                    <button type="button" class="btn btn-sm btn-warning" id="add-variant-btn">
                        <i class="fas fa-plus"></i> Add Variant
                    </button>
                </div>
            </div>
            
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="fas fa-link"></i> Relations</h5>
                        <button type="button" class="btn btn-sm btn-light" id="add-relation-btn">
                            <i class="fas fa-plus"></i> Add Relation
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div id="relations-container">
                        <!-- Relations will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header bg-warning text-dark">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="fas fa-history"></i> Etymology</h5>
                        <small class="text-muted">Historical word origin and development</small>
                    </div>
                </div>
                <div class="card-body">
                    <div id="etymology-container">
                        <!-- Etymology forms will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-8">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="fas fa-lightbulb"></i> Senses</h5>
                        <button type="button" class="btn btn-sm btn-light" id="add-sense-btn">
                            <i class="fas fa-plus"></i> Add Sense
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div id="senses-container">
                        
                            
                                <div class="sense-item card mb-4" data-sense-index="0">
                                    <div class="card-header bg-light">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <h6 class="mb-0">Sense 1</h6>
                                            
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">Definition <span class="text-danger">*</span></label>
                                            <textarea class="form-control" name="senses[0].definition" 
                                                      rows="2" required>protestantyzm</textarea>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label">Gloss</label>
                                            <input type="text" class="form-control" name="senses[0].gloss" 
                                                   value="">
                                            <div class="form-text">A short equivalent in another language.</div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="part-of-speech" class="form-label">Part of Speech</label>
                                            <select class="form-select dynamic-grammatical-info" name="senses[0].grammatical_info"
                                                    data-selected="Noun"
                                                    data-range-id="grammatical-info">
                                                <option value="">Select part of speech</option>
                                            </select>
                                            <div class="form-text">Grammatical category for this sense.</div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label">Sense Note</label>
                                            <textarea class="form-control" name="senses[0].note" 
                                                      rows="2"></textarea>
                                        </div>
                                        
                                        <div class="examples-section mt-4">
                                            <div class="d-flex justify-content-between align-items-center mb-3">
                                                <h6><i class="fas fa-quote-left"></i> Examples</h6>
                                                <button type="button" class="btn btn-sm btn-outline-primary add-example-btn" 
                                                        data-sense-index="0">
                                                    <i class="fas fa-plus"></i> Add Example
                                                </button>
                                            </div>
                                            
                                            <div class="examples-container">
                                                
                                                    <div class="no-examples text-center text-muted py-3 border rounded">
                                                        <p>No examples added yet</p>
                                                        <button type="button" class="btn btn-sm btn-outline-primary add-example-btn" 
                                                                data-sense-index="0">
                                                            <i class="fas fa-plus"></i> Add Example
                                                        </button>
                                                    </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        
                    </div>
                    
                    <div class="text-center mt-3" id="no-senses-message" style="display: none;">
                        <p class="text-muted">No senses added yet</p>
                        <button type="button" class="btn btn-primary" id="add-first-sense-btn">
                            <i class="fas fa-plus"></i> Add First Sense
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card mt-4">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <button type="button" class="btn btn-secondary" id="cancel-btn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        
                        <div>
                            <button type="button" class="btn btn-primary" id="validate-btn">
                                <i class="fas fa-check-circle"></i> Validate
                            </button>
                            <button type="submit" class="btn btn-success" id="save-btn">
                                <i class="fas fa-save"></i> Save Entry
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<!-- Templates for JavaScript -->
<template id="pronunciation-template">
    <div class="pronunciation-item mb-3 border-bottom pb-3">
        <div class="row">
            <div class="col-md-8">
                <label class="form-label">IPA</label>
                <input type="text" class="form-control" name="pronunciations[INDEX].value" 
                       value="" placeholder="IPA transcription">
            </div>
            <div class="col-md-4">
                <label class="form-label">Type</label>
                <input type="hidden" name="pronunciations[INDEX].type" value="seh-fonipa">
                <input type="text" class="form-control" value="seh-fonipa" disabled
                       title="Only seh-fonipa is supported for IPA pronunciations">
                <div class="form-text">International Phonetic Alphabet (IPA)</div>
            </div>
        </div>
        
        <div class="mt-2 mb-2">
            <label class="form-label">Audio File</label>
            <div class="input-group">
                <input type="text" class="form-control" name="pronunciations[INDEX].audio_file" 
                       value="" readonly>
                <button class="btn btn-outline-secondary generate-audio-btn" type="button" 
                        data-index="INDEX">
                    <i class="fas fa-microphone"></i> Generate
                </button>
            </div>
        </div>
        
        <div class="form-check">
            <input class="form-check-input" type="checkbox" value="1" 
                   id="pron-default-INDEX" name="pronunciations[INDEX].is_default">
            <label class="form-check-label" for="pron-default-INDEX">
                Default pronunciation
            </label>
        </div>
        
        <div class="mt-2">
            <button type="button" class="btn btn-sm btn-outline-danger remove-pronunciation-btn" 
                    data-index="INDEX">
                <i class="fas fa-trash"></i> Remove
            </button>
        </div>
    </div>
</template>

<template id="sense-template">
    <div class="sense-item card mb-4" data-sense-index="INDEX">
        <div class="card-header bg-light">
            <div class="d-flex justify-content-between align-items-center">
                <h6 class="mb-0">Sense NUMBER</h6>
                <button type="button" class="btn btn-sm btn-outline-danger remove-sense-btn" 
                        data-index="INDEX">
                    <i class="fas fa-trash"></i> Remove
                </button>
            </div>
        </div>
        <div class="card-body">
            <div class="mb-3">
                <label class="form-label">Definition <span class="text-danger">*</span></label>
                <textarea class="form-control" name="senses[INDEX].definition" 
                          rows="2" required></textarea>
            </div>
            
            <div class="mb-3">
                <label class="form-label">Gloss</label>
                <input type="text" class="form-control" name="senses[INDEX].gloss" value="">
                <div class="form-text">A short equivalent in another language.</div>
            </div>
            
            <div class="mb-3">
                <label class="form-label">Part of Speech</label>
                <select class="form-select dynamic-grammatical-info" name="senses[INDEX].grammatical_info"
                        data-range-id="grammatical-info"
                        data-hierarchical="true"
                        data-searchable="true">
                    <option value="">Select part of speech</option>
                </select>
            </div>
            
            <div class="mb-3">
                <label class="form-label">Sense Note</label>
                <textarea class="form-control" name="senses[INDEX].note" rows="2"></textarea>
            </div>
            
            <div class="examples-section mt-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h6><i class="fas fa-quote-left"></i> Examples</h6>
                    <button type="button" class="btn btn-sm btn-outline-primary add-example-btn" 
                            data-sense-index="INDEX">
                        <i class="fas fa-plus"></i> Add Example
                    </button>
                </div>
                
                <div class="examples-container">
                    <div class="no-examples text-center text-muted py-3 border rounded">
                        <p>No examples added yet</p>
                        <button type="button" class="btn btn-sm btn-outline-primary add-example-btn" 
                                data-sense-index="INDEX">
                            <i class="fas fa-plus"></i> Add Example
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<template id="example-template">
    <div class="example-item card mb-3">
        <div class="card-header bg-light py-2">
            <div class="d-flex justify-content-between align-items-center">
                <small>Example NUMBER</small>
                <button type="button" class="btn btn-sm btn-outline-danger remove-example-btn" 
                        data-sense-index="SENSE_INDEX" data-example-index="EXAMPLE_INDEX">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="card-body">
            <div class="mb-2">
                <label class="form-label">Example Text <span class="text-danger">*</span></label>
                <textarea class="form-control" name="senses[SENSE_INDEX].examples[EXAMPLE_INDEX].text" 
                          rows="2" required></textarea>
            </div>
            
            <div class="mb-2">
                <label class="form-label">Translation</label>
                <textarea class="form-control" name="senses[SENSE_INDEX].examples[EXAMPLE_INDEX].translation" 
                          rows="2"></textarea>
            </div>
            
            <div class="mb-2">
                <label class="form-label">Reference</label>
                <input type="text" class="form-control" name="senses[SENSE_INDEX].examples[EXAMPLE_INDEX].reference" 
                       value="">
            </div>
        </div>
    </div>
</template>

<!-- Validation Error Modal -->
<div class="modal fade" id="validationModal" tabindex="-1" aria-labelledby="validationModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="validationModalLabel">Validation Errors</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <ul id="validation-errors-list">
                    <!-- Errors will be populated here -->
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Audio Preview Modal -->
<div class="modal fade" id="audioPreviewModal" tabindex="-1" aria-labelledby="audioPreviewModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-info text-white">
                <h5 class="modal-title" id="audioPreviewModalLabel">Audio Preview</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <div class="mb-3">
                    <audio id="audio-preview-player" controls>
                        Your browser does not support the audio element.
                    </audio>
                </div>
                <div>
                    <button type="button" class="btn btn-primary" id="save-audio-btn">
                        <i class="fas fa-save"></i> Save Audio
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>


    </div>        <!-- Footer -->
        <footer class="footer mt-auto py-3 bg-light">
            <div class="container text-center">
                <span class="text-muted">Lexicographic Curation Workbench &copy; 2025</span>
            </div>
        </footer>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Common JS -->
    <script src="/static/js/common.js"></script>
    
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="/static/js/ranges-loader.js"></script>
<script src="/static/js/pronunciation-forms.js"></script>
<script src="/static/js/variant-forms.js"></script>
<script src="/static/js/relations.js"></script>
<script src="/static/js/etymology-forms.js"></script>
<script src="/static/js/entry-form.js"></script>

<script>
document.addEventListener('DOMContentLoaded', async function() {
    // Initialize Bootstrap tooltips
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
    
    // Note: Range selects are automatically populated by ranges-loader.js
    // No manual range loading needed - just ensure data-range-id attributes are set
    
    // Initialize component managers after DOM is loaded
    
    // Initialize pronunciation forms manager
    if (window.PronunciationFormsManager && document.getElementById('pronunciation-container')) {
        
            const pronunciations = [];
            
                pronunciations.push({
                    type: "seh-fonipa",
                    value: "ˈprɒtɪstəntɪzm",
                    audio_file: "",
                    is_default: true
                });
            
        
        window.pronunciationFormsManager = new PronunciationFormsManager('pronunciation-container', {
            pronunciations: pronunciations
        });
    }
    
    // Initialize variant forms manager
    if (window.VariantFormsManager && document.getElementById('variants-container')) {
        const variantForms = [] || [];
        window.variantFormsManager = new VariantFormsManager('variants-container', {
            variants: variantForms
        });
    }

    // Initialize relations manager
    if (window.RelationsManager && document.getElementById('relations-container')) {
        
            const relations = [];
        
        window.relationsManager = new RelationsManager('relations-container', {
            relations: relations
        });
    }

    // Initialize etymology forms manager
    if (window.EtymologyFormsManager && document.getElementById('etymology-container')) {
        const etymologies = [] || [];
        window.etymologyFormsManager = new EtymologyFormsManager('etymology-container', {
            etymologies: etymologies,
            rangeId: 'etymology-types'
        });
    }
});
</script>

</body>
</html>